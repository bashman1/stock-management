import{l as S,m as U,k as $,r as p,o as A,b as d,c as b,d as M,e as a,h as o,i as s,j as m,t as i,v as f,g,n as F,C as Y}from"./index-9434943a.js";const V=""+new URL("../demo/images/mtnmomo.svg",import.meta.url).href,q={class:"grid"},L={class:"col-12"},O={className:"card"},j={class:"my-2"},z={style:{padding:"20px"}},H={class:"grid p-fluid"},K={class:"field col-12 md:col-12"},Q={class:"p-float-label"},W={key:0,class:"field col-12 md:col-12"},J={__name:"Comissions",setup(X){S(),U();const w=$(),c=new Y,N=p(null),_=p(null),h=p(!1),C=p({}),v=p(null),r=p(null),B=()=>{c.genericRequest("get-commissions","get",!0,{}).then(l=>{l.status?N.value=l.data:c.showError(w,l.message)})},T=l=>{let e={action:l,phoneNo:v.value};r.value=null,c.genericRequest("test-momo-api","post",!1,e).then(u=>{u.status?l=="VERIFY_NAME"?r.value="Name: "+u.data.name+" "+u.data.given_name:r.value="Payment initiated successfully. Waiting to approval to complete the transaction":c.showError(w,u.message)})},k=l=>{h.value=l},D=(l,e)=>{C.value[e]=c.validateFormField(l)};return A(()=>{B()}),(l,e)=>{const u=d("Toast"),y=d("Button"),I=d("Toolbar"),n=d("Column"),R=d("DataTable"),x=d("InputText"),P=d("Dialog");return b(),M("div",q,[a("div",L,[a("div",O,[e[12]||(e[12]=a("h5",null,"View Commission",-1)),o(u),o(I,{class:"mb-4"},{start:s(()=>[a("div",j,[e[8]||(e[8]=a("img",{src:V,alt:"Image",height:"50"},null,-1)),o(y,{label:"Approve Payment",icon:"pi pi-check",class:"p-button-success",onClick:e[0]||(e[0]=t=>k(!0)),disabled:!_.value||!_.value.length},null,8,["disabled"])])]),end:s(()=>e[9]||(e[9]=[])),_:1}),o(R,{value:N.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll",selection:_.value,"onUpdate:selection":e[1]||(e[1]=t=>_.value=t),rowsPerPageOptions:[5,10,25]},{default:s(()=>[o(n,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.institution_name),1)]),_:1}),o(n,{header:"Rate",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.rate),1)]),_:1}),o(n,{header:"Commission",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.commision),1)]),_:1}),o(n,{header:"Member",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.member_name),1)]),_:1}),o(n,{header:"Officer",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.officer_name),1)]),_:1}),o(n,{header:"Tran Id",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.tran_id),1)]),_:1}),o(n,{header:"Phone Number",style:{"min-width":"12rem"}},{body:s(({data:t})=>[m(i(t.phone_number),1)]),_:1}),o(n,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.status),1)]),_:1}),o(n,{header:"Date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(i(t.created_at),1)]),_:1}),o(n,{selectionMode:"multiple",headerStyle:"width: 3rem"})]),_:1},8,["value","selection"]),o(P,{header:"Sales Details",visible:h.value,"onUpdate:visible":e[7]||(e[7]=t=>h.value=t),style:{width:"33vw"},modal:!0,class:"p-fluid"},{footer:s(()=>[v.value?g("",!0):(b(),f(y,{key:0,label:"Cancel",onClick:e[4]||(e[4]=t=>k(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"})),r.value?g("",!0):(b(),f(y,{key:1,onClick:e[5]||(e[5]=t=>T("VERIFY_NAME")),label:"NEXT",class:"p-button-outlined mr-2 mb-2"})),r.value?(b(),f(y,{key:2,onClick:e[6]||(e[6]=t=>T("REQUEST_PAYMENT")),label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})):g("",!0)]),default:s(()=>{var t;return[a("p",z,[a("div",H,[a("div",K,[e[11]||(e[11]=a("img",{src:V,alt:"Image",height:"50",class:"mb-3"},null,-1)),a("span",Q,[o(x,{type:"text",id:"phoneNo",onBlur:e[2]||(e[2]=E=>D(v.value,"phoneNo")),modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=E=>v.value=E),class:F({"p-invalid":(t=C.value)==null?void 0:t.phoneNo})},null,8,["modelValue","class"]),e[10]||(e[10]=a("label",{for:"unitName"},"MTN phone number",-1))])]),r.value?(b(),M("div",W,i(r.value),1)):g("",!0)])])]}),_:1},8,["visible"])])])])}}};export{J as default};
