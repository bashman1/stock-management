import{k as ul,l as dl,m as vl,r as o,o as ml,b as U,c as X,d as Y,e,h as i,n as m,g as rl,C as pl}from"./index-698191a2.js";const cl={class:"card"},fl={class:"grid p-fluid mt-3"},bl={class:"field col-12 md:col-4"},Vl={class:"p-float-label"},_l={class:"field col-12 md:col-4"},xl={class:"p-float-label"},yl={class:"field col-12 md:col-4"},Nl={class:"p-float-label"},gl={class:"field col-12 md:col-12"},Fl={class:"p-float-label"},Ul={class:"field col-12 md:col-4"},Bl={class:"p-float-label"},Cl={class:"field col-12 md:col-4"},Il={class:"p-float-label"},kl={class:"field col-12 md:col-4"},Tl={class:"p-float-label"},wl={class:"field col-12 md:col-4"},El={class:"p-float-label"},Sl={key:0,class:"field col-12 md:col-4"},$l={class:"p-float-label"},Rl={class:"field col-12 md:col-4"},Pl={class:"field col-12 md:col-12"},ql={class:"p-float-label"},Al={class:"card"},Dl={class:"grid p-fluid mt-3"},Ll={class:"field col-12 md:col-3"},Ol={class:"p-float-label"},zl={class:"field col-12 md:col-3"},Ml={class:"p-float-label"},Wl={class:"field col-12 md:col-3"},jl={class:"p-float-label"},Gl={class:"field col-12 md:col-3"},Hl={class:"p-float-label"},Jl={class:"card"},Kl={class:"grid p-fluid mt-3"},Ql={class:"field col-12 md:col-4"},Xl={class:"p-float-label"},Yl={class:"field col-12 md:col-4"},Zl={class:"p-float-label"},hl={class:"field col-12 md:col-4"},le={class:"p-float-label"},ee={class:"field col-12 md:col-4"},oe={__name:"CreateInstitution",setup(te){const R=ul(),n=new pl,Z=dl(),E=vl(),f=o(null),b=o(null),r=o(null),B=o(null),V=o(null),C=o(null),I=o(null),k=o(null),_=o(null),x=o(null),y=o(null),T=o(null),N=o(null),g=o(null),F=o(null),P=o(null),q=o(null),A=o(null);o({});const s=o({}),p=o({id:1,name:"Enable tax",value:!0}),S=o(null),h=o(!1),ll=o(null),D=o([{id:1,name:"Enable tax",value:!0},{id:2,name:"Disable tax",value:!1}]),el=()=>{var c,a,d,$;if(s.value.name=n.validateFormField(f.value),s.value.type=n.validateFormField(b.value),s.value.city=n.validateFormField(V.value),s.value.contactName=n.validateFormField(_.value),s.value.contactNumber=n.validateFormField(x.value),s.value.contactEmail=n.validateFormField(y.value),s.value.bankName=n.validateFormField(N.value),s.value.acctName=n.validateFormField(g.value),s.value.acctNumber=n.validateFormField(F.value),s.value.taxConfig=n.validateFormField(p.value),n.validateRequiredFields(s.value)){n.showError(R,"Please fill in the missing field");return}let l={id:E.params.id,name:f==null?void 0:f.value,type:(c=b==null?void 0:b.value)==null?void 0:c.id,start_date:r!=null&&r.value?r==null?void 0:r.value:new Date,address:B==null?void 0:B.value,city:(a=V==null?void 0:V.value)==null?void 0:a.id,street:C==null?void 0:C.value,p_o_box:I==null?void 0:I.value,description:k==null?void 0:k.value,contact_name:_==null?void 0:_.value,contact_number:x==null?void 0:x.value,contact_email:y==null?void 0:y.value,contact_web:T==null?void 0:T.value,bank_id:(d=N==null?void 0:N.value)==null?void 0:d.id,acct_name:g==null?void 0:g.value,acct_no:F==null?void 0:F.value,tax_config:($=p==null?void 0:p.value)==null?void 0:$.value,tin:S.value,status:"Active"};n.genericRequest("create-institution","post",!0,l).then(w=>{w.status?(n.showSuccess(R,w.message),n.redirect(Z,"/view-institutions")):n.showError(R,w.message)})},tl=()=>{n.genericRequest("get-institution-types","get",!1,{}).then(u=>{u.status&&(P.value=u.data)})},al=()=>{n.genericRequest("get-city-county-id/1","get",!1,{}).then(u=>{u.status&&(q.value=u.data)})},ol=()=>{n.genericRequest("get-bank-ref","get",!1,{}).then(u=>{u.status&&(A.value=u.data)})},v=(u,l)=>{s.value[l]=n.validateFormField(u)},sl=u=>{let l={institutionId:u,status:"Active"};n.genericRequest("get-institution-profile","post",!0,l).then(c=>{if(c.status){let a=c==null?void 0:c.data[0];f.value=a==null?void 0:a.name,r.value=a==null?void 0:a.start_date,B.value=a.address,V.value=q.value.find(d=>d.id==a.city_id),C.value=a.street,I.value=a.p_o_box,k.value=a.description,_.value=a.contact_name,x.value=a.contact_phone_number,y.value=a.contact_email,T.value=a.website,N.value=A.value.find(d=>d.id==a.bank_id),g.value=a.acct_name,F.value=a.acct_number,b.value=P.value.find(d=>d.id==a.institution_type_id),p.value=D.value.find(d=>d.value==a.is_tax_enabled),S.value=a.tin}})};return ml(()=>{tl(),al(),ol(),E.params.id!=null&&(ll.value=Number(E.params.id),h.value=!0,sl(E.params.id))}),(u,l)=>{var L,O,z,M,W,j,G,H,J,K,Q;const c=U("Toast"),a=U("InputText"),d=U("Dropdown"),$=U("Calendar"),w=U("Textarea"),nl=U("FileUpload"),il=U("Button");return X(),Y("div",null,[e("div",cl,[l[38]||(l[38]=e("h5",null,"Create Institution",-1)),e("div",fl,[i(c),e("div",bl,[e("span",Vl,[i(a,{type:"text",id:"instName",modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=t=>f.value=t),onBlur:l[1]||(l[1]=t=>v(f.value,"name")),class:m({"p-invalid":(L=s.value)==null?void 0:L.name})},null,8,["modelValue","class"]),l[27]||(l[27]=e("label",{for:"instName"},"Institution Name",-1))])]),e("div",_l,[e("span",xl,[i(d,{id:"instType",onBlur:l[2]||(l[2]=t=>v(b.value,"type")),options:P.value,modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=t=>b.value=t),class:m({"p-invalid":(O=s.value)==null?void 0:O.type}),optionLabel:"name"},null,8,["options","modelValue","class"]),l[28]||(l[28]=e("label",{for:"instType"},"Institution Type",-1))])]),e("div",yl,[e("span",Nl,[i($,{id:"instStart",modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=t=>r.value=t)},null,8,["modelValue"]),l[29]||(l[29]=e("label",{for:"instStart"},"Start Date",-1))])]),e("div",gl,[e("span",Fl,[i(w,{id:"textarea",rows:"3",cols:"30",modelValue:B.value,"onUpdate:modelValue":l[5]||(l[5]=t=>B.value=t)},null,8,["modelValue"]),l[30]||(l[30]=e("label",{for:"textarea"},"Address",-1))])]),e("div",Ul,[e("span",Bl,[i(d,{id:"instCity",options:q.value,modelValue:V.value,"onUpdate:modelValue":l[6]||(l[6]=t=>V.value=t),onBlur:l[7]||(l[7]=t=>v(V.value,"city")),class:m({"p-invalid":(z=s.value)==null?void 0:z.city}),optionLabel:"name"},null,8,["options","modelValue","class"]),l[31]||(l[31]=e("label",{for:"instCity"},"City",-1))])]),e("div",Cl,[e("span",Il,[i(a,{type:"text",id:"instStreet",modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=t=>C.value=t)},null,8,["modelValue"]),l[32]||(l[32]=e("label",{for:"instStreet"},"Street",-1))])]),e("div",kl,[e("span",Tl,[i(a,{type:"text",id:"instPOBox",modelValue:I.value,"onUpdate:modelValue":l[9]||(l[9]=t=>I.value=t)},null,8,["modelValue"]),l[33]||(l[33]=e("label",{for:"instPOBox"},"P.O Box",-1))])]),e("div",wl,[e("span",El,[i(d,{id:"instCity",options:D.value,modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=t=>p.value=t),onBlur:l[11]||(l[11]=t=>v(p.value,"taxConfig")),class:m({"p-invalid":(M=s.value)==null?void 0:M.taxConfig}),optionLabel:"name"},null,8,["options","modelValue","class"]),l[34]||(l[34]=e("label",{for:"instCity"},"Tax Config",-1))])]),(W=p.value)!=null&&W.value?(X(),Y("div",Sl,[e("span",$l,[i(a,{type:"text",id:"tin",modelValue:S.value,"onUpdate:modelValue":l[12]||(l[12]=t=>S.value=t)},null,8,["modelValue"]),l[35]||(l[35]=e("label",{for:"instPOBox"},"TIN",-1))])])):rl("",!0),e("div",Rl,[l[36]||(l[36]=e("h5",null,"Attachment",-1)),i(nl,{mode:"basic",name:"demo[]",accept:"image/*",maxFileSize:1e6,onUploader:u.onUpload,customUpload:""},null,8,["onUploader"])]),e("div",Pl,[e("span",ql,[i(w,{id:"instDescription",rows:"3",cols:"30",modelValue:k.value,"onUpdate:modelValue":l[13]||(l[13]=t=>k.value=t)},null,8,["modelValue"]),l[37]||(l[37]=e("label",{for:"instDescription"},"Description",-1))])])])]),e("div",Al,[l[43]||(l[43]=e("h5",null,"Institution Contact Info",-1)),e("div",Dl,[e("div",Ll,[e("span",Ol,[i(a,{type:"text",id:"contactName",modelValue:_.value,"onUpdate:modelValue":l[14]||(l[14]=t=>_.value=t),onBlur:l[15]||(l[15]=t=>v(_.value,"contactName")),class:m({"p-invalid":(j=s.value)==null?void 0:j.contactName})},null,8,["modelValue","class"]),l[39]||(l[39]=e("label",{for:"contactName"},"Contact Person Name",-1))])]),e("div",zl,[e("span",Ml,[i(a,{id:"basic",modelValue:x.value,"onUpdate:modelValue":l[16]||(l[16]=t=>x.value=t),onBlur:l[17]||(l[17]=t=>v(x.value,"contactNumber")),class:m({"p-invalid":(G=s.value)==null?void 0:G.contactNumber})},null,8,["modelValue","class"]),l[40]||(l[40]=e("label",{for:"contactNumber"},"Phone Number",-1))])]),e("div",Wl,[e("span",jl,[i(a,{type:"text",id:"contactEmail",modelValue:y.value,"onUpdate:modelValue":l[18]||(l[18]=t=>y.value=t),onBlur:l[19]||(l[19]=t=>v(y.value,"contactEmail")),class:m({"p-invalid":(H=s.value)==null?void 0:H.contactEmail})},null,8,["modelValue","class"]),l[41]||(l[41]=e("label",{for:"contactEmail"},"Email",-1))])]),e("div",Gl,[e("span",Hl,[i(a,{type:"text",id:"contactWeb",modelValue:T.value,"onUpdate:modelValue":l[20]||(l[20]=t=>T.value=t)},null,8,["modelValue"]),l[42]||(l[42]=e("label",{for:"contactWeb"},"Website",-1))])])])]),e("div",Jl,[l[48]||(l[48]=e("h5",null,"Institution Bank Info",-1)),e("div",Kl,[e("div",Ql,[e("span",Xl,[i(d,{id:"bankName",options:A.value,modelValue:N.value,"onUpdate:modelValue":l[21]||(l[21]=t=>N.value=t),optionLabel:"name",onBlur:l[22]||(l[22]=t=>v(N.value,"bankName")),class:m({"p-invalid":(J=s.value)==null?void 0:J.bankName})},null,8,["options","modelValue","class"]),l[44]||(l[44]=e("label",{for:"bankName"},"Bank",-1))])]),e("div",Yl,[e("span",Zl,[i(a,{type:"text",id:"acctName",modelValue:g.value,"onUpdate:modelValue":l[23]||(l[23]=t=>g.value=t),onBlur:l[24]||(l[24]=t=>v(g.value,"acctName")),class:m({"p-invalid":(K=s.value)==null?void 0:K.acctName})},null,8,["modelValue","class"]),l[45]||(l[45]=e("label",{for:"acctName"},"Account Name",-1))])]),e("div",hl,[e("span",le,[i(a,{type:"text",id:"acctNumber",modelValue:F.value,"onUpdate:modelValue":l[25]||(l[25]=t=>F.value=t),onBlur:l[26]||(l[26]=t=>v(F.value,"acctNumber")),class:m({"p-invalid":(Q=s.value)==null?void 0:Q.acctNumber})},null,8,["modelValue","class"]),l[46]||(l[46]=e("label",{for:"acctNumber"},"Account Number",-1))])]),l[47]||(l[47]=e("div",{class:"field col-12 md:col-8"},null,-1)),e("div",ee,[i(il,{onClick:el,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{oe as default};
