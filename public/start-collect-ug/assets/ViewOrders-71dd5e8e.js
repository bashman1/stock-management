import{k,r as u,l as T,m as q,o as B,b as _,p as V,c as x,d as E,e as o,h as t,i as s,j as r,t as l,f as c,q as I,C as M}from"./index-066f2b3f.js";const P={className:"card"},H={style:{padding:"20px"}},K={class:"grid p-fluid"},L={class:"field col-12 md:col-12"},O={class:"field col-6 md:col-6"},$={class:"p-float-label"},j={for:"unitName"},A={class:"field col-6 md:col-6"},Q={class:"p-float-label"},U={for:"unitName"},z={class:"field col-6 md:col-6"},F={class:"p-float-label"},G={for:"unitName"},J={class:"field col-6 md:col-6"},W={class:"p-float-label"},X={for:"unitName"},Y={class:"grid p-fluid"},oe={__name:"ViewOrders",setup(Z){const p=k(),y=u(null),h=u(!1),f=u(null),n=new M,m=u({});T(),q();const w=()=>{n.genericRequest("get-orders","get",!0,{}).then(a=>{a.status?y.value=a.data:n.showError(p,a.message)})},g=a=>{N(!0),m.value=a,D(a==null?void 0:a.id)},D=a=>{n.genericRequest("get-orders-details/"+a,"get",!0,{}).then(d=>{d.status?f.value=d.data:n.showError(p,d.message)})},N=a=>{h.value=a},S=()=>{n.genericRequest("print-receipt","post",!0,{}).then(a=>{a.status?f.value=a.data:n.showError(p,a.message)})};return B(()=>{w()}),(a,d)=>{const i=_("Column"),v=_("Button"),b=_("DataTable"),C=_("Dialog"),R=V("tooltip");return x(),E("div",P,[d[3]||(d[3]=o("h5",null,"View Sales",-1)),t(b,{value:y.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:s(()=>[t(i,{field:"Ref No.",header:"Ref No.",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.ref_no),1)]),_:1}),t(i,{field:"Receipt No.",header:"Receipt No.",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.receipt_no),1)]),_:1}),t(i,{field:"name",header:"Item Count",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.item_count),1)]),_:1}),t(i,{field:"name",header:"Amount Paid",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.amount_paid)),1)]),_:1}),t(i,{field:"name",header:"Cost",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.total)),1)]),_:1}),t(i,{field:"name",header:"Change",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.amount_paid-e.total)),1)]),_:1}),t(i,{header:"Discount",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.discount)),1)]),_:1}),t(i,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.payment_status),1)]),_:1}),t(i,{header:"Date",style:{"max-width":"10rem"}},{body:s(({data:e})=>[r(l(e.created_at),1)]),_:1}),t(i,{headerStyle:"min-width:10rem;"},{body:s(({data:e})=>[I(t(v,{icon:"pi pi-eye",class:"p-button-primary mr-2",onClick:ee=>g(e)},null,8,["onClick"]),[[R,"View sell details"]])]),_:1})]),_:1},8,["value"]),t(C,{header:"Sales Details",visible:h.value,"onUpdate:visible":d[1]||(d[1]=e=>h.value=e),style:{width:"33vw"},modal:!0,class:"p-fluid"},{footer:s(()=>[t(v,{label:"Cancel",onClick:d[0]||(d[0]=e=>a.toggleTypeModal(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),t(v,{onClick:S,icon:"pi pi-print",label:"Print",class:"p-button-outlined mr-2 mb-2"})]),default:s(()=>[o("p",H,[o("div",K,[o("div",L,[o("h1",null,l(m.value.institution_name),1)]),o("div",O,[o("span",$,[o("label",j,"Ref No.: "+l(m.value.ref_no),1)])]),o("div",A,[o("span",Q,[o("label",U,"Receipt No.: "+l(m.value.receipt_no),1)])]),o("div",z,[o("span",F,[o("label",G,"Item Count: "+l(m.value.item_count),1)])]),o("div",J,[o("span",W,[o("label",X,"Total: "+l(c(n).commaSeparator(m.value.total)),1)])]),d[2]||(d[2]=o("hr",null,null,-1))]),o("div",Y,[t(b,{value:f.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:s(()=>[t(i,{field:"Ref No.",header:"Item",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.name),1)]),_:1}),t(i,{field:"Receipt No.",header:"Price",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.price)),1)]),_:1}),t(i,{field:"name",header:"Qty",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.qty),1)]),_:1}),t(i,{field:"name",header:"Sub Total",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.price*e.qty)),1)]),_:1})]),_:1},8,["value"])])])]),_:1},8,["visible"])])}}};export{oe as default};
