import{m as Q,k as W,l as X,r as b,o as Y,b as p,p as Z,c as x,d as w,e,j as a,t as l,F as ee,s as se,h as n,i as d,q as $,C as te}from"./index-4428033b.js";const le={class:"grid"},ae={class:"col-12 md:col-6"},oe={class:"card p-fluid"},ne=e("h5",{class:"text-500"},"Institution Details",-1),ie={class:"field"},ce={for:"name1",class:"text-900"},de={class:"field"},re={for:"name1",class:"text-900"},_e={class:"field"},ue={for:"name1",class:"text-900"},me={class:"field"},he={for:"name1",class:"text-900"},ve={class:"field"},fe={for:"name1",class:"text-900"},pe={class:"field"},be={for:"name1",class:"text-900"},ge={class:"field"},ye={for:"name1",class:"text-900"},xe={class:"field"},we={for:"name1",class:"text-900"},Be={class:"field"},Ce={for:"name1",class:"text-900"},De={class:"card p-fluid"},ke=e("h5",{class:"text-500"},"Address",-1),Se={class:"field"},Ne={class:"text-900",for:"name1"},Te={class:"field"},Ae={class:"text-900",for:"name1"},Re={class:"col-12 md:col-6"},Ue={class:"card p-fluid"},Ve=e("h5",{class:"text-500"},"Branches",-1),Ee={class:"text-900",for:"name1"},Me={class:"card"},Ie=e("h5",{class:"text-500"},"Bank Info",-1),Pe={class:"field"},qe={class:"text-900",for:"name1"},Le={class:"field"},$e={class:"text-900",for:"name1"},Fe={class:"field"},je={class:"text-900",for:"name1"},ze={class:"col-12 md:col-12"},He={class:"card"},Ke=e("h5",{class:"text-500"},"Users",-1),Oe={style:{"padding-top":"20px"}},Ge={class:"grid p-fluid"},Je={class:"field col-12 md:col-12"},Qe={class:"p-float-label"},We=e("label",{for:"subCatCat"},"Select Branches",-1),Ze={__name:"InstitutionProfile",setup(Xe){const F=Q(),h=W(),r=new te,j=X(),t=b(null),_=b([]),v=b({}),f=b(!1),z=()=>{let i={institutionId:F.params.id,status:"Active"};r.genericRequest("get-institution-profile","post",!0,i).then(o=>{o.status?t.value=o==null?void 0:o.data[0]:r.showError(h,o.message)})},H=i=>{r.redirect(j,"/user-profile/"+(i==null?void 0:i.id))},K=i=>{G(i.id),v.value=i,f.value=!0,_.value=[]},O=()=>{if(!_.value||_.value.length===0){r.showError(h,"Please Select at least a branch");return}let i={user:v.value.id,branches:_.value};r.genericRequest("assign-user-branches","post",!0,i).then(o=>{o.status?(r.showSuccess(h,o.message),f.value=!1):r.showError(h,o.message)})},G=i=>{let o={status:"Active",user_id:i};r.genericRequest("get-assigned-user-branches","post",!0,o).then(c=>{var u;c.status?_.value=(u=t==null?void 0:t.value)==null?void 0:u.branches.filter(g=>c==null?void 0:c.data.some(y=>y.branch_id===g.id)):r.showError(h,c.message)})};return Y(()=>{z()}),(i,o)=>{var C,D,k,S,N,T,A,R,U,V,E,M,I,P,q,L;const c=p("Column"),u=p("Button"),g=p("DataTable"),y=p("MultiSelect"),J=p("Dialog"),B=Z("tooltip");return x(),w("div",le,[e("div",ae,[e("div",oe,[ne,e("div",ie,[e("label",ce,[a("Name: "),e("span",null,l((C=t.value)==null?void 0:C.name),1)])]),e("div",de,[e("label",re,[a("Ref No.: "),e("span",null,l((D=t.value)==null?void 0:D.ref_no),1)])]),e("div",_e,[e("label",ue,[a("Type: "),e("span",null,l((k=t.value)==null?void 0:k.type_name),1)])]),e("div",me,[e("label",he,[a("Status: "),e("span",null,l((S=t.value)==null?void 0:S.status),1)])]),e("div",ve,[e("label",fe,[a("P.O Box: "),e("span",null,l((N=t.value)==null?void 0:N.p_o_box),1)])]),e("div",pe,[e("label",be,[a("Start Date: "),e("span",null,l((T=t.value)==null?void 0:T.created_at),1)])]),e("div",ge,[e("label",ye,[a("Tin: "),e("span",null,l((A=t.value)==null?void 0:A.tin),1)])]),e("div",xe,[e("label",we,[a("Ref. No: "),e("span",null,l((R=t.value)==null?void 0:R.ref_no),1)])]),e("div",Be,[e("label",Ce,[a("Description: "),e("span",null,l((U=t.value)==null?void 0:U.description),1)])])]),e("div",De,[ke,e("div",Se,[e("label",Ne,[a("City: "),e("span",null,l((V=t.value)==null?void 0:V.city_name),1)])]),e("div",Te,[e("label",Ae,[a("Address: "),e("span",null,l((E=t.value)==null?void 0:E.address),1)])])])]),e("div",Re,[e("div",Ue,[Ve,(x(!0),w(ee,null,se((M=t.value)==null?void 0:M.branches,(s,m)=>(x(),w("div",{class:"field",key:m},[e("label",Ee,[e("span",null,l(m+1+". "+(s==null?void 0:s.name)+", "+(s==null?void 0:s.address)),1)])]))),128))]),e("div",Me,[Ie,e("div",Pe,[e("label",qe,[a("Bank: "),e("span",null,l((I=t.value)==null?void 0:I.bank_name),1)])]),e("div",Le,[e("label",$e,[a("Name: "),e("span",null,l((P=t.value)==null?void 0:P.acct_name),1)])]),e("div",Fe,[e("label",je,[a("Number: "),e("span",null,l((q=t.value)==null?void 0:q.acct_number),1)])])])]),e("div",ze,[e("div",He,[Ke,n(g,{value:(L=t.value)==null?void 0:L.users,size:"small",paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:d(()=>[n(c,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:d(({data:s})=>[a(l(s.first_name+" "+s.last_name+" "+s.other_name),1)]),_:1}),n(c,{header:"Phone No.",style:{"min-width":"10rem"}},{body:d(({data:s})=>[a(l(s.phone_number),1)]),_:1}),n(c,{header:"Email",style:{"min-width":"12rem"}},{body:d(({data:s})=>[a(l(s.email),1)]),_:1}),n(c,{header:"Branch",style:{"min-width":"10rem"}},{body:d(({data:s})=>[a(l(s.branch),1)]),_:1}),n(c,{header:"Status",style:{"min-width":"10rem"}},{body:d(({data:s})=>[a(l(s.status),1)]),_:1}),n(c,{header:"Date",style:{"min-width":"10rem"}},{body:d(({data:s})=>[a(l(s.created_at),1)]),_:1}),n(c,{headerStyle:"min-width:10rem;"},{body:d(({data:s})=>[$(n(u,{icon:"pi pi-eye",onClick:m=>H(s),class:"p-button-primary mr-2"},null,8,["onClick"]),[[B,"View user details"]]),$(n(u,{icon:"pi pi-arrow-right-arrow-left",onClick:m=>K(s),class:"p-button-success mr-2"},null,8,["onClick"]),[[B,"Assign users branches"]])]),_:1})]),_:1},8,["value"]),n(J,{header:v.value.first_name+" "+v.value.last_name+" "+v.value.other_name,visible:f.value,"onUpdate:visible":o[2]||(o[2]=s=>f.value=s),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:d(()=>[n(u,{label:"Cancel",onClick:o[1]||(o[1]=s=>f.value=!1),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),n(u,{onClick:O,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:d(()=>{var s;return[e("p",Oe,[e("div",Ge,[e("div",Je,[e("span",Qe,[n(y,{id:"multiselect",modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=m=>_.value=m),options:(s=t.value)==null?void 0:s.branches,optionLabel:"name"},null,8,["modelValue","options"]),We])])])])]}),_:1},8,["header","visible"])])])])}}};export{Ze as default};
