import{k,r as u,l as T,m as q,o as B,b as _,p as V,c as x,d as E,h as t,i as s,e as o,j as r,t as l,f as c,q as I,C as M}from"./index-d7a22f28.js";const P={className:"card"},H=o("h5",null,"View Sales",-1),K={style:{padding:"20px"}},L={class:"grid p-fluid"},O={class:"field col-12 md:col-12"},$={class:"field col-6 md:col-6"},j={class:"p-float-label"},A={for:"unitName"},Q={class:"field col-6 md:col-6"},U={class:"p-float-label"},z={for:"unitName"},F={class:"field col-6 md:col-6"},G={class:"p-float-label"},J={for:"unitName"},W={class:"field col-6 md:col-6"},X={class:"p-float-label"},Y={for:"unitName"},Z=o("hr",null,null,-1),ee={class:"grid p-fluid"},se={__name:"ViewOrders",setup(te){const p=k(),y=u(null),h=u(!1),f=u(null),n=new M,m=u({});T(),q();const w=()=>{n.genericRequest("get-orders","get",!0,{}).then(a=>{a.status?y.value=a.data:n.showError(p,a.message)})},g=a=>{N(!0),m.value=a,D(a==null?void 0:a.id)},D=a=>{n.genericRequest("get-orders-details/"+a,"get",!0,{}).then(d=>{d.status?f.value=d.data:n.showError(p,d.message)})},N=a=>{h.value=a},S=()=>{n.genericRequest("print-receipt","post",!0,{}).then(a=>{a.status?f.value=a.data:n.showError(p,a.message)})};return B(()=>{w()}),(a,d)=>{const i=_("Column"),v=_("Button"),b=_("DataTable"),C=_("Dialog"),R=V("tooltip");return x(),E("div",P,[H,t(b,{value:y.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:s(()=>[t(i,{field:"Ref No.",header:"Ref No.",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.ref_no),1)]),_:1}),t(i,{field:"Receipt No.",header:"Receipt No.",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.receipt_no),1)]),_:1}),t(i,{field:"name",header:"Item Count",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.item_count),1)]),_:1}),t(i,{field:"name",header:"Amount Paid",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.amount_paid)),1)]),_:1}),t(i,{field:"name",header:"Cost",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.total)),1)]),_:1}),t(i,{field:"name",header:"Change",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.amount_paid-e.total)),1)]),_:1}),t(i,{header:"Discount",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.discount)),1)]),_:1}),t(i,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.payment_status),1)]),_:1}),t(i,{header:"Date",style:{"max-width":"10rem"}},{body:s(({data:e})=>[r(l(e.created_at),1)]),_:1}),t(i,{headerStyle:"min-width:10rem;"},{body:s(({data:e})=>[I(t(v,{icon:"pi pi-eye",class:"p-button-primary mr-2",onClick:oe=>g(e)},null,8,["onClick"]),[[R,"View sell details"]])]),_:1})]),_:1},8,["value"]),t(C,{header:"Sales Details",visible:h.value,"onUpdate:visible":d[1]||(d[1]=e=>h.value=e),style:{width:"33vw"},modal:!0,class:"p-fluid"},{footer:s(()=>[t(v,{label:"Cancel",onClick:d[0]||(d[0]=e=>a.toggleTypeModal(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),t(v,{onClick:S,icon:"pi pi-print",label:"Print",class:"p-button-outlined mr-2 mb-2"})]),default:s(()=>[o("p",K,[o("div",L,[o("div",O,[o("h1",null,l(m.value.institution_name),1)]),o("div",$,[o("span",j,[o("label",A,"Ref No.: "+l(m.value.ref_no),1)])]),o("div",Q,[o("span",U,[o("label",z,"Receipt No.: "+l(m.value.receipt_no),1)])]),o("div",F,[o("span",G,[o("label",J,"Item Count: "+l(m.value.item_count),1)])]),o("div",W,[o("span",X,[o("label",Y,"Total: "+l(c(n).commaSeparator(m.value.total)),1)])]),Z]),o("div",ee,[t(b,{value:f.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:s(()=>[t(i,{field:"Ref No.",header:"Item",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.name),1)]),_:1}),t(i,{field:"Receipt No.",header:"Price",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.price)),1)]),_:1}),t(i,{field:"name",header:"Qty",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(e.qty),1)]),_:1}),t(i,{field:"name",header:"Sub Total",style:{"min-width":"10rem"}},{body:s(({data:e})=>[r(l(c(n).commaSeparator(e.price*e.qty)),1)]),_:1})]),_:1},8,["value"])])])]),_:1},8,["visible"])])}}};export{se as default};
