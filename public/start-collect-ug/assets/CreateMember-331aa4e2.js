import{k as j,l as H,r as o,o as J,b as v,c as E,d as O,e,h as s,g as K,n as P,C as Q}from"./index-9434943a.js";const W={class:"card"},X={class:"grid p-fluid mt-3"},Y={key:0,class:"field col-12 md:col-4"},Z={class:"p-float-label"},h={class:"field col-12 md:col-4"},ll={class:"p-float-label"},el={class:"field col-12 md:col-4"},tl={class:"p-float-label"},ol={class:"field col-12 md:col-4"},sl={class:"p-float-label"},al={class:"field col-12 md:col-4"},nl={class:"p-float-label"},dl={class:"field col-12 md:col-4"},ul={class:"p-float-label"},il={class:"field col-12 md:col-4"},ml={class:"p-float-label"},rl={class:"field col-12 md:col-4"},vl={class:"p-float-label"},pl={class:"field col-12 md:col-12"},fl={class:"p-float-label"},bl={class:"field col-12 md:col-4"},cl={class:"p-float-label"},Vl={class:"field col-12 md:col-4"},_l={class:"p-float-label"},gl={class:"field col-12 md:col-4"},xl={class:"p-float-label"},Cl={class:"field col-12 md:col-12"},Nl={class:"p-float-label"},yl={class:"field col-12 md:col-4"},Il={__name:"CreateMember",setup(Ul){const U=j(),a=new Q,R=H(),u=o(null),i=o(null),p=o(null),f=o(null),b=o(null),c=o(null),V=o(null),_=o(null),g=o(null),x=o(null),C=o(null),N=o(null),I=o(null),B=o(null),D=o(null),F=o(null),m=o({}),q=o([{label:"Male",value:"Male"},{label:"Female",value:"Female"}]),A=()=>{var y,r;if(m.value.fName=a.validateFormField(u.value),m.value.lName=a.validateFormField(i.value),a.validateRequiredFields(m.value)){a.showError(U,"Please fill in the missing field");return}let l={first_name:u==null?void 0:u.value,last_name:i==null?void 0:i.value,other_name:p==null?void 0:p.value,email:f==null?void 0:f.value,phone_number:b==null?void 0:b.value,date_of_birth:c==null?void 0:c.value,gender:(y=V==null?void 0:V.value)==null?void 0:y.value,address:_==null?void 0:_.value,city_id:(r=g==null?void 0:g.value)==null?void 0:r.id,street:x==null?void 0:x.value,p_o_box:C==null?void 0:C.value,description:N==null?void 0:N.value,status:"Active"};a.genericRequest("create-member","post",!0,l).then(n=>{n.status?(a.showSuccess(U,n.message),a.redirect(R,"/view-members")):a.showError(U,n.message)})},L=()=>{a.genericRequest("get-city-county-id/1","get",!0,{}).then(d=>{d.status&&(I.value=d.data)})},$=()=>{var d;((d=B.value)==null?void 0:d.user_type)=="Admin"&&a.genericRequest("get-institutions","get",!0,{}).then(l=>{l.status&&(D.value=l.data)})},w=(d,l)=>{m.value[l]=a.validateFormField(d)};return J(()=>{B.value=a.getStorage().userData,L(),$()}),(d,l)=>{var T,M,k;const y=v("Toast"),r=v("Dropdown"),n=v("InputText"),z=v("Calendar"),S=v("Textarea"),G=v("Button");return E(),O("div",null,[e("div",W,[l[29]||(l[29]=e("h5",null,"Create Members",-1)),e("div",X,[s(y),((T=B.value)==null?void 0:T.user_type)=="Admin"?(E(),O("div",Y,[e("span",Z,[s(r,{id:"institution",onChange:d.onInstitutionChange,options:D.value,modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=t=>F.value=t),optionLabel:"name"},null,8,["onChange","options","modelValue"]),l[15]||(l[15]=e("label",{for:"institution"},"Institution",-1))])])):K("",!0),e("div",h,[e("span",ll,[s(n,{type:"text",id:"firstName",modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=t=>u.value=t),onBlur:l[2]||(l[2]=t=>w(u.value,"fName")),class:P({"p-invalid":(M=m.value)==null?void 0:M.fName})},null,8,["modelValue","class"]),l[16]||(l[16]=e("label",{for:"firstName"},"First Name",-1))])]),e("div",el,[e("span",tl,[s(n,{type:"text",id:"lastName",modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=t=>i.value=t),onBlur:l[4]||(l[4]=t=>w(i.value,"lName")),class:P({"p-invalid":(k=m.value)==null?void 0:k.lName})},null,8,["modelValue","class"]),l[17]||(l[17]=e("label",{for:"lastName"},"Last Name",-1))])]),e("div",ol,[e("span",sl,[s(n,{type:"text",id:"otherName",modelValue:p.value,"onUpdate:modelValue":l[5]||(l[5]=t=>p.value=t)},null,8,["modelValue"]),l[18]||(l[18]=e("label",{for:"otherName"},"Other Names",-1))])]),e("div",al,[e("span",nl,[s(n,{type:"text",id:"email",modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=t=>f.value=t)},null,8,["modelValue"]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",dl,[e("span",ul,[s(n,{type:"text",id:"phoneNumber",modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=t=>b.value=t)},null,8,["modelValue"]),l[20]||(l[20]=e("label",{for:"phoneNumber"},"Phone Number",-1))])]),e("div",il,[e("span",ml,[s(z,{inputId:"dob",modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=t=>c.value=t)},null,8,["modelValue"]),l[21]||(l[21]=e("label",{for:"dob"},"Date Of Birth",-1))])]),e("div",rl,[e("span",vl,[s(r,{id:"gender",options:q.value,modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=t=>V.value=t),optionLabel:"label"},null,8,["options","modelValue"]),l[22]||(l[22]=e("label",{for:"gender"},"Gender",-1))])]),e("div",pl,[e("span",fl,[s(S,{inputId:"textarea",rows:"3",cols:"30",modelValue:_.value,"onUpdate:modelValue":l[10]||(l[10]=t=>_.value=t)},null,8,["modelValue"]),l[23]||(l[23]=e("label",{for:"textarea"},"Address",-1))])]),e("div",bl,[e("span",cl,[s(r,{id:"instCity",options:I.value,modelValue:g.value,"onUpdate:modelValue":l[11]||(l[11]=t=>g.value=t),optionLabel:"name"},null,8,["options","modelValue"]),l[24]||(l[24]=e("label",{for:"instCity"},"City",-1))])]),e("div",Vl,[e("span",_l,[s(n,{type:"text",id:"instStreet",modelValue:x.value,"onUpdate:modelValue":l[12]||(l[12]=t=>x.value=t)},null,8,["modelValue"]),l[25]||(l[25]=e("label",{for:"instStreet"},"Street",-1))])]),e("div",gl,[e("span",xl,[s(n,{type:"text",id:"instPOBox",modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=t=>C.value=t)},null,8,["modelValue"]),l[26]||(l[26]=e("label",{for:"instPOBox"},"P.O Box",-1))])]),e("div",Cl,[e("span",Nl,[s(S,{inputId:"instDescription",rows:"3",cols:"30",modelValue:N.value,"onUpdate:modelValue":l[14]||(l[14]=t=>N.value=t)},null,8,["modelValue"]),l[27]||(l[27]=e("label",{for:"instDescription"},"More Info",-1))])]),l[28]||(l[28]=e("div",{class:"field col-12 md:col-8"},null,-1)),e("div",yl,[s(G,{onClick:A,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{Il as default};
