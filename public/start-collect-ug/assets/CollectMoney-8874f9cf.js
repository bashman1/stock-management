import{k as W,l as X,r as n,o as Y,b,c as i,d as r,e as t,h as a,i as C,g as v,n as T,j as F,t as M,C as Z}from"./index-066f2b3f.js";const ee={className:"card"},le={class:"grid p-fluid mt-3"},te={class:"col-12 md:col-12"},ae={class:"p-inputgroup"},oe={key:0,class:"field col-12 md:col-12"},se={key:1,class:"field col-12 md:col-4"},ne={class:"p-float-label"},ue={key:2,class:"field col-12 md:col-4"},de={class:"p-float-label"},ie={key:3,class:"field col-12 md:col-4"},re={class:"p-float-label"},me={key:4,class:"field col-12 md:col-4"},ve={class:"p-float-label"},ce={key:5,class:"field col-12 md:col-4"},pe={class:"p-float-label"},be={key:6,class:"field col-12 md:col-4"},_e={class:"p-float-label"},ye={key:7,class:"field col-12 md:col-12"},fe={class:"p-float-label"},Ve={key:8,class:"field col-12 md:col-2"},Ce={key:9,class:"field col-12 md:col-4"},we={__name:"CollectMoney",setup(ke){const B=W(),o=new Z,q=X(),y=n(null),f=n(null),V=n(null),x=n(null),k=n(null),m=n(null),D=n(null),N=n(null),S=n(null),h=n(null),u=n(null),A=n([]),d=n({}),K=s=>{let e={status:"Active",searchKey:s};o.genericRequest("get-members-by-institution","post",!0,e).then(_=>{_.status&&(S.value=_.data)})},L=()=>{let s={status:"Active"};o.genericRequest("get-transaction-codes","post",!0,s).then(e=>{e.status&&(A.value=e.data)})},P=()=>{K(y.value)},j=s=>{y.value=null,u.value=s,h.value=s.id,f.value=s.name,V.value=s.member_number,x.value=s.phone_number},z=()=>{y.value=null,u.value=null,S.value=null},H=()=>{var _,c;if(d.value.mName=o.validateFormField(f.value),d.value.mNumber=o.validateFormField(V.value),d.value.tranAmt=o.validateFormField(k.value),d.value.tType=o.validateFormField(m.value),d.value.description=o.validateFormField(N.value),o.validateRequiredFields(d.value)){o.showError(B,"Please fill in the missing field");return}let e={name:f.value,member_number:V.value,member_contact:x.value,amount:k.value,tran_type:(_=m==null?void 0:m.value)==null?void 0:_.tran_code,tran_date:D.value?D.value:new Date,description:N.value,member_id:h.value,transaction_type:(c=m==null?void 0:m.value)==null?void 0:c.tran_code};o.genericRequest("collect-deposit","post",!0,e).then(p=>{p.status?(o.showSuccess(B,p.message),o.redirect(q,"/view-collected-money")):o.showError(B,p.message)})},g=(s,e)=>{d.value[e]=o.validateFormField(s)};return Y(()=>{L()}),(s,e)=>{var U,$,E,I,R;const _=b("Toast"),c=b("InputText"),p=b("Button"),w=b("Column"),G=b("DataTable"),J=b("Dropdown"),O=b("Calendar"),Q=b("Textarea");return i(),r("div",ee,[e[21]||(e[21]=t("h5",null,"Collect Money",-1)),a(_),t("div",le,[t("div",te,[t("div",ae,[a(c,{placeholder:"Search by Member name or number",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l)},null,8,["modelValue"]),a(p,{onClick:P,disabled:y.value==null,label:"Search"},null,8,["disabled"])])]),u.value?v("",!0):(i(),r("div",oe,[a(G,{value:S.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:C(()=>[a(w,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:C(({data:l})=>[F(M(l.name),1)]),_:1}),a(w,{header:"Member No.",style:{"min-width":"10rem"}},{body:C(({data:l})=>[F(M(l.member_number),1)]),_:1}),a(w,{header:"Phone Number",style:{"min-width":"12rem"}},{body:C(({data:l})=>[F(M(l.phone_number),1)]),_:1}),a(w,{header:"Alt. Member No.",style:{"min-width":"10rem"}},{body:C(({data:l})=>[F(M(l.alt_member_number),1)]),_:1}),a(w,{header:"Select",headerStyle:"min-width:5rem;"},{body:C(({data:l})=>[a(p,{icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:Ne=>j(l)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])),u.value?(i(),r("div",se,[t("span",ne,[a(c,{type:"text",id:"name",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),disabled:"true",onBlur:e[2]||(e[2]=l=>g(f.value,"mName")),class:T({"p-invalid":(U=d.value)==null?void 0:U.mName})},null,8,["modelValue","class"]),e[13]||(e[13]=t("label",{for:"name"},"Member Name",-1))])])):v("",!0),u.value?(i(),r("div",ue,[t("span",de,[a(c,{type:"text",id:"number",modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=l=>V.value=l),disabled:"true",onBlur:e[4]||(e[4]=l=>g(V.value,"mNumber")),class:T({"p-invalid":($=d.value)==null?void 0:$.mNumber})},null,8,["modelValue","class"]),e[14]||(e[14]=t("label",{for:"number"},"Member Number",-1))])])):v("",!0),u.value?(i(),r("div",ie,[t("span",re,[a(c,{type:"text",id:"contact",modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=l=>x.value=l),disabled:"true"},null,8,["modelValue"]),e[15]||(e[15]=t("label",{for:"contact"},"Member Contact",-1))])])):v("",!0),u.value?(i(),r("div",me,[t("span",ve,[a(c,{type:"text",id:"amount",modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=l=>k.value=l),onBlur:e[7]||(e[7]=l=>g(k.value,"tranAmt")),class:T({"p-invalid":(E=d.value)==null?void 0:E.tranAmt})},null,8,["modelValue","class"]),e[16]||(e[16]=t("label",{for:"amount"},"Amount",-1))])])):v("",!0),u.value?(i(),r("div",ce,[t("span",pe,[a(J,{id:"transactionType",onBlur:e[8]||(e[8]=l=>g(m.value,"tType")),class:T({"p-invalid":(I=d.value)==null?void 0:I.tType}),options:A.value,modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=l=>m.value=l),optionLabel:"tran_description"},null,8,["class","options","modelValue"]),e[17]||(e[17]=t("label",{for:"transactionType"},"Transact type",-1))])])):v("",!0),u.value?(i(),r("div",be,[t("span",_e,[a(O,{id:"date",modelValue:D.value,"onUpdate:modelValue":e[10]||(e[10]=l=>D.value=l)},null,8,["modelValue"]),e[18]||(e[18]=t("label",{for:"date"},"Date",-1))])])):v("",!0),u.value?(i(),r("div",ye,[t("span",fe,[a(Q,{id:"textarea",rows:"3",cols:"30",onBlur:e[11]||(e[11]=l=>g(N.value,"description")),class:T({"p-invalid":(R=d.value)==null?void 0:R.description}),modelValue:N.value,"onUpdate:modelValue":e[12]||(e[12]=l=>N.value=l)},null,8,["class","modelValue"]),e[19]||(e[19]=t("label",{for:"textarea"},"Description",-1))])])):v("",!0),e[20]||(e[20]=t("div",{class:"field col-12 md:col-6"},null,-1)),u.value?(i(),r("div",Ve,[a(p,{onClick:z,label:"CANCEL",class:"p-button-outlined p-button-danger mr-2 mb-2"})])):v("",!0),u.value?(i(),r("div",Ce,[a(p,{onClick:H,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])):v("",!0)])])}}};export{we as default};
