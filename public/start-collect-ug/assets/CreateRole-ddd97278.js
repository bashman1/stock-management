import{k as N,l as S,r as i,o as U,b as p,c as T,d as w,e as l,h as v,n as y,g as E,C as q}from"./index-066f2b3f.js";const A={class:"card"},L={class:"grid p-fluid mt-3"},M={class:"field col-12 md:col-4"},$={class:"p-float-label"},z={class:"field col-12 md:col-4"},O={class:"p-float-label"},P={key:0,class:"field col-12 md:col-4"},j={class:"p-float-label"},G={class:"field col-12 md:col-12"},H={class:"p-float-label"},J={class:"field col-12 md:col-4"},W={__name:"CreateRole",setup(K){const _=N(),o=new q,C=S(),a=i(null),t=i(null),b=i(null),s=i(null),m=i(null),u=i({}),R=i([{label:"Admin Role",value:"Admin"},{label:"Institution Role",value:"Institution"}]),x=()=>{var c,f;if(u.value.name=o.validateFormField(a.value),u.value.type=o.validateFormField(t.value),o.validateRequiredFields(u.value)){o.showError(_,"Please fill in the missing field");return}let e={name:a==null?void 0:a.value,type:(c=t==null?void 0:t.value)==null?void 0:c.value,institution_id:s==null?void 0:s.value,description:m==null?void 0:m.value,institution_id:s.value!=null?s==null?void 0:s.value.id:null,role_type:(f=t==null?void 0:t.value)==null?void 0:f.value,status:"Active"};o.genericRequest("crate-role","post",!0,e).then(r=>{r.status?(o.showSuccess(_,r.message),o.redirect(C,"/view-roles")):o.showError(_,r.message)})},V=(d,e)=>{u.value[e]=o.validateFormField(d)},F=()=>{o.genericRequest("get-institutions","get",!0,{}).then(d=>{d.status&&(b.value=d.data)})};return U(()=>{F()}),(d,e)=>{var g,I,B;const c=p("Toast"),f=p("InputText"),r=p("Dropdown"),k=p("Textarea"),D=p("Button");return T(),w("div",null,[l("div",A,[e[11]||(e[11]=l("h5",null,"Create Role",-1)),l("div",L,[v(c),l("div",M,[l("span",$,[v(f,{type:"text",id:"name",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),onBlur:e[1]||(e[1]=n=>V(a.value,"name")),class:y({"p-invalid":(g=u.value)==null?void 0:g.name})},null,8,["modelValue","class"]),e[6]||(e[6]=l("label",{for:"firstName"},"Name",-1))])]),l("div",z,[l("span",O,[v(r,{id:"type",options:R.value,modelValue:t.value,"onUpdate:modelValue":e[2]||(e[2]=n=>t.value=n),optionLabel:"label",onBlur:e[3]||(e[3]=n=>V(t.value,"type")),class:y({"p-invalid":(I=u.value)==null?void 0:I.type})},null,8,["options","modelValue","class"]),e[7]||(e[7]=l("label",{for:"type"},"Type",-1))])]),((B=t.value)==null?void 0:B.value)=="Institution"?(T(),w("div",P,[l("span",j,[v(r,{id:"institution",options:b.value,modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value=n),optionLabel:"name"},null,8,["options","modelValue"]),e[8]||(e[8]=l("label",{for:"institution"},"Institution",-1))])])):E("",!0),l("div",G,[l("span",H,[v(k,{inputId:"description",rows:"3",cols:"30",modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=n=>m.value=n)},null,8,["modelValue"]),e[9]||(e[9]=l("label",{for:"description"},"Description",-1))])]),e[10]||(e[10]=l("div",{class:"field col-12 md:col-8"},null,-1)),l("div",J,[v(D,{onClick:x,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{W as default};
