import{k as J,l as Q,r as s,o as W,b as v,c as i,d as r,h as t,e as a,i as f,g as m,n as k,j as g,t as x,C as X}from"./index-b5c7fff2.js";const Z={className:"card"},ee=a("h5",null,"Collect Money",-1),le={class:"grid p-fluid mt-3"},te={class:"col-12 md:col-12"},ae={class:"p-inputgroup"},oe={key:0,class:"field col-12 md:col-12"},se={key:1,class:"field col-12 md:col-4"},ne={class:"p-float-label"},ue=a("label",{for:"name"},"Member Name",-1),de={key:2,class:"field col-12 md:col-4"},ie={class:"p-float-label"},re=a("label",{for:"number"},"Member Number",-1),me={key:3,class:"field col-12 md:col-4"},ce={class:"p-float-label"},ve=a("label",{for:"contact"},"Member Contact",-1),pe={key:4,class:"field col-12 md:col-4"},be={class:"p-float-label"},_e=a("label",{for:"amount"},"Amount",-1),ye={key:5,class:"field col-12 md:col-4"},fe={class:"p-float-label"},he=a("label",{for:"transactionType"},"Transact type",-1),Ve={key:6,class:"field col-12 md:col-4"},Ce={class:"p-float-label"},Ne=a("label",{for:"date"},"Date",-1),Te={key:7,class:"field col-12 md:col-12"},ke={class:"p-float-label"},we=a("label",{for:"textarea"},"Description",-1),Se=a("div",{class:"field col-12 md:col-6"},null,-1),De={key:8,class:"field col-12 md:col-2"},ge={key:9,class:"field col-12 md:col-4"},Fe={__name:"CollectMoney",setup(xe){const M=J(),o=new X,P=Q(),p=s(null),b=s(null),_=s(null),w=s(null),h=s(null),y=s(null),S=s(null),V=s(null),A=s(null),F=s(null),n=s(null),$=s([{label:"Cash Deposit",value:"CASH_DEPOSIT"},{label:"Shares Purchase",value:"SHARES_PURCHASE"},{label:"Loan Repayment",value:"LOAN_REPAYMENT"}]),u=s({}),L=d=>{let e={status:"Active",searchKey:d};o.genericRequest("get-members-by-institution","post",!0,e).then(c=>{c.status&&(A.value=c.data)})},H=()=>{L(p.value)},q=d=>{p.value=null,n.value=d,F.value=d.id,b.value=d.name,_.value=d.member_number,w.value=d.phone_number},K=()=>{p.value=null,n.value=null,A.value=null},O=()=>{if(u.value.mName=o.validateFormField(b.value),u.value.mNumber=o.validateFormField(_.value),u.value.tranAmt=o.validateFormField(h.value),u.value.tType=o.validateFormField(y.value),u.value.description=o.validateFormField(V.value),o.validateRequiredFields(u.value)){o.showError(M,"Please fill in the missing field");return}let e={name:b.value,member_number:_.value,member_contact:w.value,amount:h.value,tran_type:y.value.value,tran_date:S.value?S.value:new Date,description:V.value,member_id:F.value,transaction_type:y.value.value};o.genericRequest("collect-deposit","post",!0,e).then(c=>{c.status?(o.showSuccess(M,c.message),o.redirect(P,"/view-collected-money")):o.showError(M,c.message)})},C=(d,e)=>{u.value[e]=o.validateFormField(d)};return W(()=>{}),(d,e)=>{var B,E,U,R,I;const c=v("Toast"),N=v("InputText"),D=v("Button"),T=v("Column"),j=v("DataTable"),z=v("Dropdown"),Y=v("Calendar"),G=v("Textarea");return i(),r("div",Z,[ee,t(c),a("div",le,[a("div",te,[a("div",ae,[t(N,{placeholder:"Search by Member name or number",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l)},null,8,["modelValue"]),t(D,{onClick:H,disabled:p.value==null,label:"Search"},null,8,["disabled"])])]),n.value?m("",!0):(i(),r("div",oe,[t(j,{value:A.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:f(()=>[t(T,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:f(({data:l})=>[g(x(l.name),1)]),_:1}),t(T,{header:"Member No.",style:{"min-width":"10rem"}},{body:f(({data:l})=>[g(x(l.member_number),1)]),_:1}),t(T,{header:"Phone Number",style:{"min-width":"12rem"}},{body:f(({data:l})=>[g(x(l.phone_number),1)]),_:1}),t(T,{header:"Alt. Member No.",style:{"min-width":"10rem"}},{body:f(({data:l})=>[g(x(l.alt_member_number),1)]),_:1}),t(T,{header:"Select",headerStyle:"min-width:5rem;"},{body:f(({data:l})=>[t(D,{icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:Me=>q(l)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])),n.value?(i(),r("div",se,[a("span",ne,[t(N,{type:"text",id:"name",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),disabled:"true",onBlur:e[2]||(e[2]=l=>C(b.value,"mName")),class:k({"p-invalid":(B=u.value)==null?void 0:B.mName})},null,8,["modelValue","class"]),ue])])):m("",!0),n.value?(i(),r("div",de,[a("span",ie,[t(N,{type:"text",id:"number",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),disabled:"true",onBlur:e[4]||(e[4]=l=>C(_.value,"mNumber")),class:k({"p-invalid":(E=u.value)==null?void 0:E.mNumber})},null,8,["modelValue","class"]),re])])):m("",!0),n.value?(i(),r("div",me,[a("span",ce,[t(N,{type:"text",id:"contact",modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=l=>w.value=l),disabled:"true"},null,8,["modelValue"]),ve])])):m("",!0),n.value?(i(),r("div",pe,[a("span",be,[t(N,{type:"text",id:"amount",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=l=>h.value=l),onBlur:e[7]||(e[7]=l=>C(h.value,"tranAmt")),class:k({"p-invalid":(U=u.value)==null?void 0:U.tranAmt})},null,8,["modelValue","class"]),_e])])):m("",!0),n.value?(i(),r("div",ye,[a("span",fe,[t(z,{id:"transactionType",onBlur:e[8]||(e[8]=l=>C(y.value,"tType")),class:k({"p-invalid":(R=u.value)==null?void 0:R.tType}),options:$.value,modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=l=>y.value=l),optionLabel:"label"},null,8,["class","options","modelValue"]),he])])):m("",!0),n.value?(i(),r("div",Ve,[a("span",Ce,[t(Y,{id:"date",modelValue:S.value,"onUpdate:modelValue":e[10]||(e[10]=l=>S.value=l)},null,8,["modelValue"]),Ne])])):m("",!0),n.value?(i(),r("div",Te,[a("span",ke,[t(G,{id:"textarea",rows:"3",cols:"30",onBlur:e[11]||(e[11]=l=>C(V.value,"description")),class:k({"p-invalid":(I=u.value)==null?void 0:I.description}),modelValue:V.value,"onUpdate:modelValue":e[12]||(e[12]=l=>V.value=l)},null,8,["class","modelValue"]),we])])):m("",!0),Se,n.value?(i(),r("div",De,[t(D,{onClick:K,label:"CANCEL",class:"p-button-outlined p-button-danger mr-2 mb-2"})])):m("",!0),n.value?(i(),r("div",ge,[t(D,{onClick:O,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])):m("",!0)])])}}};export{Fe as default};
