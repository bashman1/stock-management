import{m as Z,k as ss,l as ls,r as v,o as es,b as B,c as ts,d as os,e as l,j as o,t as a,h as f,n as y,C as as}from"./index-9434943a.js";const ds={class:"grid"},ns={class:"col-12 md:col-6"},is={class:"card p-fluid"},rs={class:"field"},us={for:"name1",class:"text-900"},vs={class:"field"},cs={for:"name1",class:"text-900"},ms={class:"field"},fs={for:"name1",class:"text-900"},_s={class:"field"},ps={for:"name1",class:"text-900"},ws={class:"field"},bs={for:"name1",class:"text-900"},gs={class:"field"},Ps={for:"name1",class:"text-900"},hs={class:"field"},xs={for:"name1",class:"text-900"},Bs={class:"field"},ys={for:"name1",class:"text-900"},Vs={class:"field"},Ss={for:"name1",class:"text-900"},Cs={class:"field"},Ds={for:"name1",class:"text-900"},Us={class:"field"},ks={for:"name1",class:"text-900"},Rs={class:"field"},Es={for:"name1",class:"text-900"},Fs={class:"field"},Is={for:"name1",class:"text-900"},Ms={class:"field"},Ns={for:"name1",class:"text-900"},qs={class:"field"},Ts={for:"name1",class:"text-900"},As={class:"field"},$s={for:"name1",class:"text-900"},Ks={class:"field"},Os={for:"name1",class:"text-900"},js={class:"col-12 md:col-6"},zs={class:"card p-fluid"},Gs={class:"grid p-fluid mt-3"},Ls={class:"field col-12 md:col-12"},Hs={class:"p-float-label"},Js={class:"field col-12 md:col-12"},Qs={class:"p-float-label"},Ws={class:"field col-12 md:col-12"},Xs={class:"p-float-label"},Ys={class:"field col-12 md:col-4"},Zs={class:"card"},sl={class:"grid p-fluid mt-3"},ll={class:"field col-12 md:col-12"},el={class:"p-float-label"},tl={class:"field col-12 md:col-4"},dl={__name:"UserProfile",setup(ol){const w=Z(),r=ss(),t=new as,J=ls(),e=v(null),V=v(null),b=v(null),_=v(null),c=v(null),m=v(null),g=v(!0),u=v({}),Q=()=>{let n={userId:w.params.id};t.genericRequest("get-user-details","post",!0,n).then(s=>{s.status?e.value=s.data[0]:t.showError(r,s.message)})},W=()=>{let n={status:"Active",user_id:w.params.id};t.genericRequest("get-assigned-user-branches","post",!0,n).then(s=>{s.status?V.value=s==null?void 0:s.data:t.showError(r,s.message)})},X=()=>{let n=t.getStorage();if(!b.value){t.showError(r,"Please Select a branch");return}let s={userId:w.params.id,branchId:b.value.branch_id};t.genericRequest("switch-branches","post",!0,s).then(d=>{var p,P;if(d.status){if(t.showSuccess(r,d.message),((p=n==null?void 0:n.userData)==null?void 0:p.id)==((P=d==null?void 0:d.data)==null?void 0:P.id)){const h={token:n==null?void 0:n.token,userData:d.data};t.setStorage(h),J.go(0)}}else t.showError(r,d.message)})},x=(n,s)=>{u.value[s]=t.validateFormField(n)},S=()=>{c.value===m.value?g.value=!0:g.value=!1},Y=()=>{if(u.value.oldPassword=t.validateFormField(_.value),u.value.newPassword=t.validateFormField(c.value),u.value.confirmPassword=t.validateFormField(m.value),t.validateRequiredFields(u.value)||c.value!=m.value){t.showError(r,"Please fill in the missing field");return}let s={userId:w.params.id,oldPassword:_.value,newPassword:c.value,confirmPassword:m.value};t.genericRequest("reset-password","post",!0,s).then(d=>{d.status?t.showSuccess(r,d.message):t.showError(r,d.message)})};return es(()=>{Q(),W()}),(n,s)=>{var h,C,D,U,k,R,E,F,I,M,N,q,T,A,$,K,O,j,z,G,L,H;const d=B("Password"),p=B("Button"),P=B("Dropdown");return ts(),os("div",ds,[l("div",ns,[l("div",is,[s[24]||(s[24]=l("h5",{class:"text-500"},"User Details",-1)),l("div",rs,[l("label",us,[s[7]||(s[7]=o("Name: ")),l("span",null,a(((h=e.value)==null?void 0:h.first_name)+" "+((C=e.value)==null?void 0:C.last_name)+" "+((D=e.value)==null?void 0:D.other_name)),1)])]),l("div",vs,[l("label",cs,[s[8]||(s[8]=o("Phone No.: ")),l("span",null,a((U=e.value)==null?void 0:U.phone_number),1)])]),l("div",ms,[l("label",fs,[s[9]||(s[9]=o("Gender: ")),l("span",null,a((k=e.value)==null?void 0:k.gender),1)])]),l("div",_s,[l("label",ps,[s[10]||(s[10]=o("Date of Birth: ")),l("span",null,a((R=e.value)==null?void 0:R.date_of_birth),1)])]),l("div",ws,[l("label",bs,[s[11]||(s[11]=o("Email: ")),l("span",null,a((E=e.value)==null?void 0:E.email),1)])]),l("div",gs,[l("label",Ps,[s[12]||(s[12]=o("City: ")),l("span",null,a((F=e.value)==null?void 0:F.city),1)])]),l("div",hs,[l("label",xs,[s[13]||(s[13]=o("Address: ")),l("span",null,a((I=e.value)==null?void 0:I.address),1)])]),l("div",Bs,[l("label",ys,[s[14]||(s[14]=o("Street: ")),l("span",null,a((M=e.value)==null?void 0:M.street),1)])]),l("div",Vs,[l("label",Ss,[s[15]||(s[15]=o("P.O Box: ")),l("span",null,a((N=e.value)==null?void 0:N.p_o_box),1)])]),l("div",Cs,[l("label",Ds,[s[16]||(s[16]=o("Status: ")),l("span",null,a((q=e.value)==null?void 0:q.status),1)])]),l("div",Us,[l("label",ks,[s[17]||(s[17]=o("Role: ")),l("span",null,a((T=e.value)==null?void 0:T.role),1)])]),l("div",Rs,[l("label",Es,[s[18]||(s[18]=o("User Type: ")),l("span",null,a((A=e.value)==null?void 0:A.user_type),1)])]),l("div",Fs,[l("label",Is,[s[19]||(s[19]=o("User Category: ")),l("span",null,a(($=e.value)==null?void 0:$.user_category),1)])]),l("div",Ms,[l("label",Ns,[s[20]||(s[20]=o("Institution: ")),l("span",null,a((K=e.value)==null?void 0:K.institution),1)])]),l("div",qs,[l("label",Ts,[s[21]||(s[21]=o("Branch: ")),l("span",null,a((O=e.value)==null?void 0:O.branch),1)])]),l("div",As,[l("label",$s,[s[22]||(s[22]=o("Description: ")),l("span",null,a((j=e.value)==null?void 0:j.description),1)])]),l("div",Ks,[l("label",Os,[s[23]||(s[23]=o("Created By: ")),l("span",null,a((z=e.value)==null?void 0:z.created_by),1)])])])]),l("div",js,[l("div",zs,[s[29]||(s[29]=l("h5",{class:"text-500"},"Reset Password",-1)),l("div",Gs,[l("div",Ls,[l("span",Hs,[f(d,{type:"text",id:"password",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=i=>_.value=i),onBlur:s[1]||(s[1]=i=>x(_.value,"oldPassword")),class:y({"p-invalid":(G=u.value)==null?void 0:G.oldPassword}),toggleMask:!0},null,8,["modelValue","class"]),s[25]||(s[25]=l("label",{for:"password"},"Old Password",-1))])]),l("div",Js,[l("span",Qs,[f(d,{type:"text",id:"password",onKeyup:S,modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value=i),onBlur:s[3]||(s[3]=i=>x(c.value,"newPassword")),class:y({"p-invalid":((L=u.value)==null?void 0:L.newPassword)||!g.value}),toggleMask:!0},null,8,["modelValue","class"]),s[26]||(s[26]=l("label",{for:"password"},"New Password",-1))])]),l("div",Ws,[l("span",Xs,[f(d,{type:"text",id:"confirmPassword",onKeyup:S,modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=i=>m.value=i),onBlur:s[5]||(s[5]=i=>x(m.value,"confirmPassword")),class:y({"p-invalid":((H=u.value)==null?void 0:H.confirmPassword)||!g.value}),toggleMask:!0},null,8,["modelValue","class"]),s[27]||(s[27]=l("label",{for:"confirmPassword"},"Confirm Password",-1))])]),s[28]||(s[28]=l("div",{class:"field col-12 md:col-8"},null,-1)),l("div",Ys,[f(p,{onClick:Y,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])]),l("div",Zs,[s[32]||(s[32]=l("h5",{class:"text-500"},"Switch Branch",-1)),l("div",sl,[l("div",ll,[l("span",el,[f(P,{id:"instCity",options:V.value,modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=i=>b.value=i),optionLabel:"name"},null,8,["options","modelValue"]),s[30]||(s[30]=l("label",{for:"instCity"},"Select Branch",-1))])]),s[31]||(s[31]=l("div",{class:"field col-12 md:col-8"},null,-1)),l("div",tl,[f(p,{onClick:X,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])])}}};export{dl as default};
