import{k as A,r,l as E,m as V,o as k,b as i,c as F,d as H,h as e,i as o,e as u,f as p,j as d,t as c,n as I,C as M}from"./index-b5c7fff2.js";const U={className:"card"},q=u("h5",null,"Ledger account statement",-1),L={style:{"padding-top":"20px"}},P={class:"grid p-fluid"},$={class:"field col-12 md:col-12"},j={class:"p-float-label"},z=u("label",{for:"description"},"Description",-1),Y={__name:"GlHistory",setup(K){const _=A(),g=r(null),s=new M;E();const h=V(),b=r(!1),m=r(null),C=r(null),f=r({});r(null),r(0);const N=n=>{let l={acct_no:n};s.genericRequest("get-gl-history","post",!0,l).then(t=>{t.status?g.value=t.data:s.showError(_,t.message)})},B=(n,l)=>{f.value[l]=s.validateFormField(n)},y=n=>{b.value=n},R=()=>{if(f.value.description=s.validateFormField(m.value),s.validateRequiredFields(f.value)){s.showError(_,"Please fill in the missing field");return}let l={description:m.value,acctNo:C.value};s.genericRequest("update-gl-account","post",!0,l).then(t=>{t.status?(s.showSuccess(_,t.message),getGlAccounts(),y(!1)):s.showError(_,t.message)})};return k(()=>{N(h.params.acctNo)}),(n,l)=>{const t=i("Column"),v=i("Row"),T=i("ColumnGroup"),x=i("DataTable"),S=i("Textarea"),w=i("Button"),G=i("Dialog");return F(),H("div",U,[q,e(x,{value:g.value,paginator:!0,class:"p-datatable-gridlines",rows:20,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:o(()=>[e(T,{type:"header"},{default:o(()=>[e(v,null,{default:o(()=>[e(t,{header:"Acct Info",rowspan:3}),e(t,{header:"Account Name: "+p(h).params.acctNo,colspan:6},null,8,["header"])]),_:1}),e(v,null,{default:o(()=>[e(t,{header:"Account Number : "+p(h).params.acctNo,colspan:6},null,8,["header"])]),_:1}),e(v,null,{default:o(()=>[e(t,{header:"Opening Balance: 0",colspan:6})]),_:1}),e(v,null,{default:o(()=>[e(t,{header:"Transaction Date",sortable:"",field:"transaction_date"}),e(t,{header:"Description",sortable:"",field:"description"}),e(t,{header:"Debit",sortable:"",field:"dr"}),e(t,{header:"Credit",sortable:"",field:"cr"}),e(t,{header:"Balance",sortable:"",field:"balance"}),e(t,{header:"Reversed",sortable:"",field:"reversal_flag"}),e(t,{header:"Posted By",sortable:"",field:"user_name"})]),_:1})]),_:1}),e(t,{field:"transaction_date",header:"Transaction Date",style:{"min-width":"12rem"}},{body:o(({data:a})=>[d(c(a.transaction_date),1)]),_:1}),e(t,{field:"description",header:"Description",style:{"min-width":"10rem"}},{body:o(({data:a})=>[d(c(a.description),1)]),_:1}),e(t,{field:"dr",header:"Debit",style:{"min-width":"10rem"}},{body:o(({data:a})=>[d(c(a.dr_cr_ind=="Dr"?p(s).commaSeparator(a.tran_amount):""),1)]),_:1}),e(t,{field:"cr",header:"Credit",style:{"min-width":"10rem"}},{body:o(({data:a})=>[d(c(a.dr_cr_ind=="Cr"?p(s).commaSeparator(a.tran_amount):""),1)]),_:1}),e(t,{field:"balance",header:"Balance",style:{"min-width":"10rem"}},{body:o(({data:a})=>[d(c(p(s).commaSeparator(a.balance)),1)]),_:1}),e(t,{field:"reversal_flag",header:"Reversed",style:{"max-width":"10rem"}},{body:o(({data:a})=>[d(c(a.reversal_flag=="N"?"No":"Yes"),1)]),_:1}),e(t,{field:"name",header:"Posted By",style:{"min-width":"10rem"}},{body:o(({data:a})=>[d(c(a.user_name),1)]),_:1})]),_:1},8,["value"]),e(G,{header:"Update Ledger Name",visible:b.value,"onUpdate:visible":l[3]||(l[3]=a=>b.value=a),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:o(()=>[e(w,{label:"Cancel",onClick:l[2]||(l[2]=a=>y(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),e(w,{onClick:R,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:o(()=>{var a;return[u("p",L,[u("div",P,[u("div",$,[u("span",j,[e(S,{inputId:"description",onBlur:l[0]||(l[0]=D=>B(m.value,"description")),rows:"7",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=D=>m.value=D),class:I({"p-invalid":(a=f.value)==null?void 0:a.description})},null,8,["modelValue","class"]),z])])])])]}),_:1},8,["visible"])])}}};export{Y as default};
