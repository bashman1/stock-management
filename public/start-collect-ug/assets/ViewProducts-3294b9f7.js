import{k as se,r as u,l as ie,m as ne,o as ue,b as y,p as de,c as re,d as ce,h as o,i as d,e as l,j as m,t as c,f as me,q as F,n as N,C as pe}from"./index-4b0416dd.js";const ve={className:"card"},_e=l("h5",null,"View Products",-1),fe={class:"field"},be=l("label",{class:"mb-3"},"Product info",-1),he={class:"formgrid grid"},ge=l("div",{class:"field-radiobutton col-4"},[l("div",{class:"formgrid grid"},[l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")]),l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")])])],-1),ye={class:"field-radiobutton col-8"},we={class:"formgrid grid"},Ve={class:"field col-12 md:col-6"},Ce={class:"p-float-label"},Ue=l("label",{for:"quantity"},"Quantity",-1),ke={class:"field col-12 md:col-6"},xe={class:"p-float-label"},qe=l("label",{for:"minStock"},"Minimum Stock Level",-1),De={class:"field col-12 md:col-6"},Se={class:"p-float-label"},Pe=l("label",{for:"maxStock"},"Maximum Stock Level",-1),Be={class:"field col-12 md:col-6"},Me={class:"p-inputgroup"},Ee={class:"p-float-label"},Fe=l("label",{for:"measurementUnit"},"Measurement Unit",-1),Ne={class:"field col-12 md:col-6"},Re={class:"p-float-label"},Ie=l("label",{for:"purchasePrice"},"Unit Purchase Price ",-1),Te={class:"field col-12 md:col-6"},$e={class:"p-float-label"},Le=l("label",{for:"date"},"Stock Date",-1),Ae={class:"field col-12 md:col-6"},je={class:"p-float-label"},ze=l("label",{for:"date"},"Manufactured Date",-1),Oe={class:"field col-12 md:col-6"},Qe={class:"p-float-label"},He=l("label",{for:"date"},"Expiry Date",-1),Ke={class:"field col-12 md:col-6"},Ye={class:"p-float-label"},Ge=l("label",{for:"sellingPrice"},"Unit Selling Price ",-1),Je={style:{"padding-top":"20px"}},We={class:"grid p-fluid"},Xe={class:"field col-12 md:col-12"},Ze={class:"p-float-label"},el=l("label",{for:"unitName"},"Name",-1),ll={class:"field col-12 md:col-12"},tl={class:"p-float-label"},ol=l("label",{for:"unitDesc"},"Description",-1),al={class:"flex align-items-center justify-content-center"},sl=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ul={__name:"ViewProducts",setup(il){const v=se(),j=u(null),P=u(!1),_=u({}),s=new pe,w=u(null),B=u(null),M=u({}),z=u(null),f=u({}),b=u(null),V=u(null),C=u(null),h=u(null),U=u(null),k=u(null),x=u(null),q=u(null),g=u(null);u(null);const S=u(!1),O=ie();ne();const R=u(!1),I=()=>{s.genericRequest("get-products","get",!0,{}).then(a=>{a.status?j.value=a.data:s.showError(v,a.message)})},T=(a,e)=>{f.value[e]=s.validateFormField(a)},Y=(a,e)=>{M.value[e]=s.validateFormField(a)},G=a=>{O.push("/view-product-details/"+(a==null?void 0:a.id))},J=a=>{O.push("/create-product/"+(a==null?void 0:a.id))},W=a=>{_.value=a,P.value=!0},$=a=>{R.value=a},X=a=>{_.value=a,S.value=!0},Z=()=>{var i;if(f.value.quantity=s.validateFormField(b.value),f.value.measurementUnit=s.validateFormField(h.value),f.value.sellingPrice=s.validateFormField(g.value),s.validateRequiredFields(f.value)){s.showError(v,"Please fill in the missing field");return}let e={quantity:b==null?void 0:b.value,min_quantity:V==null?void 0:V.value,max_quantity:C==null?void 0:C.value,measurement_unit_id:(i=h==null?void 0:h.value)==null?void 0:i.id,purchase_price:x==null?void 0:x.value,manufactured_date:U==null?void 0:U.value,expiry_date:k==null?void 0:k.value,selling_price:g==null?void 0:g.value,date:q==null?void 0:q.value,productId:_.value.id,status:"Active"};console.log(e),s.genericRequest("restock-product","post",!0,e).then(r=>{r.status?(b.value=null,V.value=null,C.value=null,h.value=null,x.value=null,U.value=null,k.value=null,g.value=null,q.value=null,Q(),I(),s.showSuccess(v,r.message)):s.showError(v,r.message)})},Q=()=>{P.value=!1},ee=()=>{if(M.value.unitName=s.validateFormField(w.value),s.validateRequiredFields(M.value)){s.showError(v,"Please fill in the missing field");return}let e={name:w.value,description:B.value,status:"Active"};s.genericRequest("create-measurement-unit","post",!0,e).then(i=>{i.status?(s.showSuccess(v,i.message),H(),$(!1),w.value=null,B.value=null):s.showError(v,i.message)})},H=()=>{s.genericRequest("get-measurement-unit","get",!0,{}).then(a=>{a.status?z.value=a.data:s.showError(v,a.message)})},le=()=>{var e;let a={status:"Archived",productId:(e=_==null?void 0:_.value)==null?void 0:e.id};s.genericRequest("archive-product","post",!0,a).then(i=>{i.status?(I(),s.showSuccess(v,i.message),S.value=!1):s.showError(v,i.message)})};return ue(()=>{I(),H()}),(a,e)=>{const i=y("Column"),r=y("Button"),te=y("DataTable"),D=y("InputText"),oe=y("Dropdown"),L=y("Calendar"),A=y("Dialog"),ae=y("Textarea"),E=de("tooltip");return re(),ce("div",ve,[_e,o(te,{value:j.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:d(()=>[o(i,{field:"name",header:"Product",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.name),1)]),_:1}),o(i,{field:"name",header:"Ref. No",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.ref_no),1)]),_:1}),o(i,{field:"name",header:"Product ID",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.product_no),1)]),_:1}),o(i,{field:"name",header:"Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.category_name),1)]),_:1}),o(i,{field:"name",header:"Sub Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.sub_category_name),1)]),_:1}),o(i,{field:"name",header:"Selling Price",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(me(s).commaSeparator(t.selling_price)),1)]),_:1}),o(i,{field:"name",header:"Quantity",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.quantity),1)]),_:1}),o(i,{field:"name",header:"Unit",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.unit),1)]),_:1}),o(i,{header:"Manufacturer",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.manufacturer),1)]),_:1}),o(i,{header:"Institution",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.institution_name),1)]),_:1}),o(i,{header:"Branch",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.branch_name),1)]),_:1}),o(i,{header:"Date",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.created_at),1)]),_:1}),o(i,{headerStyle:"min-width:17rem;"},{body:d(({data:t})=>[F(o(r,{icon:"pi pi-eye",onClick:p=>G(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[E,"View product details"]]),F(o(r,{icon:"pi pi-pencil",onClick:p=>J(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[E,"Edit product details"]]),F(o(r,{icon:"pi pi-refresh",onClick:p=>W(t),class:"p-button-warning mr-2"},null,8,["onClick"]),[[E,"Restock product"]]),F(o(r,{icon:"pi pi-trash",class:"p-button-danger mr-2",onClick:p=>X(t)},null,8,["onClick"]),[[E,"Archive product"]])]),_:1})]),_:1},8,["value"]),o(A,{visible:P.value,"onUpdate:visible":e[13]||(e[13]=t=>P.value=t),style:{width:"900px"},header:"Restock "+_.value.name,modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"CANCEL",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:Q}),o(r,{label:"SUBMIT",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:Z})]),default:d(()=>{var t,p,K;return[l("div",fe,[be,l("div",he,[ge,l("div",ye,[l("div",we,[l("div",Ve,[l("span",Ce,[o(D,{type:"text",id:"quantity",onBlur:e[0]||(e[0]=n=>T(b.value,"quantity")),modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value=n),modelModifiers:{trim:!0},class:N({"p-invalid":(t=f.value)==null?void 0:t.quantity})},null,8,["modelValue","class"]),Ue])]),l("div",ke,[l("span",xe,[o(D,{type:"text",id:"minStock",modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=n=>V.value=n)},null,8,["modelValue"]),qe])]),l("div",De,[l("span",Se,[o(D,{type:"text",id:"maxStock",modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=n=>C.value=n)},null,8,["modelValue"]),Pe])]),l("div",Be,[l("div",Me,[l("span",Ee,[o(oe,{id:"measurementUnit",options:z.value,filter:"",onBlur:e[4]||(e[4]=n=>T(h.value,"measurementUnit")),modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=n=>h.value=n),class:N({"p-invalid":(p=f.value)==null?void 0:p.measurementUnit}),optionLabel:"name"},null,8,["options","modelValue","class"]),Fe]),o(r,{onClick:e[6]||(e[6]=n=>$(!0)),icon:"pi pi-plus"})])]),l("div",Ne,[l("span",Re,[o(D,{type:"text",id:"purchasePrice",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=n=>x.value=n)},null,8,["modelValue"]),Ie])]),l("div",Te,[l("span",$e,[o(L,{id:"date",modelValue:q.value,"onUpdate:modelValue":e[8]||(e[8]=n=>q.value=n)},null,8,["modelValue"]),Le])]),l("div",Ae,[l("span",je,[o(L,{id:"date",modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=n=>U.value=n)},null,8,["modelValue"]),ze])]),l("div",Oe,[l("span",Qe,[o(L,{id:"date",modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=n=>k.value=n)},null,8,["modelValue"]),He])]),l("div",Ke,[l("span",Ye,[o(D,{type:"text",onBlur:e[11]||(e[11]=n=>T(g.value,"sellingPrice")),id:"sellingPrice",modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=n=>g.value=n),class:N({"p-invalid":(K=f.value)==null?void 0:K.sellingPrice})},null,8,["modelValue","class"]),Ge])])])])])])]}),_:1},8,["visible","header"]),o(A,{header:"Create Measurement Unit",visible:R.value,"onUpdate:visible":e[18]||(e[18]=t=>R.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"Cancel",onClick:e[17]||(e[17]=t=>$(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),o(r,{onClick:ee,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:d(()=>{var t;return[l("p",Je,[l("div",We,[l("div",Xe,[l("span",Ze,[o(D,{type:"text",id:"unitName",onBlur:e[14]||(e[14]=p=>Y(w.value,"unitName")),modelValue:w.value,"onUpdate:modelValue":e[15]||(e[15]=p=>w.value=p),class:N({"p-invalid":(t=M.value)==null?void 0:t.unitName})},null,8,["modelValue","class"]),el])]),l("div",ll,[l("span",tl,[o(ae,{inputId:"unitDesc",rows:"7",modelValue:B.value,"onUpdate:modelValue":e[16]||(e[16]=p=>B.value=p)},null,8,["modelValue"]),ol])])])])]}),_:1},8,["visible"]),o(A,{visible:S.value,"onUpdate:visible":e[20]||(e[20]=t=>S.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:e[19]||(e[19]=t=>S.value=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:le})]),default:d(()=>{var t;return[l("div",al,[sl,l("span",null,"Are you sure you want to archive "+c((t=_.value)==null?void 0:t.name)+"?",1)])]}),_:1},8,["visible"])])}}};export{ul as default};
