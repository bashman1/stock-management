import{k as x,l as C,r as h,a as E,A as R,w as M,o as S,b as m,c as k,d as U,e,h as d,n as A,t as L,C as $}from"./index-5b2445c5.js";const F={class:"card"},N=e("h5",null,"Expenses",-1),q={class:"grid p-fluid mt-3"},I={class:"field col-12 md:col-4"},P={class:"p-float-label"},O=e("label",{for:"drAcct"},"Expense Account",-1),j={class:"field col-12 md:col-4"},z={class:"p-float-label"},G=e("label",{for:"paymentMethod"},"Payment Method",-1),X={class:"field col-12 md:col-4"},H={class:"p-float-label"},J={for:"crAcct"},K={class:"field col-12 md:col-4"},Q={class:"p-float-label"},W=e("label",{for:"tranAmt"},"Amount",-1),Y={class:"field col-12 md:col-4"},Z={class:"p-float-label"},tt=e("label",{for:"tranDt"},"Date",-1),ot={class:"field col-12"},et={class:"p-float-label"},lt=e("label",{for:"description"},"Description",-1),st={class:"field col-12 md:col-4 offset-md-8"},at={__name:"Expenses",setup(nt){const _=x(),c=new $;C();const V=h([]),y=h([]),g=h([{id:1,name:"Cash"},{id:2,name:"Bank"}]),u=h(g.value[0]),t=E({drAcct:null,crAcct:null,tranAmt:null,tranDt:new Date,description:null}),i=E({}),w=R(()=>u.value.name==="Bank"?"1302000":"1301000"),D=(p,o=null,r=null)=>{const a={acct_type:o,gl_no:null,description:null,acct_no:null,indicator:p,...r&&{gl_type_no:r}};c.genericRequest("gl-search","post",!0,a).then(n=>{n.status?p==="DR"?V.value=n.data:y.value=n.data:c.showError(_,n.message)})},s=(p,o)=>{i[o]=c.validateFormField(p)},T=()=>{var r,a,n,v,f,b;if(console.log(t.crAcct),s(t.drAcct,"drAcct"),s(t.crAcct,"crAcct"),s(t.tranAmt,"tranAmt"),s(t.description,"description"),c.validateRequiredFields(i)){c.showError(_,"Please fill in the missing fields.");return}const o={drAcctNo:(r=t.drAcct)==null?void 0:r.acct_no,crAcctNo:(a=t.crAcct)==null?void 0:a.acct_no,drAcctType:(n=t.drAcct)==null?void 0:n.acct_type,crAcctType:(v=t.crAcct)==null?void 0:v.acct_type,drTitle:(f=t.drAcct)==null?void 0:f.description,crTitle:(b=t.crAcct)==null?void 0:b.description,tranAmt:t.tranAmt,description:t.description,tranDate:t.tranDt,status:"Active"};c.genericRequest("debit-credit-acct","post",!0,o).then(l=>{l.status?(c.showSuccess(_,l.message),Object.keys(t).forEach(B=>t[B]=B==="tranDt"?new Date:null)):c.showError(_,l.message)})};return M(u,()=>{D("CR",null,w.value)}),S(()=>{D("DR","EXPENSE"),D("CR",null,w.value)}),(p,o)=>{const r=m("Toast"),a=m("Dropdown"),n=m("InputText"),v=m("Calendar"),f=m("Textarea"),b=m("Button");return k(),U("div",null,[e("div",F,[N,e("div",q,[d(r),e("div",I,[e("span",P,[d(a,{id:"drAcct",options:V.value,modelValue:t.drAcct,"onUpdate:modelValue":o[0]||(o[0]=l=>t.drAcct=l),optionLabel:"description",onBlur:o[1]||(o[1]=l=>s(t.drAcct,"drAcct")),class:A({"p-invalid":i.drAcct})},null,8,["options","modelValue","class"]),O])]),e("div",j,[e("span",z,[d(a,{id:"paymentMethod",options:g.value,modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=l=>u.value=l),optionLabel:"name",onBlur:o[3]||(o[3]=l=>s(u.value,"paymentMethod")),class:A({"p-invalid":i.paymentMethod})},null,8,["options","modelValue","class"]),G])]),e("div",X,[e("span",H,[d(a,{id:"crAcct",options:y.value,modelValue:t.crAcct,"onUpdate:modelValue":o[4]||(o[4]=l=>t.crAcct=l),optionLabel:"description",onBlur:o[5]||(o[5]=l=>s(t.crAcct,"crAcct")),class:A({"p-invalid":i.crAcct})},null,8,["options","modelValue","class"]),e("label",J,L(u.value.name)+" Account",1)])]),e("div",K,[e("span",Q,[d(n,{type:"text",id:"tranAmt",modelValue:t.tranAmt,"onUpdate:modelValue":o[6]||(o[6]=l=>t.tranAmt=l),onBlur:o[7]||(o[7]=l=>s(t.tranAmt,"tranAmt")),class:A({"p-invalid":i.tranAmt})},null,8,["modelValue","class"]),W])]),e("div",Y,[e("span",Z,[d(v,{id:"tranDt",modelValue:t.tranDt,"onUpdate:modelValue":o[8]||(o[8]=l=>t.tranDt=l)},null,8,["modelValue"]),tt])]),e("div",ot,[e("span",et,[d(f,{inputId:"description",rows:"3",cols:"30",modelValue:t.description,"onUpdate:modelValue":o[9]||(o[9]=l=>t.description=l),onBlur:o[10]||(o[10]=l=>s(t.description,"description")),class:A({"p-invalid":i.description})},null,8,["modelValue","class"]),lt])]),e("div",st,[d(b,{onClick:T,label:"Submit",class:"p-button-outlined"})])])])])}}};export{at as default};
