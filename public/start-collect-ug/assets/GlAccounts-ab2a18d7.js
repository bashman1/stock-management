import{k as F,r,l as R,m as U,o as $,b as p,p as q,c as M,d as I,h as o,i,e as u,j as m,t as v,f as L,q as C,n as j,C as z}from"./index-d1cf7a5b.js";const H={className:"card"},K=u("h5",null,"Chart Of Accounts",-1),O={style:{"padding-top":"20px"}},P={class:"grid p-fluid"},J={class:"field col-12 md:col-12"},Q={class:"p-float-label"},W=u("label",{for:"description"},"Description",-1),Z={__name:"GlAccounts",setup(X){const _=F(),k=r(null),l=new z,N=R();U();const g=r(!1),c=r(null),h=r(null),f=r({});r(null);const y=r(!1),D=()=>{l.genericRequest("get-gl-accounts","get",!0,{}).then(e=>{e.status?k.value=e.data:l.showError(_,e.message)})},A=(e,a)=>{f.value[a]=l.validateFormField(e)},B=e=>{c.value=e.description,h.value=e.acct_no,y.value=!1,b(!0)},S=e=>{c.value="Sub account for "+e.description,y.value=!0,h.value=e.acct_no,b(!0)},b=e=>{g.value=e},T=()=>{if(f.value.description=l.validateFormField(c.value),l.validateRequiredFields(f.value)){l.showError(_,"Please fill in the missing field");return}let a={description:c.value,acctNo:h.value},s="update-gl-account";y.value&&(s="create-sub-account"),l.genericRequest(s,"post",!0,a).then(n=>{n.status?(l.showSuccess(_,n.message),D(),b(!1)):l.showError(_,n.message)})},x=e=>{N.push("/gl-statement/"+(e==null?void 0:e.acct_no))};return $(()=>{D()}),(e,a)=>{const s=p("Column"),n=p("Button"),E=p("DataTable"),G=p("Textarea"),V=p("Dialog"),w=q("tooltip");return M(),I("div",H,[K,o(E,{value:k.value,paginator:!0,class:"p-datatable-gridlines",rows:20,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:i(()=>[o(s,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.description),1)]),_:1}),o(s,{field:"name",header:"Acct Balance",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(L(l).commaSeparator(t.balance)),1)]),_:1}),o(s,{field:"name",header:"Acct No.",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.acct_no),1)]),_:1}),o(s,{field:"name",header:"Acct Type",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.acct_type),1)]),_:1}),o(s,{field:"name",header:"Ledger No.",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.gl_no),1)]),_:1}),o(s,{headerStyle:"max-width:10rem;"},{body:i(({data:t})=>[C(o(n,{icon:"pi pi-eye",onClick:d=>x(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[w,"Gl. account statement"]]),C(o(n,{icon:"pi pi-pencil",onClick:d=>B(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[w,"Update gl account description"]]),C(o(n,{icon:"pi pi-plus",onClick:d=>S(t),class:"p-button-info mr-2"},null,8,["onClick"]),[[w,"Create sub account"]])]),_:1})]),_:1},8,["value"]),o(V,{header:"Update Ledger Name",visible:g.value,"onUpdate:visible":a[3]||(a[3]=t=>g.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:i(()=>[o(n,{label:"Cancel",onClick:a[2]||(a[2]=t=>b(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),o(n,{onClick:T,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:i(()=>{var t;return[u("p",O,[u("div",P,[u("div",J,[u("span",Q,[o(G,{inputId:"description",onBlur:a[0]||(a[0]=d=>A(c.value,"description")),rows:"7",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=d=>c.value=d),class:j({"p-invalid":(t=f.value)==null?void 0:t.description})},null,8,["modelValue","class"]),W])])])])]}),_:1},8,["visible"])])}}};export{Z as default};
