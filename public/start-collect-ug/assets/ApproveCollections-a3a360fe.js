import{k as M,l as S,r as p,o as B,b as c,c as N,d as j,e as n,h as t,i as s,j as m,t as v,f as P,C as R}from"./index-13be92d9.js";const U={class:"grid"},V={class:"col-12"},q={className:"card"},z=n("h5",null,"Approve Transactions",-1),E=n("div",{class:"flex align-items-center justify-content-center"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to approve the selected transactions?")],-1),L=n("div",{class:"flex align-items-center justify-content-center"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to decline the selected transactions?")],-1),O={class:"my-2"},K={__name:"ApproveCollections",setup($){const g=M(),a=new R;S();const y=p(null),l=p(null),f=p(null),b=p(null),h=p(null),C=()=>{a.genericRequest("get-pending-transactions/Pending","get",!0,{}).then(u=>{u.status&&(y.value=u.data)})},k=()=>{h.value="Are you sure you want to approve the selected transactions?",f.value=a.toggleModal(!0)},D=()=>{h.value="Are you sure you want to decline the selected transactions?",b.value=a.toggleModal(!0)},_=()=>{f.value=a.toggleModal(!1),b.value=a.toggleModal(!1)},w=u=>{let o={action:u,tranList:l.value};_(),a.genericRequest("approve-transactions","post",!0,o).then(d=>{d.status?(l.value=[],C(),a.showSuccess(g,d.message)):a.showError(g,d.message)})};return B(()=>{C()}),(u,o)=>{const d=c("Toast"),i=c("Button"),x=c("Dialog"),A=c("Toolbar"),r=c("Column"),T=c("DataTable");return N(),j("div",U,[n("div",V,[n("div",q,[z,t(d),t(x,{header:"Confirmation",visible:f.value,"onUpdate:visible":o[1]||(o[1]=e=>f.value=e),style:{width:"550px"},modal:!0},{footer:s(()=>[t(i,{label:"Cancel",icon:"pi pi-times",onClick:_,class:"p-button-text"}),t(i,{label:"Confirm",icon:"pi pi-check",onClick:o[0]||(o[0]=e=>w("Approved")),class:"p-button-text",autofocus:""})]),default:s(()=>[E]),_:1},8,["visible"]),t(x,{header:"Confirmation",visible:b.value,"onUpdate:visible":o[3]||(o[3]=e=>b.value=e),style:{width:"550px"},modal:!0},{footer:s(()=>[t(i,{label:"Cancel",icon:"pi pi-times",onClick:_,class:"p-button-text"}),t(i,{label:"Confirm",icon:"pi pi-check",onClick:o[2]||(o[2]=e=>w("Declined")),class:"p-button-text",autofocus:""})]),default:s(()=>[L]),_:1},8,["visible"]),t(A,{class:"mb-4"},{start:s(()=>[n("div",O,[t(i,{label:"Approve",icon:"pi pi-check",class:"p-button-success",onClick:k,disabled:!l.value||!l.value.length},null,8,["disabled"]),t(i,{label:"Reject",icon:"pi pi-times",class:"p-button-danger",onClick:D,disabled:!l.value||!l.value.length},null,8,["disabled"])])]),end:s(()=>[]),_:1}),t(T,{value:y.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll",selection:l.value,"onUpdate:selection":o[4]||(o[4]=e=>l.value=e),rowsPerPageOptions:[5,10,25]},{default:s(()=>[t(r,{field:"Date",header:"Date",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(v(e.tran_date),1)]),_:1}),t(r,{header:"Amount",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(v(P(a).commaSeparator(e.amount)),1)]),_:1}),t(r,{header:"Member Name",style:{"min-width":"12rem"}},{body:s(({data:e})=>[m(v(e.member_name),1)]),_:1}),t(r,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(v(e.status),1)]),_:1}),t(r,{header:"Officer",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(v(e.officer_name),1)]),_:1}),t(r,{selectionMode:"multiple",headerStyle:"width: 3rem"})]),_:1},8,["value","selection"])])])])}}};export{K as default};
