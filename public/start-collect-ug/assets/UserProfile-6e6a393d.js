import{m as Z,k as ss,l as es,r as u,o as ls,b as B,c as ts,d as as,e as s,j as a,t as o,h as m,n as y,C as os}from"./index-3d982563.js";const ds={class:"grid"},ns={class:"col-12 md:col-6"},is={class:"card p-fluid"},cs=s("h5",{class:"text-500"},"User Details",-1),rs={class:"field"},us={for:"name1",class:"text-900"},_s={class:"field"},vs={for:"name1",class:"text-900"},ms={class:"field"},hs={for:"name1",class:"text-900"},fs={class:"field"},ps={for:"name1",class:"text-900"},ws={class:"field"},bs={for:"name1",class:"text-900"},gs={class:"field"},Ps={for:"name1",class:"text-900"},xs={class:"field"},Bs={for:"name1",class:"text-900"},ys={class:"field"},Vs={for:"name1",class:"text-900"},Ss={class:"field"},Cs={for:"name1",class:"text-900"},Ds={class:"field"},Us={for:"name1",class:"text-900"},ks={class:"field"},Rs={for:"name1",class:"text-900"},Es={class:"field"},Fs={for:"name1",class:"text-900"},Is={class:"field"},Ms={for:"name1",class:"text-900"},Ns={class:"field"},qs={for:"name1",class:"text-900"},Ts={class:"field"},As={for:"name1",class:"text-900"},$s={class:"field"},Ks={for:"name1",class:"text-900"},Os={class:"field"},js={for:"name1",class:"text-900"},zs={class:"col-12 md:col-6"},Gs={class:"card p-fluid"},Ls=s("h5",{class:"text-500"},"Reset Password",-1),Hs={class:"grid p-fluid mt-3"},Js={class:"field col-12 md:col-12"},Qs={class:"p-float-label"},Ws=s("label",{for:"password"},"Old Password",-1),Xs={class:"field col-12 md:col-12"},Ys={class:"p-float-label"},Zs=s("label",{for:"password"},"New Password",-1),se={class:"field col-12 md:col-12"},ee={class:"p-float-label"},le=s("label",{for:"confirmPassword"},"Confirm Password",-1),te=s("div",{class:"field col-12 md:col-8"},null,-1),ae={class:"field col-12 md:col-4"},oe={class:"card"},de=s("h5",{class:"text-500"},"Switch Branch",-1),ne={class:"grid p-fluid mt-3"},ie={class:"field col-12 md:col-12"},ce={class:"p-float-label"},re=s("label",{for:"instCity"},"Select Branch",-1),ue=s("div",{class:"field col-12 md:col-8"},null,-1),_e={class:"field col-12 md:col-4"},he={__name:"UserProfile",setup(ve){const p=Z(),c=ss(),t=new os,J=es(),l=u(null),V=u(null),w=u(null),h=u(null),_=u(null),v=u(null),b=u(!0),r=u({}),Q=()=>{let n={userId:p.params.id};t.genericRequest("get-user-details","post",!0,n).then(e=>{e.status?l.value=e.data[0]:t.showError(c,e.message)})},W=()=>{let n={status:"Active",user_id:p.params.id};t.genericRequest("get-assigned-user-branches","post",!0,n).then(e=>{e.status?V.value=e==null?void 0:e.data:t.showError(c,e.message)})},X=()=>{let n=t.getStorage();if(!w.value){t.showError(c,"Please Select a branch");return}let e={userId:p.params.id,branchId:w.value.branch_id};t.genericRequest("switch-branches","post",!0,e).then(d=>{var f,g;if(d.status){if(t.showSuccess(c,d.message),((f=n==null?void 0:n.userData)==null?void 0:f.id)==((g=d==null?void 0:d.data)==null?void 0:g.id)){const P={token:n==null?void 0:n.token,userData:d.data};t.setStorage(P),J.go(0)}}else t.showError(c,d.message)})},x=(n,e)=>{r.value[e]=t.validateFormField(n)},S=()=>{_.value===v.value?b.value=!0:b.value=!1},Y=()=>{if(r.value.oldPassword=t.validateFormField(h.value),r.value.newPassword=t.validateFormField(_.value),r.value.confirmPassword=t.validateFormField(v.value),t.validateRequiredFields(r.value)||_.value!=v.value){t.showError(c,"Please fill in the missing field");return}let e={userId:p.params.id,oldPassword:h.value,newPassword:_.value,confirmPassword:v.value};t.genericRequest("reset-password","post",!0,e).then(d=>{d.status?t.showSuccess(c,d.message):t.showError(c,d.message)})};return ls(()=>{Q(),W()}),(n,e)=>{var P,C,D,U,k,R,E,F,I,M,N,q,T,A,$,K,O,j,z,G,L,H;const d=B("Password"),f=B("Button"),g=B("Dropdown");return ts(),as("div",ds,[s("div",ns,[s("div",is,[cs,s("div",rs,[s("label",us,[a("Name: "),s("span",null,o(((P=l.value)==null?void 0:P.first_name)+" "+((C=l.value)==null?void 0:C.last_name)+" "+((D=l.value)==null?void 0:D.other_name)),1)])]),s("div",_s,[s("label",vs,[a("Phone No.: "),s("span",null,o((U=l.value)==null?void 0:U.phone_number),1)])]),s("div",ms,[s("label",hs,[a("Gender: "),s("span",null,o((k=l.value)==null?void 0:k.gender),1)])]),s("div",fs,[s("label",ps,[a("Date of Birth: "),s("span",null,o((R=l.value)==null?void 0:R.date_of_birth),1)])]),s("div",ws,[s("label",bs,[a("Email: "),s("span",null,o((E=l.value)==null?void 0:E.email),1)])]),s("div",gs,[s("label",Ps,[a("City: "),s("span",null,o((F=l.value)==null?void 0:F.city),1)])]),s("div",xs,[s("label",Bs,[a("Address: "),s("span",null,o((I=l.value)==null?void 0:I.address),1)])]),s("div",ys,[s("label",Vs,[a("Street: "),s("span",null,o((M=l.value)==null?void 0:M.street),1)])]),s("div",Ss,[s("label",Cs,[a("P.O Box: "),s("span",null,o((N=l.value)==null?void 0:N.p_o_box),1)])]),s("div",Ds,[s("label",Us,[a("Status: "),s("span",null,o((q=l.value)==null?void 0:q.status),1)])]),s("div",ks,[s("label",Rs,[a("Role: "),s("span",null,o((T=l.value)==null?void 0:T.role),1)])]),s("div",Es,[s("label",Fs,[a("User Type: "),s("span",null,o((A=l.value)==null?void 0:A.user_type),1)])]),s("div",Is,[s("label",Ms,[a("User Category: "),s("span",null,o(($=l.value)==null?void 0:$.user_category),1)])]),s("div",Ns,[s("label",qs,[a("Institution: "),s("span",null,o((K=l.value)==null?void 0:K.institution),1)])]),s("div",Ts,[s("label",As,[a("Branch: "),s("span",null,o((O=l.value)==null?void 0:O.branch),1)])]),s("div",$s,[s("label",Ks,[a("Description: "),s("span",null,o((j=l.value)==null?void 0:j.description),1)])]),s("div",Os,[s("label",js,[a("Created By: "),s("span",null,o((z=l.value)==null?void 0:z.created_by),1)])])])]),s("div",zs,[s("div",Gs,[Ls,s("div",Hs,[s("div",Js,[s("span",Qs,[m(d,{type:"text",id:"password",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=i=>h.value=i),onBlur:e[1]||(e[1]=i=>x(h.value,"oldPassword")),class:y({"p-invalid":(G=r.value)==null?void 0:G.oldPassword}),toggleMask:!0},null,8,["modelValue","class"]),Ws])]),s("div",Xs,[s("span",Ys,[m(d,{type:"text",id:"password",onKeyup:S,modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=i=>_.value=i),onBlur:e[3]||(e[3]=i=>x(_.value,"newPassword")),class:y({"p-invalid":((L=r.value)==null?void 0:L.newPassword)||!b.value}),toggleMask:!0},null,8,["modelValue","class"]),Zs])]),s("div",se,[s("span",ee,[m(d,{type:"text",id:"confirmPassword",onKeyup:S,modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=i=>v.value=i),onBlur:e[5]||(e[5]=i=>x(v.value,"confirmPassword")),class:y({"p-invalid":((H=r.value)==null?void 0:H.confirmPassword)||!b.value}),toggleMask:!0},null,8,["modelValue","class"]),le])]),te,s("div",ae,[m(f,{onClick:Y,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])]),s("div",oe,[de,s("div",ne,[s("div",ie,[s("span",ce,[m(g,{id:"instCity",options:V.value,modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=i=>w.value=i),optionLabel:"name"},null,8,["options","modelValue"]),re])]),ue,s("div",_e,[m(f,{onClick:X,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])])}}};export{he as default};
