import{k as ue,r as u,l as de,m as re,o as me,b as w,p as pe,c as ve,d as ce,e as l,h as o,i as d,j as p,t as m,f as fe,q as I,n as M,C as be}from"./index-9434943a.js";const ye={className:"card"},ge={class:"field"},_e={class:"formgrid grid"},we={class:"field-radiobutton col-8"},Ce={class:"formgrid grid"},Ve={class:"field col-12 md:col-6"},he={class:"p-float-label"},Ue={class:"field col-12 md:col-6"},ke={class:"p-float-label"},xe={class:"field col-12 md:col-6"},De={class:"p-float-label"},qe={class:"field col-12 md:col-6"},Se={class:"p-inputgroup"},Be={class:"p-float-label"},Me={class:"field col-12 md:col-6"},Pe={class:"p-float-label"},Ee={class:"field col-12 md:col-6"},Fe={class:"p-float-label"},Ne={class:"field col-12 md:col-6"},Re={class:"p-float-label"},Ie={class:"field col-12 md:col-6"},Te={class:"p-float-label"},$e={class:"field col-12 md:col-6"},Ae={class:"p-float-label"},Le={class:"field col-12 md:col-6"},je={class:"p-float-label"},He={style:{"padding-top":"20px"}},Oe={class:"grid p-fluid"},ze={class:"field col-12 md:col-12"},Ke={class:"p-float-label"},Qe={class:"field col-12 md:col-12"},Ye={class:"p-float-label"},Ge={class:"flex align-items-center justify-content-center"},Xe={__name:"ViewProducts",setup(Je){const c=ue(),H=u(null),P=u(!1),b=u({}),i=new be,V=u(null),E=u(null),F=u({}),O=u(null),f=u({}),y=u(null),h=u(null),U=u(null),g=u(null),k=u(null),x=u(null),D=u(null),q=u(null),_=u(null);u(null);const B=u(!1),z=de();re();const T=u(!1),W=u([{id:1,name:"Cash",value:"CASH"},{id:2,name:"Bank",value:"BANK"},{id:3,name:"Credit",value:"CREDIT"}]),C=u({id:1,name:"Cash",value:"CASH"}),$=()=>{i.genericRequest("get-products","get",!0,{}).then(a=>{a.status?H.value=a.data:i.showError(c,a.message)})},N=(a,e)=>{f.value[e]=i.validateFormField(a)},X=(a,e)=>{F.value[e]=i.validateFormField(a)},Z=a=>{z.push("/view-product-details/"+(a==null?void 0:a.id))},ee=a=>{z.push("/create-product/"+(a==null?void 0:a.id))},le=a=>{b.value=a,P.value=!0},A=a=>{T.value=a},te=a=>{b.value=a,B.value=!0},oe=()=>{var s;if(f.value.quantity=i.validateFormField(y.value),f.value.measurementUnit=i.validateFormField(g.value),f.value.sellingPrice=i.validateFormField(_.value),i.validateRequiredFields(f.value)){i.showError(c,"Please fill in the missing field");return}let e={quantity:y==null?void 0:y.value,min_quantity:h==null?void 0:h.value,max_quantity:U==null?void 0:U.value,measurement_unit_id:(s=g==null?void 0:g.value)==null?void 0:s.id,purchase_price:D==null?void 0:D.value,manufactured_date:k==null?void 0:k.value,expiry_date:x==null?void 0:x.value,selling_price:_==null?void 0:_.value,date:q==null?void 0:q.value,productId:b.value.id,status:"Active",payment_method:C==null?void 0:C.value.value};console.log(e),i.genericRequest("restock-product","post",!0,e).then(r=>{r.status?(y.value=null,h.value=null,U.value=null,g.value=null,D.value=null,k.value=null,x.value=null,_.value=null,q.value=null,C.value={id:1,name:"Cash",value:"CASH"},K(),$(),i.showSuccess(c,r.message)):i.showError(c,r.message)})},K=()=>{P.value=!1},ae=()=>{if(F.value.unitName=i.validateFormField(V.value),i.validateRequiredFields(F.value)){i.showError(c,"Please fill in the missing field");return}let e={name:V.value,description:E.value,status:"Active"};i.genericRequest("create-measurement-unit","post",!0,e).then(s=>{s.status?(i.showSuccess(c,s.message),Q(),A(!1),V.value=null,E.value=null):i.showError(c,s.message)})},Q=()=>{i.genericRequest("get-measurement-unit","get",!0,{}).then(a=>{a.status?O.value=a.data:i.showError(c,a.message)})},ie=()=>{var e;let a={status:"Archived",productId:(e=b==null?void 0:b.value)==null?void 0:e.id};i.genericRequest("archive-product","post",!0,a).then(s=>{s.status?($(),i.showSuccess(c,s.message),B.value=!1):i.showError(c,s.message)})};return me(()=>{$(),Q()}),(a,e)=>{const s=w("Column"),r=w("Button"),se=w("DataTable"),S=w("InputText"),Y=w("Dropdown"),L=w("Calendar"),j=w("Dialog"),ne=w("Textarea"),R=pe("tooltip");return ve(),ce("div",ye,[e[38]||(e[38]=l("h5",null,"View Products",-1)),o(se,{value:H.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:d(()=>[o(s,{field:"name",header:"Product",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.name),1)]),_:1}),o(s,{field:"name",header:"Ref. No",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.ref_no),1)]),_:1}),o(s,{field:"name",header:"Product ID",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.product_no),1)]),_:1}),o(s,{field:"name",header:"Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.category_name),1)]),_:1}),o(s,{field:"name",header:"Sub Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.sub_category_name),1)]),_:1}),o(s,{field:"name",header:"Selling Price",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(fe(i).commaSeparator(t.selling_price)),1)]),_:1}),o(s,{field:"name",header:"Quantity",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.quantity),1)]),_:1}),o(s,{field:"name",header:"Unit",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.unit),1)]),_:1}),o(s,{header:"Manufacturer",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.manufacturer),1)]),_:1}),o(s,{header:"Institution",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.institution_name),1)]),_:1}),o(s,{header:"Branch",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.branch_name),1)]),_:1}),o(s,{header:"Date",style:{"min-width":"10rem"}},{body:d(({data:t})=>[p(m(t.created_at),1)]),_:1}),o(s,{headerStyle:"min-width:17rem;"},{body:d(({data:t})=>[I(o(r,{icon:"pi pi-eye",onClick:v=>Z(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[R,"View product details"]]),I(o(r,{icon:"pi pi-pencil",onClick:v=>ee(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[R,"Edit product details"]]),I(o(r,{icon:"pi pi-refresh",onClick:v=>le(t),class:"p-button-warning mr-2"},null,8,["onClick"]),[[R,"Restock product"]]),I(o(r,{icon:"pi pi-trash",class:"p-button-danger mr-2",onClick:v=>te(t)},null,8,["onClick"]),[[R,"Archive product"]])]),_:1})]),_:1},8,["value"]),o(j,{visible:P.value,"onUpdate:visible":e[15]||(e[15]=t=>P.value=t),style:{width:"900px"},header:"Restock "+b.value.name,modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"CANCEL",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:K}),o(r,{label:"SUBMIT",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:oe})]),default:d(()=>{var t,v,G,J;return[l("div",ge,[e[34]||(e[34]=l("label",{class:"mb-3"},"Product info",-1)),l("div",_e,[e[33]||(e[33]=l("div",{class:"field-radiobutton col-4"},[l("div",{class:"formgrid grid"},[l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")]),l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")])])],-1)),l("div",we,[l("div",Ce,[l("div",Ve,[l("span",he,[o(S,{type:"text",id:"quantity",onBlur:e[0]||(e[0]=n=>N(y.value,"quantity")),modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=n=>y.value=n),modelModifiers:{trim:!0},class:M({"p-invalid":(t=f.value)==null?void 0:t.quantity})},null,8,["modelValue","class"]),e[23]||(e[23]=l("label",{for:"quantity"},"Quantity",-1))])]),l("div",Ue,[l("span",ke,[o(S,{type:"text",id:"minStock",modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=n=>h.value=n)},null,8,["modelValue"]),e[24]||(e[24]=l("label",{for:"minStock"},"Minimum Stock Level",-1))])]),l("div",xe,[l("span",De,[o(S,{type:"text",id:"maxStock",modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=n=>U.value=n)},null,8,["modelValue"]),e[25]||(e[25]=l("label",{for:"maxStock"},"Maximum Stock Level",-1))])]),l("div",qe,[l("div",Se,[l("span",Be,[o(Y,{id:"measurementUnit",options:O.value,filter:"",onBlur:e[4]||(e[4]=n=>N(g.value,"measurementUnit")),modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=n=>g.value=n),class:M({"p-invalid":(v=f.value)==null?void 0:v.measurementUnit}),optionLabel:"name"},null,8,["options","modelValue","class"]),e[26]||(e[26]=l("label",{for:"measurementUnit"},"Measurement Unit",-1))]),o(r,{onClick:e[6]||(e[6]=n=>A(!0)),icon:"pi pi-plus"})])]),l("div",Me,[l("span",Pe,[o(S,{type:"text",id:"purchasePrice",modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=n=>D.value=n)},null,8,["modelValue"]),e[27]||(e[27]=l("label",{for:"purchasePrice"},"Unit Purchase Price ",-1))])]),l("div",Ee,[l("span",Fe,[o(L,{id:"date",modelValue:q.value,"onUpdate:modelValue":e[8]||(e[8]=n=>q.value=n)},null,8,["modelValue"]),e[28]||(e[28]=l("label",{for:"date"},"Stock Date",-1))])]),l("div",Ne,[l("span",Re,[o(L,{id:"date",modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=n=>k.value=n)},null,8,["modelValue"]),e[29]||(e[29]=l("label",{for:"date"},"Manufactured Date",-1))])]),l("div",Ie,[l("span",Te,[o(L,{id:"date",modelValue:x.value,"onUpdate:modelValue":e[10]||(e[10]=n=>x.value=n)},null,8,["modelValue"]),e[30]||(e[30]=l("label",{for:"date"},"Expiry Date",-1))])]),l("div",$e,[l("span",Ae,[o(Y,{id:"instCity",options:W.value,modelValue:C.value,"onUpdate:modelValue":e[11]||(e[11]=n=>C.value=n),onBlur:e[12]||(e[12]=n=>N(C.value,"paymentMethod")),class:M({"p-invalid":(G=f.value)==null?void 0:G.paymentMethod}),optionLabel:"name"},null,8,["options","modelValue","class"]),e[31]||(e[31]=l("label",{for:"instCity"},"Payment Method",-1))])]),l("div",Le,[l("span",je,[o(S,{type:"text",onBlur:e[13]||(e[13]=n=>N(_.value,"sellingPrice")),id:"sellingPrice",modelValue:_.value,"onUpdate:modelValue":e[14]||(e[14]=n=>_.value=n),class:M({"p-invalid":(J=f.value)==null?void 0:J.sellingPrice})},null,8,["modelValue","class"]),e[32]||(e[32]=l("label",{for:"sellingPrice"},"Unit Selling Price ",-1))])])])])])])]}),_:1},8,["visible","header"]),o(j,{header:"Create Measurement Unit",visible:T.value,"onUpdate:visible":e[20]||(e[20]=t=>T.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"Cancel",onClick:e[19]||(e[19]=t=>A(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),o(r,{onClick:ae,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:d(()=>{var t;return[l("p",He,[l("div",Oe,[l("div",ze,[l("span",Ke,[o(S,{type:"text",id:"unitName",onBlur:e[16]||(e[16]=v=>X(V.value,"unitName")),modelValue:V.value,"onUpdate:modelValue":e[17]||(e[17]=v=>V.value=v),class:M({"p-invalid":(t=F.value)==null?void 0:t.unitName})},null,8,["modelValue","class"]),e[35]||(e[35]=l("label",{for:"unitName"},"Name",-1))])]),l("div",Qe,[l("span",Ye,[o(ne,{inputId:"unitDesc",rows:"7",modelValue:E.value,"onUpdate:modelValue":e[18]||(e[18]=v=>E.value=v)},null,8,["modelValue"]),e[36]||(e[36]=l("label",{for:"unitDesc"},"Description",-1))])])])])]}),_:1},8,["visible"]),o(j,{visible:B.value,"onUpdate:visible":e[22]||(e[22]=t=>B.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:e[21]||(e[21]=t=>B.value=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:ie})]),default:d(()=>{var t;return[l("div",Ge,[e[37]||(e[37]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),l("span",null,"Are you sure you want to archive "+m((t=b.value)==null?void 0:t.name)+"?",1)])]}),_:1},8,["visible"])])}}};export{Xe as default};
