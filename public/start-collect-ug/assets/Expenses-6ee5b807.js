import{k as C,l as R,r as D,a as T,A as M,w as S,o as k,b as m,c as U,d as L,e as l,h as d,n as A,t as $,C as F}from"./index-9434943a.js";const N={class:"card"},h={class:"grid p-fluid mt-3"},q={class:"field col-12 md:col-4"},I={class:"p-float-label"},P={class:"field col-12 md:col-4"},O={class:"p-float-label"},j={class:"field col-12 md:col-4"},z={class:"p-float-label"},G={for:"crAcct"},X={class:"field col-12 md:col-4"},H={class:"p-float-label"},J={class:"field col-12 md:col-4"},K={class:"p-float-label"},Q={class:"field col-12"},W={class:"p-float-label"},Y={class:"field col-12 md:col-4 offset-md-8"},ot={__name:"Expenses",setup(Z){const v=C(),a=new F;R();const y=D([]),g=D([]),w=D([{id:1,name:"Cash"},{id:2,name:"Bank"}]),u=D(w.value[0]),o=T({drAcct:null,crAcct:null,tranAmt:null,tranDt:new Date,description:null}),i=T({}),B=M(()=>u.value.name==="Bank"?"1302000":"1301000"),V=(p,t=null,r=null)=>{const c={acct_type:t,gl_no:null,description:null,acct_no:null,indicator:p,...r&&{gl_type_no:r}};a.genericRequest("gl-search","post",!0,c).then(s=>{s.status?p==="DR"?y.value=s.data:g.value=s.data:a.showError(v,s.message)})},n=(p,t)=>{i[t]=a.validateFormField(p)},x=()=>{var r,c,s,f,_,b;if(console.log(o.crAcct),n(o.drAcct,"drAcct"),n(o.crAcct,"crAcct"),n(o.tranAmt,"tranAmt"),n(o.description,"description"),a.validateRequiredFields(i)){a.showError(v,"Please fill in the missing fields.");return}const t={drAcctNo:(r=o.drAcct)==null?void 0:r.acct_no,crAcctNo:(c=o.crAcct)==null?void 0:c.acct_no,drAcctType:(s=o.drAcct)==null?void 0:s.acct_type,crAcctType:(f=o.crAcct)==null?void 0:f.acct_type,drTitle:(_=o.drAcct)==null?void 0:_.description,crTitle:(b=o.crAcct)==null?void 0:b.description,tranAmt:o.tranAmt,description:o.description,tranDate:o.tranDt,status:"Active"};a.genericRequest("debit-credit-acct","post",!0,t).then(e=>{e.status?(a.showSuccess(v,e.message),Object.keys(o).forEach(E=>o[E]=E==="tranDt"?new Date:null)):a.showError(v,e.message)})};return S(u,()=>{V("CR",null,B.value)}),k(()=>{V("DR","EXPENSE"),V("CR",null,B.value)}),(p,t)=>{const r=m("Toast"),c=m("Dropdown"),s=m("InputText"),f=m("Calendar"),_=m("Textarea"),b=m("Button");return U(),L("div",null,[l("div",N,[t[16]||(t[16]=l("h5",null,"Expenses",-1)),l("div",h,[d(r),l("div",q,[l("span",I,[d(c,{id:"drAcct",options:y.value,modelValue:o.drAcct,"onUpdate:modelValue":t[0]||(t[0]=e=>o.drAcct=e),optionLabel:"description",onBlur:t[1]||(t[1]=e=>n(o.drAcct,"drAcct")),class:A({"p-invalid":i.drAcct})},null,8,["options","modelValue","class"]),t[11]||(t[11]=l("label",{for:"drAcct"},"Expense Account",-1))])]),l("div",P,[l("span",O,[d(c,{id:"paymentMethod",options:w.value,modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),optionLabel:"name",onBlur:t[3]||(t[3]=e=>n(u.value,"paymentMethod")),class:A({"p-invalid":i.paymentMethod})},null,8,["options","modelValue","class"]),t[12]||(t[12]=l("label",{for:"paymentMethod"},"Payment Method",-1))])]),l("div",j,[l("span",z,[d(c,{id:"crAcct",options:g.value,modelValue:o.crAcct,"onUpdate:modelValue":t[4]||(t[4]=e=>o.crAcct=e),optionLabel:"description",onBlur:t[5]||(t[5]=e=>n(o.crAcct,"crAcct")),class:A({"p-invalid":i.crAcct})},null,8,["options","modelValue","class"]),l("label",G,$(u.value.name)+" Account",1)])]),l("div",X,[l("span",H,[d(s,{type:"text",id:"tranAmt",modelValue:o.tranAmt,"onUpdate:modelValue":t[6]||(t[6]=e=>o.tranAmt=e),onBlur:t[7]||(t[7]=e=>n(o.tranAmt,"tranAmt")),class:A({"p-invalid":i.tranAmt})},null,8,["modelValue","class"]),t[13]||(t[13]=l("label",{for:"tranAmt"},"Amount",-1))])]),l("div",J,[l("span",K,[d(f,{id:"tranDt",modelValue:o.tranDt,"onUpdate:modelValue":t[8]||(t[8]=e=>o.tranDt=e)},null,8,["modelValue"]),t[14]||(t[14]=l("label",{for:"tranDt"},"Date",-1))])]),l("div",Q,[l("span",W,[d(_,{inputId:"description",rows:"3",cols:"30",modelValue:o.description,"onUpdate:modelValue":t[9]||(t[9]=e=>o.description=e),onBlur:t[10]||(t[10]=e=>n(o.description,"description")),class:A({"p-invalid":i.description})},null,8,["modelValue","class"]),t[15]||(t[15]=l("label",{for:"description"},"Description",-1))])]),l("div",Y,[d(b,{onClick:x,label:"Submit",class:"p-button-outlined"})])])])])}}};export{ot as default};
