import{k as ue,r as u,l as de,m as re,o as ce,b as g,p as me,c as pe,d as ve,h as o,i as d,e as l,j as m,t as c,f as _e,q as I,n as M,C as fe}from"./index-bd98e245.js";const be={className:"card"},he=l("h5",null,"View Products",-1),ye={class:"field"},ge=l("label",{class:"mb-3"},"Product info",-1),we={class:"formgrid grid"},Ce=l("div",{class:"field-radiobutton col-4"},[l("div",{class:"formgrid grid"},[l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")]),l("div",{class:"field-radiobutton col-12"},[l("p",{style:{"text-align":"justify"}},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptas libero beatae, sapiente autem voluptatum atque. Optio ad animi id tempora eius corporis, nam aliquid quos amet cumque molestias ullam.")])])],-1),Ve={class:"field-radiobutton col-8"},Ue={class:"formgrid grid"},ke={class:"field col-12 md:col-6"},xe={class:"p-float-label"},De=l("label",{for:"quantity"},"Quantity",-1),qe={class:"field col-12 md:col-6"},Se={class:"p-float-label"},Be=l("label",{for:"minStock"},"Minimum Stock Level",-1),Me={class:"field col-12 md:col-6"},Pe={class:"p-float-label"},Ee=l("label",{for:"maxStock"},"Maximum Stock Level",-1),Fe={class:"field col-12 md:col-6"},Ne={class:"p-inputgroup"},Re={class:"p-float-label"},Ie=l("label",{for:"measurementUnit"},"Measurement Unit",-1),Te={class:"field col-12 md:col-6"},$e={class:"p-float-label"},Ae=l("label",{for:"purchasePrice"},"Unit Purchase Price ",-1),Le={class:"field col-12 md:col-6"},je={class:"p-float-label"},He=l("label",{for:"date"},"Stock Date",-1),Oe={class:"field col-12 md:col-6"},ze={class:"p-float-label"},Ke=l("label",{for:"date"},"Manufactured Date",-1),Qe={class:"field col-12 md:col-6"},Ye={class:"p-float-label"},Ge=l("label",{for:"date"},"Expiry Date",-1),Je={class:"field col-12 md:col-6"},We={class:"p-float-label"},Xe=l("label",{for:"instCity"},"Payment Method",-1),Ze={class:"field col-12 md:col-6"},el={class:"p-float-label"},ll=l("label",{for:"sellingPrice"},"Unit Selling Price ",-1),tl={style:{"padding-top":"20px"}},ol={class:"grid p-fluid"},al={class:"field col-12 md:col-12"},sl={class:"p-float-label"},il=l("label",{for:"unitName"},"Name",-1),nl={class:"field col-12 md:col-12"},ul={class:"p-float-label"},dl=l("label",{for:"unitDesc"},"Description",-1),rl={class:"flex align-items-center justify-content-center"},cl=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),vl={__name:"ViewProducts",setup(ml){const v=ue(),H=u(null),P=u(!1),f=u({}),s=new fe,C=u(null),E=u(null),F=u({}),O=u(null),_=u({}),b=u(null),V=u(null),U=u(null),h=u(null),k=u(null),x=u(null),D=u(null),q=u(null),y=u(null);u(null);const B=u(!1),z=de();re();const T=u(!1),W=u([{id:1,name:"Cash",value:"CASH"},{id:2,name:"Bank",value:"BANK"},{id:3,name:"Credit",value:"CREDIT"}]),w=u({id:1,name:"Cash",value:"CASH"}),$=()=>{s.genericRequest("get-products","get",!0,{}).then(a=>{a.status?H.value=a.data:s.showError(v,a.message)})},N=(a,e)=>{_.value[e]=s.validateFormField(a)},X=(a,e)=>{F.value[e]=s.validateFormField(a)},Z=a=>{z.push("/view-product-details/"+(a==null?void 0:a.id))},ee=a=>{z.push("/create-product/"+(a==null?void 0:a.id))},le=a=>{f.value=a,P.value=!0},A=a=>{T.value=a},te=a=>{f.value=a,B.value=!0},oe=()=>{var i;if(_.value.quantity=s.validateFormField(b.value),_.value.measurementUnit=s.validateFormField(h.value),_.value.sellingPrice=s.validateFormField(y.value),s.validateRequiredFields(_.value)){s.showError(v,"Please fill in the missing field");return}let e={quantity:b==null?void 0:b.value,min_quantity:V==null?void 0:V.value,max_quantity:U==null?void 0:U.value,measurement_unit_id:(i=h==null?void 0:h.value)==null?void 0:i.id,purchase_price:D==null?void 0:D.value,manufactured_date:k==null?void 0:k.value,expiry_date:x==null?void 0:x.value,selling_price:y==null?void 0:y.value,date:q==null?void 0:q.value,productId:f.value.id,status:"Active",payment_method:w==null?void 0:w.value.value};console.log(e),s.genericRequest("restock-product","post",!0,e).then(r=>{r.status?(b.value=null,V.value=null,U.value=null,h.value=null,D.value=null,k.value=null,x.value=null,y.value=null,q.value=null,w.value={id:1,name:"Cash",value:"CASH"},K(),$(),s.showSuccess(v,r.message)):s.showError(v,r.message)})},K=()=>{P.value=!1},ae=()=>{if(F.value.unitName=s.validateFormField(C.value),s.validateRequiredFields(F.value)){s.showError(v,"Please fill in the missing field");return}let e={name:C.value,description:E.value,status:"Active"};s.genericRequest("create-measurement-unit","post",!0,e).then(i=>{i.status?(s.showSuccess(v,i.message),Q(),A(!1),C.value=null,E.value=null):s.showError(v,i.message)})},Q=()=>{s.genericRequest("get-measurement-unit","get",!0,{}).then(a=>{a.status?O.value=a.data:s.showError(v,a.message)})},se=()=>{var e;let a={status:"Archived",productId:(e=f==null?void 0:f.value)==null?void 0:e.id};s.genericRequest("archive-product","post",!0,a).then(i=>{i.status?($(),s.showSuccess(v,i.message),B.value=!1):s.showError(v,i.message)})};return ce(()=>{$(),Q()}),(a,e)=>{const i=g("Column"),r=g("Button"),ie=g("DataTable"),S=g("InputText"),Y=g("Dropdown"),L=g("Calendar"),j=g("Dialog"),ne=g("Textarea"),R=me("tooltip");return pe(),ve("div",be,[he,o(ie,{value:H.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:d(()=>[o(i,{field:"name",header:"Product",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.name),1)]),_:1}),o(i,{field:"name",header:"Ref. No",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.ref_no),1)]),_:1}),o(i,{field:"name",header:"Product ID",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.product_no),1)]),_:1}),o(i,{field:"name",header:"Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.category_name),1)]),_:1}),o(i,{field:"name",header:"Sub Category",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.sub_category_name),1)]),_:1}),o(i,{field:"name",header:"Selling Price",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(_e(s).commaSeparator(t.selling_price)),1)]),_:1}),o(i,{field:"name",header:"Quantity",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.quantity),1)]),_:1}),o(i,{field:"name",header:"Unit",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.unit),1)]),_:1}),o(i,{header:"Manufacturer",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.manufacturer),1)]),_:1}),o(i,{header:"Institution",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.institution_name),1)]),_:1}),o(i,{header:"Branch",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.branch_name),1)]),_:1}),o(i,{header:"Date",style:{"min-width":"10rem"}},{body:d(({data:t})=>[m(c(t.created_at),1)]),_:1}),o(i,{headerStyle:"min-width:17rem;"},{body:d(({data:t})=>[I(o(r,{icon:"pi pi-eye",onClick:p=>Z(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[R,"View product details"]]),I(o(r,{icon:"pi pi-pencil",onClick:p=>ee(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[R,"Edit product details"]]),I(o(r,{icon:"pi pi-refresh",onClick:p=>le(t),class:"p-button-warning mr-2"},null,8,["onClick"]),[[R,"Restock product"]]),I(o(r,{icon:"pi pi-trash",class:"p-button-danger mr-2",onClick:p=>te(t)},null,8,["onClick"]),[[R,"Archive product"]])]),_:1})]),_:1},8,["value"]),o(j,{visible:P.value,"onUpdate:visible":e[15]||(e[15]=t=>P.value=t),style:{width:"900px"},header:"Restock "+f.value.name,modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"CANCEL",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:K}),o(r,{label:"SUBMIT",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:oe})]),default:d(()=>{var t,p,G,J;return[l("div",ye,[ge,l("div",we,[Ce,l("div",Ve,[l("div",Ue,[l("div",ke,[l("span",xe,[o(S,{type:"text",id:"quantity",onBlur:e[0]||(e[0]=n=>N(b.value,"quantity")),modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value=n),modelModifiers:{trim:!0},class:M({"p-invalid":(t=_.value)==null?void 0:t.quantity})},null,8,["modelValue","class"]),De])]),l("div",qe,[l("span",Se,[o(S,{type:"text",id:"minStock",modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=n=>V.value=n)},null,8,["modelValue"]),Be])]),l("div",Me,[l("span",Pe,[o(S,{type:"text",id:"maxStock",modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=n=>U.value=n)},null,8,["modelValue"]),Ee])]),l("div",Fe,[l("div",Ne,[l("span",Re,[o(Y,{id:"measurementUnit",options:O.value,filter:"",onBlur:e[4]||(e[4]=n=>N(h.value,"measurementUnit")),modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=n=>h.value=n),class:M({"p-invalid":(p=_.value)==null?void 0:p.measurementUnit}),optionLabel:"name"},null,8,["options","modelValue","class"]),Ie]),o(r,{onClick:e[6]||(e[6]=n=>A(!0)),icon:"pi pi-plus"})])]),l("div",Te,[l("span",$e,[o(S,{type:"text",id:"purchasePrice",modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=n=>D.value=n)},null,8,["modelValue"]),Ae])]),l("div",Le,[l("span",je,[o(L,{id:"date",modelValue:q.value,"onUpdate:modelValue":e[8]||(e[8]=n=>q.value=n)},null,8,["modelValue"]),He])]),l("div",Oe,[l("span",ze,[o(L,{id:"date",modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=n=>k.value=n)},null,8,["modelValue"]),Ke])]),l("div",Qe,[l("span",Ye,[o(L,{id:"date",modelValue:x.value,"onUpdate:modelValue":e[10]||(e[10]=n=>x.value=n)},null,8,["modelValue"]),Ge])]),l("div",Je,[l("span",We,[o(Y,{id:"instCity",options:W.value,modelValue:w.value,"onUpdate:modelValue":e[11]||(e[11]=n=>w.value=n),onBlur:e[12]||(e[12]=n=>N(w.value,"paymentMethod")),class:M({"p-invalid":(G=_.value)==null?void 0:G.paymentMethod}),optionLabel:"name"},null,8,["options","modelValue","class"]),Xe])]),l("div",Ze,[l("span",el,[o(S,{type:"text",onBlur:e[13]||(e[13]=n=>N(y.value,"sellingPrice")),id:"sellingPrice",modelValue:y.value,"onUpdate:modelValue":e[14]||(e[14]=n=>y.value=n),class:M({"p-invalid":(J=_.value)==null?void 0:J.sellingPrice})},null,8,["modelValue","class"]),ll])])])])])])]}),_:1},8,["visible","header"]),o(j,{header:"Create Measurement Unit",visible:T.value,"onUpdate:visible":e[20]||(e[20]=t=>T.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:d(()=>[o(r,{label:"Cancel",onClick:e[19]||(e[19]=t=>A(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),o(r,{onClick:ae,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:d(()=>{var t;return[l("p",tl,[l("div",ol,[l("div",al,[l("span",sl,[o(S,{type:"text",id:"unitName",onBlur:e[16]||(e[16]=p=>X(C.value,"unitName")),modelValue:C.value,"onUpdate:modelValue":e[17]||(e[17]=p=>C.value=p),class:M({"p-invalid":(t=F.value)==null?void 0:t.unitName})},null,8,["modelValue","class"]),il])]),l("div",nl,[l("span",ul,[o(ne,{inputId:"unitDesc",rows:"7",modelValue:E.value,"onUpdate:modelValue":e[18]||(e[18]=p=>E.value=p)},null,8,["modelValue"]),dl])])])])]}),_:1},8,["visible"]),o(j,{visible:B.value,"onUpdate:visible":e[22]||(e[22]=t=>B.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(r,{label:"No",icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2",onClick:e[21]||(e[21]=t=>B.value=!1)}),o(r,{label:"Yes",icon:"pi pi-check",class:"p-button-outlined mr-2 mb-2",onClick:se})]),default:d(()=>{var t;return[l("div",rl,[cl,l("span",null,"Are you sure you want to archive "+c((t=f.value)==null?void 0:t.name)+"?",1)])]}),_:1},8,["visible"])])}}};export{vl as default};
