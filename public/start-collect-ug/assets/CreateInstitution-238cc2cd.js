import{k as dl,l as ul,m as cl,r as o,o as vl,b as F,c as Q,d as X,e as l,h as i,n as v,g as ml,C as rl}from"./index-b5151af3.js";const pl={class:"card"},_l=l("h5",null,"Create Institution",-1),fl={class:"grid p-fluid mt-3"},bl={class:"field col-12 md:col-4"},Vl={class:"p-float-label"},xl=l("label",{for:"instName"},"Institution Name",-1),yl={class:"field col-12 md:col-4"},Nl={class:"p-float-label"},gl=l("label",{for:"instType"},"Institution Type",-1),hl={class:"field col-12 md:col-4"},Fl={class:"p-float-label"},Ul=l("label",{for:"instStart"},"Start Date",-1),Bl={class:"field col-12 md:col-12"},Cl={class:"p-float-label"},Il=l("label",{for:"textarea"},"Address",-1),kl={class:"field col-12 md:col-4"},Tl={class:"p-float-label"},wl=l("label",{for:"instCity"},"City",-1),El={class:"field col-12 md:col-4"},Sl={class:"p-float-label"},$l=l("label",{for:"instStreet"},"Street",-1),Rl={class:"field col-12 md:col-4"},Pl={class:"p-float-label"},ql=l("label",{for:"instPOBox"},"P.O Box",-1),Al={class:"field col-12 md:col-4"},Dl={class:"p-float-label"},Ll=l("label",{for:"instCity"},"Tax Config",-1),Ol={key:0,class:"field col-12 md:col-4"},zl={class:"p-float-label"},Ml=l("label",{for:"instPOBox"},"TIN",-1),Wl={class:"field col-12 md:col-4"},jl=l("h5",null,"Attachment",-1),Gl={class:"field col-12 md:col-12"},Hl={class:"p-float-label"},Jl=l("label",{for:"instDescription"},"Description",-1),Kl={class:"card"},Ql=l("h5",null,"Institution Contact Info",-1),Xl={class:"grid p-fluid mt-3"},Yl={class:"field col-12 md:col-3"},Zl={class:"p-float-label"},le=l("label",{for:"contactName"},"Contact Person Name",-1),ee={class:"field col-12 md:col-3"},te={class:"p-float-label"},ae=l("label",{for:"contactNumber"},"Phone Number",-1),oe={class:"field col-12 md:col-3"},se={class:"p-float-label"},ne=l("label",{for:"contactEmail"},"Email",-1),ie={class:"field col-12 md:col-3"},de={class:"p-float-label"},ue=l("label",{for:"contactWeb"},"Website",-1),ce={class:"card"},ve=l("h5",null,"Institution Bank Info",-1),me={class:"grid p-fluid mt-3"},re={class:"field col-12 md:col-4"},pe={class:"p-float-label"},_e=l("label",{for:"bankName"},"Bank",-1),fe={class:"field col-12 md:col-4"},be={class:"p-float-label"},Ve=l("label",{for:"acctName"},"Account Name",-1),xe={class:"field col-12 md:col-4"},ye={class:"p-float-label"},Ne=l("label",{for:"acctNumber"},"Account Number",-1),ge=l("div",{class:"field col-12 md:col-8"},null,-1),he={class:"field col-12 md:col-4"},Be={__name:"CreateInstitution",setup(Fe){const $=dl(),n=new rl,Y=ul(),w=cl(),_=o(null),f=o(null),m=o(null),U=o(null),b=o(null),B=o(null),C=o(null),I=o(null),V=o(null),x=o(null),y=o(null),k=o(null),N=o(null),g=o(null),h=o(null),R=o(null),P=o(null),q=o(null);o({});const s=o({}),r=o({id:1,name:"Enable tax",value:!0}),E=o(null),Z=o(!1),ll=o(null),A=o([{id:1,name:"Enable tax",value:!0},{id:2,name:"Disable tax",value:!1}]),el=()=>{var p,a,u,S;if(s.value.name=n.validateFormField(_.value),s.value.type=n.validateFormField(f.value),s.value.city=n.validateFormField(b.value),s.value.contactName=n.validateFormField(V.value),s.value.contactNumber=n.validateFormField(x.value),s.value.contactEmail=n.validateFormField(y.value),s.value.bankName=n.validateFormField(N.value),s.value.acctName=n.validateFormField(g.value),s.value.acctNumber=n.validateFormField(h.value),s.value.taxConfig=n.validateFormField(r.value),n.validateRequiredFields(s.value)){n.showError($,"Please fill in the missing field");return}let e={id:w.params.id,name:_==null?void 0:_.value,type:(p=f==null?void 0:f.value)==null?void 0:p.id,start_date:m!=null&&m.value?m==null?void 0:m.value:new Date,address:U==null?void 0:U.value,city:(a=b==null?void 0:b.value)==null?void 0:a.id,street:B==null?void 0:B.value,p_o_box:C==null?void 0:C.value,description:I==null?void 0:I.value,contact_name:V==null?void 0:V.value,contact_number:x==null?void 0:x.value,contact_email:y==null?void 0:y.value,contact_web:k==null?void 0:k.value,bank_id:(u=N==null?void 0:N.value)==null?void 0:u.id,acct_name:g==null?void 0:g.value,acct_no:h==null?void 0:h.value,tax_config:(S=r==null?void 0:r.value)==null?void 0:S.value,tin:E.value,status:"Active"};n.genericRequest("create-institution","post",!0,e).then(T=>{T.status?(n.showSuccess($,T.message),n.redirect(Y,"/view-institutions")):n.showError($,T.message)})},tl=()=>{n.genericRequest("get-institution-types","get",!0,{}).then(d=>{d.status&&(R.value=d.data)})},al=()=>{n.genericRequest("get-city-county-id/1","get",!0,{}).then(d=>{d.status&&(P.value=d.data)})},ol=()=>{n.genericRequest("get-bank-ref","get",!0,{}).then(d=>{d.status&&(q.value=d.data)})},c=(d,e)=>{s.value[e]=n.validateFormField(d)},sl=d=>{let e={institutionId:d,status:"Active"};n.genericRequest("get-institution-profile","post",!0,e).then(p=>{if(p.status){let a=p==null?void 0:p.data[0];_.value=a==null?void 0:a.name,m.value=a==null?void 0:a.start_date,U.value=a.address,b.value=P.value.find(u=>u.id==a.city_id),B.value=a.street,C.value=a.p_o_box,I.value=a.description,V.value=a.contact_name,x.value=a.contact_phone_number,y.value=a.contact_email,k.value=a.website,N.value=q.value.find(u=>u.id==a.bank_id),g.value=a.acct_name,h.value=a.acct_number,f.value=R.value.find(u=>u.id==a.institution_type_id),r.value=A.value.find(u=>u.value==a.is_tax_enabled),E.value=a.tin}})};return vl(()=>{tl(),al(),ol(),w.params.id!=null&&(ll.value=Number(w.params.id),Z.value=!0,sl(w.params.id))}),(d,e)=>{var D,L,O,z,M,W,j,G,H,J,K;const p=F("Toast"),a=F("InputText"),u=F("Dropdown"),S=F("Calendar"),T=F("Textarea"),nl=F("FileUpload"),il=F("Button");return Q(),X("div",null,[l("div",pl,[_l,l("div",fl,[i(p),l("div",bl,[l("span",Vl,[i(a,{type:"text",id:"instName",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),onBlur:e[1]||(e[1]=t=>c(_.value,"name")),class:v({"p-invalid":(D=s.value)==null?void 0:D.name})},null,8,["modelValue","class"]),xl])]),l("div",yl,[l("span",Nl,[i(u,{id:"instType",onBlur:e[2]||(e[2]=t=>c(f.value,"type")),options:R.value,modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),class:v({"p-invalid":(L=s.value)==null?void 0:L.type}),optionLabel:"name"},null,8,["options","modelValue","class"]),gl])]),l("div",hl,[l("span",Fl,[i(S,{id:"instStart",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t)},null,8,["modelValue"]),Ul])]),l("div",Bl,[l("span",Cl,[i(T,{id:"textarea",rows:"3",cols:"30",modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=t=>U.value=t)},null,8,["modelValue"]),Il])]),l("div",kl,[l("span",Tl,[i(u,{id:"instCity",options:P.value,modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=t=>b.value=t),onBlur:e[7]||(e[7]=t=>c(b.value,"city")),class:v({"p-invalid":(O=s.value)==null?void 0:O.city}),optionLabel:"name"},null,8,["options","modelValue","class"]),wl])]),l("div",El,[l("span",Sl,[i(a,{type:"text",id:"instStreet",modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=t=>B.value=t)},null,8,["modelValue"]),$l])]),l("div",Rl,[l("span",Pl,[i(a,{type:"text",id:"instPOBox",modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=t=>C.value=t)},null,8,["modelValue"]),ql])]),l("div",Al,[l("span",Dl,[i(u,{id:"instCity",options:A.value,modelValue:r.value,"onUpdate:modelValue":e[10]||(e[10]=t=>r.value=t),onBlur:e[11]||(e[11]=t=>c(r.value,"taxConfig")),class:v({"p-invalid":(z=s.value)==null?void 0:z.taxConfig}),optionLabel:"name"},null,8,["options","modelValue","class"]),Ll])]),(M=r.value)!=null&&M.value?(Q(),X("div",Ol,[l("span",zl,[i(a,{type:"text",id:"tin",modelValue:E.value,"onUpdate:modelValue":e[12]||(e[12]=t=>E.value=t)},null,8,["modelValue"]),Ml])])):ml("",!0),l("div",Wl,[jl,i(nl,{mode:"basic",name:"demo[]",accept:"image/*",maxFileSize:1e6,onUploader:d.onUpload,customUpload:""},null,8,["onUploader"])]),l("div",Gl,[l("span",Hl,[i(T,{id:"instDescription",rows:"3",cols:"30",modelValue:I.value,"onUpdate:modelValue":e[13]||(e[13]=t=>I.value=t)},null,8,["modelValue"]),Jl])])])]),l("div",Kl,[Ql,l("div",Xl,[l("div",Yl,[l("span",Zl,[i(a,{type:"text",id:"contactName",modelValue:V.value,"onUpdate:modelValue":e[14]||(e[14]=t=>V.value=t),onBlur:e[15]||(e[15]=t=>c(V.value,"contactName")),class:v({"p-invalid":(W=s.value)==null?void 0:W.contactName})},null,8,["modelValue","class"]),le])]),l("div",ee,[l("span",te,[i(a,{id:"basic",modelValue:x.value,"onUpdate:modelValue":e[16]||(e[16]=t=>x.value=t),onBlur:e[17]||(e[17]=t=>c(x.value,"contactNumber")),class:v({"p-invalid":(j=s.value)==null?void 0:j.contactNumber})},null,8,["modelValue","class"]),ae])]),l("div",oe,[l("span",se,[i(a,{type:"text",id:"contactEmail",modelValue:y.value,"onUpdate:modelValue":e[18]||(e[18]=t=>y.value=t),onBlur:e[19]||(e[19]=t=>c(y.value,"contactEmail")),class:v({"p-invalid":(G=s.value)==null?void 0:G.contactEmail})},null,8,["modelValue","class"]),ne])]),l("div",ie,[l("span",de,[i(a,{type:"text",id:"contactWeb",modelValue:k.value,"onUpdate:modelValue":e[20]||(e[20]=t=>k.value=t)},null,8,["modelValue"]),ue])])])]),l("div",ce,[ve,l("div",me,[l("div",re,[l("span",pe,[i(u,{id:"bankName",options:q.value,modelValue:N.value,"onUpdate:modelValue":e[21]||(e[21]=t=>N.value=t),optionLabel:"name",onBlur:e[22]||(e[22]=t=>c(N.value,"bankName")),class:v({"p-invalid":(H=s.value)==null?void 0:H.bankName})},null,8,["options","modelValue","class"]),_e])]),l("div",fe,[l("span",be,[i(a,{type:"text",id:"acctName",modelValue:g.value,"onUpdate:modelValue":e[23]||(e[23]=t=>g.value=t),onBlur:e[24]||(e[24]=t=>c(g.value,"acctName")),class:v({"p-invalid":(J=s.value)==null?void 0:J.acctName})},null,8,["modelValue","class"]),Ve])]),l("div",xe,[l("span",ye,[i(a,{type:"text",id:"acctNumber",modelValue:h.value,"onUpdate:modelValue":e[25]||(e[25]=t=>h.value=t),onBlur:e[26]||(e[26]=t=>c(h.value,"acctNumber")),class:v({"p-invalid":(K=s.value)==null?void 0:K.acctNumber})},null,8,["modelValue","class"]),Ne])]),ge,l("div",he,[i(il,{onClick:el,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{Be as default};
