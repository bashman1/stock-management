import{k as w,r as b,o as f,b as _,c as v,d as C,e as i,h as t,i as a,j as o,t as r,z as D,f as S,C as T}from"./index-54b662c4.js";const x={class:"grid"},B={class:"col-12"},L={class:"card"},V={__name:"ViewLogs",setup(P){const h=w(),d=b(null),c=new T,m=l=>{c.genericRequest(`get-audit-trail?page=${l}`,"get",!0,{}).then(n=>{n.status?d.value=n.data:c.showError(h,n.message)})},g=l=>{m(l.page+1)};return f(()=>{m(1)}),(l,n)=>{var u,y;const s=_("Column"),p=_("DataTable");return v(),C("div",x,[i("div",B,[i("div",L,[n[1]||(n[1]=i("h5",null,"Audit Logs",-1)),t(p,{value:(u=d.value)==null?void 0:u.data,paginator:!0,class:"p-datatable-gridlines",lazy:"",totalRecords:(y=d.value)==null?void 0:y.total,onPage:n[0]||(n[0]=e=>g(e)),rows:15,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:a(()=>[t(s,{field:"action",header:"Action",style:{"min-width":"8rem"}},{body:a(({data:e})=>[o(r(e.action),1)]),_:1}),t(s,{header:"IP",style:{"min-width":"7rem"}},{body:a(({data:e})=>[o(r(e.ip),1)]),_:1}),t(s,{header:"Message",style:{"min-width":"14rem"}},{body:a(({data:e})=>[o(r(e.return_message),1)]),_:1}),t(s,{header:"HTTP",style:{"min-width":"4rem"}},{body:a(({data:e})=>[o(r(e.http_code),1)]),_:1}),t(s,{header:"Status",style:{"min-width":"9rem"}},{body:a(({data:e})=>[i("span",null,[o(r(e.return_status?"Successful":"Failed")+" ",1),i("i",{class:"pi pi-circle-fill",style:D({color:e.return_status?"green":"red"})},null,4)])]),_:1}),t(s,{header:"Role",style:{"min-width":"10rem"}},{body:a(({data:e})=>[o(r(e.role),1)]),_:1}),t(s,{header:"User",style:{"min-width":"10rem"}},{body:a(({data:e})=>[o(r(e.user),1)]),_:1}),t(s,{header:"User type",style:{"min-width":"8rem"}},{body:a(({data:e})=>[o(r(e.user_type),1)]),_:1}),t(s,{header:"Institution",style:{"min-width":"10rem"}},{body:a(({data:e})=>[o(r(e.institution),1)]),_:1}),t(s,{header:"Branch",style:{"min-width":"10rem"}},{body:a(({data:e})=>[o(r(e.branch),1)]),_:1}),t(s,{header:"Date",style:{"min-width":"12rem"}},{body:a(({data:e})=>[o(r(S(c).formatDate(new Date(e.created_at))),1)]),_:1})]),_:1},8,["value","totalRecords"])])])])}}};export{V as default};
