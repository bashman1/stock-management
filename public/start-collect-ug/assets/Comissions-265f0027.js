import{l as S,m as U,k as $,r as c,o as A,b as r,c as v,d as M,e as l,h as o,i as s,j as m,t as i,v as f,g as y,n as F,C as Y}from"./index-b5777484.js";const V=""+new URL("../demo/images/mtnmomo.svg",import.meta.url).href,q={class:"grid"},L={class:"col-12"},O={className:"card"},j=l("h5",null,"View Commission",-1),z={class:"my-2"},H=l("img",{src:V,alt:"Image",height:"50"},null,-1),K={style:{padding:"20px"}},Q={class:"grid p-fluid"},W={class:"field col-12 md:col-12"},X=l("img",{src:V,alt:"Image",height:"50",class:"mb-3"},null,-1),G={class:"p-float-label"},J=l("label",{for:"unitName"},"MTN phone number",-1),Z={key:0,class:"field col-12 md:col-12"},oe={__name:"Comissions",setup(ee){S(),U();const w=$(),p=new Y,N=c(null),h=c(null),g=c(!1),C=c({}),_=c(null),d=c(null),B=()=>{p.genericRequest("get-commissions","get",!0,{}).then(a=>{a.status?N.value=a.data:p.showError(w,a.message)})},T=a=>{let t={action:a,phoneNo:_.value};d.value=null,p.genericRequest("test-momo-api","post",!1,t).then(u=>{u.status?a=="VERIFY_NAME"?d.value="Name: "+u.data.name+" "+u.data.given_name:d.value="Payment initiated successfully. Waiting to approval to complete the transaction":p.showError(w,u.message)})},k=a=>{g.value=a},D=(a,t)=>{C.value[t]=p.validateFormField(a)};return A(()=>{B()}),(a,t)=>{const u=r("Toast"),b=r("Button"),I=r("Toolbar"),n=r("Column"),R=r("DataTable"),x=r("InputText"),P=r("Dialog");return v(),M("div",q,[l("div",L,[l("div",O,[j,o(u),o(I,{class:"mb-4"},{start:s(()=>[l("div",z,[H,o(b,{label:"Approve Payment",icon:"pi pi-check",class:"p-button-success",onClick:t[0]||(t[0]=e=>k(!0)),disabled:!h.value||!h.value.length},null,8,["disabled"])])]),end:s(()=>[]),_:1}),o(R,{value:N.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll",selection:h.value,"onUpdate:selection":t[1]||(t[1]=e=>h.value=e),rowsPerPageOptions:[5,10,25]},{default:s(()=>[o(n,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.institution_name),1)]),_:1}),o(n,{header:"Rate",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.rate),1)]),_:1}),o(n,{header:"Commission",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.commision),1)]),_:1}),o(n,{header:"Member",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.member_name),1)]),_:1}),o(n,{header:"Officer",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.officer_name),1)]),_:1}),o(n,{header:"Tran Id",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.tran_id),1)]),_:1}),o(n,{header:"Phone Number",style:{"min-width":"12rem"}},{body:s(({data:e})=>[m(i(e.phone_number),1)]),_:1}),o(n,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.status),1)]),_:1}),o(n,{header:"Date",style:{"min-width":"10rem"}},{body:s(({data:e})=>[m(i(e.created_at),1)]),_:1}),o(n,{selectionMode:"multiple",headerStyle:"width: 3rem"})]),_:1},8,["value","selection"]),o(P,{header:"Sales Details",visible:g.value,"onUpdate:visible":t[7]||(t[7]=e=>g.value=e),style:{width:"33vw"},modal:!0,class:"p-fluid"},{footer:s(()=>[_.value?y("",!0):(v(),f(b,{key:0,label:"Cancel",onClick:t[4]||(t[4]=e=>k(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"})),d.value?y("",!0):(v(),f(b,{key:1,onClick:t[5]||(t[5]=e=>T("VERIFY_NAME")),label:"NEXT",class:"p-button-outlined mr-2 mb-2"})),d.value?(v(),f(b,{key:2,onClick:t[6]||(t[6]=e=>T("REQUEST_PAYMENT")),label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})):y("",!0)]),default:s(()=>{var e;return[l("p",K,[l("div",Q,[l("div",W,[X,l("span",G,[o(x,{type:"text",id:"phoneNo",onBlur:t[2]||(t[2]=E=>D(_.value,"phoneNo")),modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=E=>_.value=E),class:F({"p-invalid":(e=C.value)==null?void 0:e.phoneNo})},null,8,["modelValue","class"]),J])]),d.value?(v(),M("div",Z,i(d.value),1)):y("",!0)])])]}),_:1},8,["visible"])])])])}}};export{oe as default};
