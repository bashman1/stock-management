import{k,r,l as E,m as G,o as I,b as i,c as V,d as q,h as e,i as l,e as d,j as _,t as f,f as w,n as A,C as F}from"./index-4428033b.js";const M={className:"card"},U=d("h5",null,"Product Sales Report",-1),H={style:{"padding-top":"20px"}},L={class:"grid p-fluid"},Q={class:"field col-12 md:col-12"},$={class:"p-float-label"},j=d("label",{for:"description"},"Description",-1),O={__name:"ProductSalesReport",setup(z){const u=k(),h=r(null),s=new F;E();const C=G(),v=r(!1),c=r(null),N=r(null),p=r({});r(null),r(0);const D=n=>{let a={productId:n};s.genericRequest("get-sales-product-report","post",!0,a).then(t=>{t.status?h.value=t.data:s.showError(u,t.message)})},B=(n,a)=>{p.value[a]=s.validateFormField(n)},b=n=>{v.value=n},R=()=>{if(p.value.description=s.validateFormField(c.value),s.validateRequiredFields(p.value)){s.showError(u,"Please fill in the missing field");return}let a={description:c.value,acctNo:N.value};s.genericRequest("update-gl-account","post",!0,a).then(t=>{t.status?(s.showSuccess(u,t.message),getGlAccounts(),b(!1)):s.showError(u,t.message)})};return I(()=>{D(C.params.productId)}),(n,a)=>{const t=i("Column"),m=i("Row"),S=i("ColumnGroup"),T=i("DataTable"),P=i("Textarea"),g=i("Button"),x=i("Dialog");return V(),q("div",M,[U,e(T,{value:h.value,paginator:!0,class:"p-datatable-gridlines",rows:20,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:l(()=>[e(S,{type:"header"},{default:l(()=>[e(m,null,{default:l(()=>[e(t,{header:"Product Info",rowspan:3}),e(t,{header:"Account Name: ",colspan:6})]),_:1}),e(m,null,{default:l(()=>[e(t,{header:"Account Number : ",colspan:6})]),_:1}),e(m,null,{default:l(()=>[e(t,{header:"Opening Balance: 0",colspan:6})]),_:1}),e(m,null,{default:l(()=>[e(t,{header:"Transaction Date",sortable:"",field:"transaction_date"}),e(t,{header:"Name",sortable:"",field:"product_name"}),e(t,{header:"Purchase Price",sortable:"",field:"purchase_price"}),e(t,{header:"Quantity",sortable:"",field:"quantity"})]),_:1})]),_:1}),e(t,{field:"transaction_date",header:"Transaction Date",style:{"min-width":"12rem"}},{body:l(({data:o})=>[_(f(o.stock_date),1)]),_:1}),e(t,{field:"description",header:"Name",style:{"min-width":"10rem"}},{body:l(({data:o})=>[_(f(o.product_name),1)]),_:1}),e(t,{field:"balance",header:"Purchase Price",style:{"min-width":"10rem"}},{body:l(({data:o})=>[_(f(w(s).commaSeparator(o.purchase_price)),1)]),_:1}),e(t,{field:"balance",header:"Quantity",style:{"min-width":"10rem"}},{body:l(({data:o})=>[_(f(w(s).commaSeparator(o.quantity)),1)]),_:1})]),_:1},8,["value"]),e(x,{header:"Update Ledger Name",visible:v.value,"onUpdate:visible":a[3]||(a[3]=o=>v.value=o),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:l(()=>[e(g,{label:"Cancel",onClick:a[2]||(a[2]=o=>b(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),e(g,{onClick:R,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:l(()=>{var o;return[d("p",H,[d("div",L,[d("div",Q,[d("span",$,[e(P,{inputId:"description",onBlur:a[0]||(a[0]=y=>B(c.value,"description")),rows:"7",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=y=>c.value=y),class:A({"p-invalid":(o=p.value)==null?void 0:o.description})},null,8,["modelValue","class"]),j])])])])]}),_:1},8,["visible"])])}}};export{O as default};
