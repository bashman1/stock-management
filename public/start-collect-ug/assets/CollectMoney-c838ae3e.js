import{i as Q,j as W,r as s,o as X,b as v,c as i,d as r,h as t,f as a,k as y,g as m,n as T,l as x,t as F,C as Y}from"./index-fb1339b5.js";const Z={className:"card"},ee=a("h5",null,"Collect Money",-1),le={class:"grid p-fluid mt-3"},te={class:"col-12 md:col-12"},ae={class:"p-inputgroup"},oe={key:0,class:"field col-12 md:col-12"},se={key:1,class:"field col-12 md:col-4"},ne={class:"p-float-label"},ue=a("label",{for:"name"},"Member Name",-1),de={key:2,class:"field col-12 md:col-4"},ie={class:"p-float-label"},re=a("label",{for:"number"},"Member Number",-1),me={key:3,class:"field col-12 md:col-4"},ce={class:"p-float-label"},ve=a("label",{for:"contact"},"Member Contact",-1),pe={key:4,class:"field col-12 md:col-4"},be={class:"p-float-label"},_e=a("label",{for:"amount"},"Amount",-1),ye={key:5,class:"field col-12 md:col-4"},fe={class:"p-float-label"},he=a("label",{for:"transactionType"},"Transact type",-1),Ve={key:6,class:"field col-12 md:col-4"},Ce={class:"p-float-label"},Ne=a("label",{for:"date"},"Date",-1),ke={key:7,class:"field col-12 md:col-12"},Te={class:"p-float-label"},we=a("label",{for:"textarea"},"Description",-1),De=a("div",{class:"field col-12 md:col-6"},null,-1),ge={key:8,class:"field col-12 md:col-2"},xe={key:9,class:"field col-12 md:col-4"},Be={__name:"CollectMoney",setup(Fe){const M=Q(),o=new Y,L=W(),p=s(null),b=s(null),_=s(null),w=s(null),f=s(null),h=s(null),D=s(null),V=s(null),S=s(null),B=s(null),n=s(null),P=s([{label:"Cash Deposit",value:"DP"},{label:"Shares Purchase",value:"SP"},{label:"Loan Repayment",value:"LN"}]),u=s({}),R=d=>{let e={status:"Active",searchKey:d};o.genericRequest("get-members-by-institution","post",!0,e).then(c=>{c.status&&(S.value=c.data)})},q=()=>{R(p.value)},K=d=>{p.value=null,n.value=d,B.value=d.id,b.value=d.name,_.value=d.member_number,w.value=d.phone_number},j=()=>{p.value=null,n.value=null,S.value=null},z=()=>{if(u.value.mName=o.validateFormField(b.value),u.value.mNumber=o.validateFormField(_.value),u.value.tranAmt=o.validateFormField(f.value),u.value.tType=o.validateFormField(h.value),u.value.description=o.validateFormField(V.value),o.validateRequiredFields(u.value)){o.showError(M,"Please fill in the missing field");return}let e={name:b.value,member_number:_.value,member_contact:w.value,amount:f.value,tran_type:h.value.value,tran_date:D.value?D.value:new Date,description:V.value,member_id:B.value};o.genericRequest("collect-deposit","post",!0,e).then(c=>{c.status?(o.showSuccess(M,c.message),o.redirect(L,"/view-collected-money")):o.showError(M,c.message)})},C=(d,e)=>{u.value[e]=o.validateFormField(d)};return X(()=>{}),(d,e)=>{var U,A,$,E,I;const c=v("Toast"),N=v("InputText"),g=v("Button"),k=v("Column"),H=v("DataTable"),G=v("Dropdown"),J=v("Calendar"),O=v("Textarea");return i(),r("div",Z,[ee,t(c),a("div",le,[a("div",te,[a("div",ae,[t(N,{placeholder:"Search by Member name or number",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l)},null,8,["modelValue"]),t(g,{onClick:q,disabled:p.value==null,label:"Search"},null,8,["disabled"])])]),n.value?m("",!0):(i(),r("div",oe,[t(H,{value:S.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:y(()=>[t(k,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:y(({data:l})=>[x(F(l.name),1)]),_:1}),t(k,{header:"Member No.",style:{"min-width":"10rem"}},{body:y(({data:l})=>[x(F(l.member_number),1)]),_:1}),t(k,{header:"Phone Number",style:{"min-width":"12rem"}},{body:y(({data:l})=>[x(F(l.phone_number),1)]),_:1}),t(k,{header:"Alt. Member No.",style:{"min-width":"10rem"}},{body:y(({data:l})=>[x(F(l.alt_member_number),1)]),_:1}),t(k,{header:"Select",headerStyle:"min-width:5rem;"},{body:y(({data:l})=>[t(g,{icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:Me=>K(l)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])),n.value?(i(),r("div",se,[a("span",ne,[t(N,{type:"text",id:"name",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),disabled:"true",onBlur:e[2]||(e[2]=l=>C(b.value,"mName")),class:T({"p-invalid":(U=u.value)==null?void 0:U.mName})},null,8,["modelValue","class"]),ue])])):m("",!0),n.value?(i(),r("div",de,[a("span",ie,[t(N,{type:"text",id:"number",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),disabled:"true",onBlur:e[4]||(e[4]=l=>C(_.value,"mNumber")),class:T({"p-invalid":(A=u.value)==null?void 0:A.mNumber})},null,8,["modelValue","class"]),re])])):m("",!0),n.value?(i(),r("div",me,[a("span",ce,[t(N,{type:"text",id:"contact",modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=l=>w.value=l),disabled:"true"},null,8,["modelValue"]),ve])])):m("",!0),n.value?(i(),r("div",pe,[a("span",be,[t(N,{type:"text",id:"amount",modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),onBlur:e[7]||(e[7]=l=>C(f.value,"tranAmt")),class:T({"p-invalid":($=u.value)==null?void 0:$.tranAmt})},null,8,["modelValue","class"]),_e])])):m("",!0),n.value?(i(),r("div",ye,[a("span",fe,[t(G,{id:"transactionType",onBlur:e[8]||(e[8]=l=>C(h.value,"tType")),class:T({"p-invalid":(E=u.value)==null?void 0:E.tType}),options:P.value,modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=l=>h.value=l),optionLabel:"label"},null,8,["class","options","modelValue"]),he])])):m("",!0),n.value?(i(),r("div",Ve,[a("span",Ce,[t(J,{id:"date",modelValue:D.value,"onUpdate:modelValue":e[10]||(e[10]=l=>D.value=l)},null,8,["modelValue"]),Ne])])):m("",!0),n.value?(i(),r("div",ke,[a("span",Te,[t(O,{id:"textarea",rows:"3",cols:"30",onBlur:e[11]||(e[11]=l=>C(V.value,"description")),class:T({"p-invalid":(I=u.value)==null?void 0:I.description}),modelValue:V.value,"onUpdate:modelValue":e[12]||(e[12]=l=>V.value=l)},null,8,["class","modelValue"]),we])])):m("",!0),De,n.value?(i(),r("div",ge,[t(g,{onClick:j,label:"CANCEL",class:"p-button-outlined p-button-danger mr-2 mb-2"})])):m("",!0),n.value?(i(),r("div",xe,[t(g,{onClick:z,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])):m("",!0)])])}}};export{Be as default};
