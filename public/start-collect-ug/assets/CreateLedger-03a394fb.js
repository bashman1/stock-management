import{k as x,l as D,r as s,o as U,b as f,c as k,d as A,e,h as c,n as b,C as E}from"./index-54b662c4.js";const N={class:"card"},$={class:"grid p-fluid mt-3"},M={class:"field col-12 md:col-4"},z={class:"p-float-label"},P={class:"field col-12 md:col-4"},j={class:"p-float-label"},G={class:"field col-12 md:col-4"},H={class:"p-float-label"},J={class:"field col-12 md:col-4"},K={class:"p-float-label"},O={class:"field col-12 md:col-4"},X={__name:"CreateLedger",setup(Q){const y=x(),a=new E;D();const i=s(null),d=s(null),v=s(null),p=s(null),C=s(null),V=s(null),B=s(null);s(null),s(null);const n=s({});s([{label:"Admin Role",value:"Admin"},{label:"Institution Role",value:"Institution"}]);const T=()=>{var u,_,r;if(n.value.name=a.validateFormField(i.value),n.value.cat=a.validateFormField(d.value),n.value.subCat=a.validateFormField(v.value),n.value.type=a.validateFormField(p.value),a.validateRequiredFields(n.value)){a.showError(y,"Please fill in the missing field");return}let l={name:i==null?void 0:i.value,cat:(u=d==null?void 0:d.value)==null?void 0:u.gl_no,subCat:(_=v==null?void 0:v.value)==null?void 0:_.gl_no,type:(r=p==null?void 0:p.value)==null?void 0:r.gl_no,status:"Active"};a.genericRequest("create-gl-account","post",!0,l).then(m=>{m.status?(a.showSuccess(y,m.message),i.value=null,d.value=null,v.value=null,p.value=null):a.showError(y,m.message)})},g=(t,l)=>{n.value[l]=a.validateFormField(t)},w=()=>{a.genericRequest("get-gl-categories","post",!0,{}).then(t=>{t.status&&(C.value=t.data)})},I=t=>{let l={acct_type:t.value.acct_type,gl_cat_no:t.value.gl_no,acct_type:t.value.acct_type,description:null};a.genericRequest("get-gl-sub-categories","post",!0,l).then(u=>{u.status&&(B.value=u.data)})},q=t=>{let l={acct_type:t.value.acct_type,gl_cat_no:t.value.gl_cat_no,gl_sub_cat_no:t.value.gl_no,acct_type:t.value.acct_type,description:null};a.genericRequest("get-gl-type","post",!0,l).then(u=>{u.status&&(V.value=u.data)})};return U(()=>{w()}),(t,l)=>{var F,L,R,S;const u=f("Toast"),_=f("InputText"),r=f("Dropdown"),m=f("Button");return k(),A("div",null,[e("div",N,[l[15]||(l[15]=e("h5",null,"Create Ledger",-1)),e("div",$,[c(u),e("div",M,[e("span",z,[c(_,{type:"text",id:"name",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=o=>i.value=o),onBlur:l[1]||(l[1]=o=>g(i.value,"name")),class:b({"p-invalid":(F=n.value)==null?void 0:F.name})},null,8,["modelValue","class"]),l[10]||(l[10]=e("label",{for:"firstName"},"Name",-1))])]),e("div",P,[e("span",j,[c(r,{id:"type",options:C.value,onChange:l[2]||(l[2]=o=>I(o)),modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=o=>d.value=o),optionLabel:"acct_type",onBlur:l[4]||(l[4]=o=>g(d.value,"cat")),class:b({"p-invalid":(L=n.value)==null?void 0:L.cat})},null,8,["options","modelValue","class"]),l[11]||(l[11]=e("label",{for:"type"},"Category",-1))])]),e("div",G,[e("span",H,[c(r,{id:"type",options:B.value,onChange:l[5]||(l[5]=o=>q(o)),modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=o=>v.value=o),optionLabel:"description",onBlur:l[7]||(l[7]=o=>g(v.value,"subCat")),class:b({"p-invalid":(R=n.value)==null?void 0:R.subCat})},null,8,["options","modelValue","class"]),l[12]||(l[12]=e("label",{for:"type"},"Sub Category",-1))])]),e("div",J,[e("span",K,[c(r,{id:"type",options:V.value,modelValue:p.value,"onUpdate:modelValue":l[8]||(l[8]=o=>p.value=o),optionLabel:"description",onBlur:l[9]||(l[9]=o=>g(p.value,"type")),class:b({"p-invalid":(S=n.value)==null?void 0:S.type})},null,8,["options","modelValue","class"]),l[13]||(l[13]=e("label",{for:"type"},"Accounts",-1))])]),l[14]||(l[14]=e("div",{class:"field col-12 md:col-8"},null,-1)),e("div",O,[c(m,{onClick:T,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{X as default};
