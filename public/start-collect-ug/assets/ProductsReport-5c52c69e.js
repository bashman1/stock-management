import{k as D,l as L,r as b,o as x,b as d,p as B,c as U,d as q,e as _,h as t,i as r,j as i,t as l,f as m,q as v,C as A}from"./index-b5151af3.js";const N={class:"card"},V=_("h5",null,"Products report.",-1),j={class:"my-2"},M={__name:"ProductsReport",setup(E){D();const c=new A,y=L(),h=b(null),p=b(!1),w=()=>{let o={status:"Active"};c.genericRequest("get-products-report","post",!0,o).then(n=>{n.status&&(h.value=n.data)})},g=o=>{y.push("/product-inventory-report/"+o.id)},C=o=>{y.push("/products-sales-report/"+o.id)},k=()=>{try{p.value=!0,c.genericRequest("download-product-report-pdf","post",!0,{},!0).then(o=>{const n=window.URL.createObjectURL(new Blob([o])),a=document.createElement("a");a.href=n,a.setAttribute("download","product_reports.pdf"),document.body.appendChild(a),a.click()})}catch(o){console.log(o)}finally{p.value=!1}},R=()=>{try{p.value=!0,c.genericRequest("download-product-report-csv","post",!0,{},!0).then(o=>{const n=window.URL.createObjectURL(new Blob([o])),a=document.createElement("a");a.href=n,a.setAttribute("download","product_reports.csv"),document.body.appendChild(a),a.click()})}catch(o){console.log(o)}finally{p.value=!1}};return x(()=>{w()}),(o,n)=>{const a=d("Toast"),u=d("Button"),S=d("Toolbar"),s=d("Column"),T=d("DataTable"),f=B("tooltip");return U(),q("div",null,[_("div",N,[V,t(a),t(S,{class:"mb-4"},{end:r(()=>[_("div",j,[t(u,{label:"CSV",icon:"pi pi-file-excel",class:"p-button-success mr-2",onClick:n[0]||(n[0]=()=>R())}),t(u,{label:"PDF",icon:"pi pi-file-pdf",class:"p-button-danger",onClick:n[1]||(n[1]=()=>k())})])]),_:1}),t(T,{value:h.value,paginator:!0,class:"p-datatable-gridlines",rows:20,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:r(()=>[t(s,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.name),1)]),_:1}),t(s,{field:"name",header:"Type",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.type_name),1)]),_:1}),t(s,{field:"name",header:"Category",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.category_name),1)]),_:1}),t(s,{field:"name",header:"Stock Available",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(m(c).commaSeparator(e.quantity)),1)]),_:1}),t(s,{field:"name",header:"Measurement",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.measurement_unit_name),1)]),_:1}),t(s,{field:"name",header:"Purchase Price",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(m(c).commaSeparator(e.purchase_price)),1)]),_:1}),t(s,{field:"name",header:"Selling Price",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(m(c).commaSeparator(e.selling_price)),1)]),_:1}),t(s,{field:"name",header:"Profit Margin",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(m(c).commaSeparator(e.purchase_price-e.selling_price)),1)]),_:1}),t(s,{field:"name",header:"Product No.",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.product_no),1)]),_:1}),t(s,{field:"name",header:"VAT Tax",style:{"min-width":"10rem"}},{body:r(({data:e})=>[i(l(e.tax_config),1)]),_:1}),t(s,{headerStyle:"min-width:10rem;"},{body:r(({data:e})=>[v(t(u,{icon:"pi pi-shopping-bag",onClick:P=>g(e),class:"p-button-primary mr-2"},null,8,["onClick"]),[[f,"Inventory report"]]),v(t(u,{icon:"pi pi-ticket",onClick:P=>C(e),class:"p-button-success mr-2"},null,8,["onClick"]),[[f,"Sales report"]])]),_:1})]),_:1},8,["value"])])])}}};export{M as default};
