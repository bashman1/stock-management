import{k as M,l as S,r as p,o as B,b as c,c as N,d as j,e as n,h as o,i as s,j as m,t as v,f as P,C as R}from"./index-54b662c4.js";const U={class:"grid"},V={class:"col-12"},q={className:"card"},z={class:"my-2"},O={__name:"ApproveCollections",setup(E){const y=M(),a=new R;S();const C=p(null),l=p(null),f=p(null),b=p(null),_=p(null),h=()=>{a.genericRequest("get-pending-transactions/Pending","get",!0,{}).then(u=>{u.status&&(C.value=u.data)})},k=()=>{_.value="Are you sure you want to approve the selected transactions?",f.value=a.toggleModal(!0)},D=()=>{_.value="Are you sure you want to decline the selected transactions?",b.value=a.toggleModal(!0)},g=()=>{f.value=a.toggleModal(!1),b.value=a.toggleModal(!1)},w=u=>{let e={action:u,tranList:l.value};g(),a.genericRequest("approve-transactions","post",!0,e).then(d=>{d.status?(l.value=[],h(),a.showSuccess(y,d.message)):a.showError(y,d.message)})};return B(()=>{h()}),(u,e)=>{const d=c("Toast"),i=c("Button"),x=c("Dialog"),A=c("Toolbar"),r=c("Column"),T=c("DataTable");return N(),j("div",U,[n("div",V,[n("div",q,[e[8]||(e[8]=n("h5",null,"Approve Transactions",-1)),o(d),o(x,{header:"Confirmation",visible:f.value,"onUpdate:visible":e[1]||(e[1]=t=>f.value=t),style:{width:"550px"},modal:!0},{footer:s(()=>[o(i,{label:"Cancel",icon:"pi pi-times",onClick:g,class:"p-button-text"}),o(i,{label:"Confirm",icon:"pi pi-check",onClick:e[0]||(e[0]=t=>w("Approved")),class:"p-button-text",autofocus:""})]),default:s(()=>[e[5]||(e[5]=n("div",{class:"flex align-items-center justify-content-center"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to approve the selected transactions?")],-1))]),_:1},8,["visible"]),o(x,{header:"Confirmation",visible:b.value,"onUpdate:visible":e[3]||(e[3]=t=>b.value=t),style:{width:"550px"},modal:!0},{footer:s(()=>[o(i,{label:"Cancel",icon:"pi pi-times",onClick:g,class:"p-button-text"}),o(i,{label:"Confirm",icon:"pi pi-check",onClick:e[2]||(e[2]=t=>w("Declined")),class:"p-button-text",autofocus:""})]),default:s(()=>[e[6]||(e[6]=n("div",{class:"flex align-items-center justify-content-center"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to decline the selected transactions?")],-1))]),_:1},8,["visible"]),o(A,{class:"mb-4"},{start:s(()=>[n("div",z,[o(i,{label:"Approve",icon:"pi pi-check",class:"p-button-success",onClick:k,disabled:!l.value||!l.value.length},null,8,["disabled"]),o(i,{label:"Reject",icon:"pi pi-times",class:"p-button-danger",onClick:D,disabled:!l.value||!l.value.length},null,8,["disabled"])])]),end:s(()=>e[7]||(e[7]=[])),_:1}),o(T,{value:C.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll",selection:l.value,"onUpdate:selection":e[4]||(e[4]=t=>l.value=t),rowsPerPageOptions:[5,10,25]},{default:s(()=>[o(r,{field:"Date",header:"Date",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(v(t.tran_date),1)]),_:1}),o(r,{header:"Amount",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(v(P(a).commaSeparator(t.amount)),1)]),_:1}),o(r,{header:"Member Name",style:{"min-width":"12rem"}},{body:s(({data:t})=>[m(v(t.member_name),1)]),_:1}),o(r,{header:"Status",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(v(t.status),1)]),_:1}),o(r,{header:"Officer",style:{"min-width":"10rem"}},{body:s(({data:t})=>[m(v(t.officer_name),1)]),_:1}),o(r,{selectionMode:"multiple",headerStyle:"width: 3rem"})]),_:1},8,["value","selection"])])])])}}};export{O as default};
