import{k as F,r,l as R,m as U,o as $,b as p,p as q,c as M,d as I,e as u,h as l,i,j as m,t as v,f as L,q as C,n as j,C as z}from"./index-54b662c4.js";const H={className:"card"},K={style:{"padding-top":"20px"}},O={class:"grid p-fluid"},P={class:"field col-12 md:col-12"},J={class:"p-float-label"},X={__name:"GlAccounts",setup(Q){const f=F(),k=r(null),a=new z,N=R();U();const g=r(!1),c=r(null),y=r(null),_=r({});r(null);const h=r(!1),D=()=>{a.genericRequest("get-gl-accounts","get",!0,{}).then(e=>{e.status?k.value=e.data:a.showError(f,e.message)})},A=(e,o)=>{_.value[o]=a.validateFormField(e)},B=e=>{c.value=e.description,y.value=e.acct_no,h.value=!1,b(!0)},S=e=>{c.value="Sub account for "+e.description,h.value=!0,y.value=e.acct_no,b(!0)},b=e=>{g.value=e},T=()=>{if(_.value.description=a.validateFormField(c.value),a.validateRequiredFields(_.value)){a.showError(f,"Please fill in the missing field");return}let o={description:c.value,acctNo:y.value},s="update-gl-account";h.value&&(s="create-sub-account"),a.genericRequest(s,"post",!0,o).then(n=>{n.status?(a.showSuccess(f,n.message),D(),b(!1)):a.showError(f,n.message)})},x=e=>{N.push("/gl-statement/"+(e==null?void 0:e.acct_no))};return $(()=>{D()}),(e,o)=>{const s=p("Column"),n=p("Button"),E=p("DataTable"),G=p("Textarea"),V=p("Dialog"),w=q("tooltip");return M(),I("div",H,[o[5]||(o[5]=u("h5",null,"Chart Of Accounts",-1)),l(E,{value:k.value,paginator:!0,class:"p-datatable-gridlines",rows:20,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:i(()=>[l(s,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.description),1)]),_:1}),l(s,{field:"name",header:"Acct Balance",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(L(a).commaSeparator(t.balance)),1)]),_:1}),l(s,{field:"name",header:"Acct No.",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.acct_no),1)]),_:1}),l(s,{field:"name",header:"Acct Type",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.acct_type),1)]),_:1}),l(s,{field:"name",header:"Ledger No.",style:{"min-width":"10rem"}},{body:i(({data:t})=>[m(v(t.gl_no),1)]),_:1}),l(s,{headerStyle:"max-width:10rem;"},{body:i(({data:t})=>[C(l(n,{icon:"pi pi-eye",onClick:d=>x(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[w,"Gl. account statement"]]),C(l(n,{icon:"pi pi-pencil",onClick:d=>B(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[w,"Update gl account description"]]),C(l(n,{icon:"pi pi-plus",onClick:d=>S(t),class:"p-button-info mr-2"},null,8,["onClick"]),[[w,"Create sub account"]])]),_:1})]),_:1},8,["value"]),l(V,{header:"Update Ledger Name",visible:g.value,"onUpdate:visible":o[3]||(o[3]=t=>g.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:i(()=>[l(n,{label:"Cancel",onClick:o[2]||(o[2]=t=>b(!1)),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),l(n,{onClick:T,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:i(()=>{var t;return[u("p",K,[u("div",O,[u("div",P,[u("span",J,[l(G,{inputId:"description",onBlur:o[0]||(o[0]=d=>A(c.value,"description")),rows:"7",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=d=>c.value=d),class:j({"p-invalid":(t=_.value)==null?void 0:t.description})},null,8,["modelValue","class"]),o[4]||(o[4]=u("label",{for:"description"},"Description",-1))])])])])]}),_:1},8,["visible"])])}}};export{X as default};
