import{k as W,l as X,r as n,o as Y,b as _,c as i,d as r,h as t,e as a,i as V,g as c,n as w,j as D,t as F,C as Z}from"./index-13be92d9.js";const ee={className:"card"},le=a("h5",null,"Collect Money",-1),te={class:"grid p-fluid mt-3"},ae={class:"col-12 md:col-12"},oe={class:"p-inputgroup"},se={key:0,class:"field col-12 md:col-12"},ne={key:1,class:"field col-12 md:col-4"},ue={class:"p-float-label"},de=a("label",{for:"name"},"Member Name",-1),ie={key:2,class:"field col-12 md:col-4"},re={class:"p-float-label"},me=a("label",{for:"number"},"Member Number",-1),ce={key:3,class:"field col-12 md:col-4"},ve={class:"p-float-label"},pe=a("label",{for:"contact"},"Member Contact",-1),_e={key:4,class:"field col-12 md:col-4"},be={class:"p-float-label"},ye=a("label",{for:"amount"},"Amount",-1),fe={key:5,class:"field col-12 md:col-4"},he={class:"p-float-label"},Ve=a("label",{for:"transactionType"},"Transact type",-1),Ce={key:6,class:"field col-12 md:col-4"},ke={class:"p-float-label"},Ne=a("label",{for:"date"},"Date",-1),ge={key:7,class:"field col-12 md:col-12"},we={class:"p-float-label"},Te=a("label",{for:"textarea"},"Description",-1),xe=a("div",{class:"field col-12 md:col-6"},null,-1),De={key:8,class:"field col-12 md:col-2"},Fe={key:9,class:"field col-12 md:col-4"},Ae={__name:"CollectMoney",setup(Me){const M=W(),o=new Z,q=X(),y=n(null),f=n(null),h=n(null),T=n(null),C=n(null),m=n(null),x=n(null),k=n(null),B=n(null),S=n(null),u=n(null),A=n([]),d=n({}),K=s=>{let e={status:"Active",searchKey:s};o.genericRequest("get-members-by-institution","post",!0,e).then(b=>{b.status&&(B.value=b.data)})},L=()=>{let s={status:"Active"};o.genericRequest("get-transaction-codes","post",!0,s).then(e=>{e.status&&(A.value=e.data)})},P=()=>{K(y.value)},j=s=>{y.value=null,u.value=s,S.value=s.id,f.value=s.name,h.value=s.member_number,T.value=s.phone_number},z=()=>{y.value=null,u.value=null,B.value=null},H=()=>{var b,v;if(d.value.mName=o.validateFormField(f.value),d.value.mNumber=o.validateFormField(h.value),d.value.tranAmt=o.validateFormField(C.value),d.value.tType=o.validateFormField(m.value),d.value.description=o.validateFormField(k.value),o.validateRequiredFields(d.value)){o.showError(M,"Please fill in the missing field");return}let e={name:f.value,member_number:h.value,member_contact:T.value,amount:C.value,tran_type:(b=m==null?void 0:m.value)==null?void 0:b.tran_code,tran_date:x.value?x.value:new Date,description:k.value,member_id:S.value,transaction_type:(v=m==null?void 0:m.value)==null?void 0:v.tran_code};o.genericRequest("collect-deposit","post",!0,e).then(p=>{p.status?(o.showSuccess(M,p.message),o.redirect(q,"/view-collected-money")):o.showError(M,p.message)})},N=(s,e)=>{d.value[e]=o.validateFormField(s)};return Y(()=>{L()}),(s,e)=>{var U,$,E,I,R;const b=_("Toast"),v=_("InputText"),p=_("Button"),g=_("Column"),G=_("DataTable"),J=_("Dropdown"),O=_("Calendar"),Q=_("Textarea");return i(),r("div",ee,[le,t(b),a("div",te,[a("div",ae,[a("div",oe,[t(v,{placeholder:"Search by Member name or number",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l)},null,8,["modelValue"]),t(p,{onClick:P,disabled:y.value==null,label:"Search"},null,8,["disabled"])])]),u.value?c("",!0):(i(),r("div",se,[t(G,{value:B.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:V(()=>[t(g,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:V(({data:l})=>[D(F(l.name),1)]),_:1}),t(g,{header:"Member No.",style:{"min-width":"10rem"}},{body:V(({data:l})=>[D(F(l.member_number),1)]),_:1}),t(g,{header:"Phone Number",style:{"min-width":"12rem"}},{body:V(({data:l})=>[D(F(l.phone_number),1)]),_:1}),t(g,{header:"Alt. Member No.",style:{"min-width":"10rem"}},{body:V(({data:l})=>[D(F(l.alt_member_number),1)]),_:1}),t(g,{header:"Select",headerStyle:"min-width:5rem;"},{body:V(({data:l})=>[t(p,{icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:Be=>j(l)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])),u.value?(i(),r("div",ne,[a("span",ue,[t(v,{type:"text",id:"name",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),disabled:"true",onBlur:e[2]||(e[2]=l=>N(f.value,"mName")),class:w({"p-invalid":(U=d.value)==null?void 0:U.mName})},null,8,["modelValue","class"]),de])])):c("",!0),u.value?(i(),r("div",ie,[a("span",re,[t(v,{type:"text",id:"number",modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=l=>h.value=l),disabled:"true",onBlur:e[4]||(e[4]=l=>N(h.value,"mNumber")),class:w({"p-invalid":($=d.value)==null?void 0:$.mNumber})},null,8,["modelValue","class"]),me])])):c("",!0),u.value?(i(),r("div",ce,[a("span",ve,[t(v,{type:"text",id:"contact",modelValue:T.value,"onUpdate:modelValue":e[5]||(e[5]=l=>T.value=l),disabled:"true"},null,8,["modelValue"]),pe])])):c("",!0),u.value?(i(),r("div",_e,[a("span",be,[t(v,{type:"text",id:"amount",modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=l=>C.value=l),onBlur:e[7]||(e[7]=l=>N(C.value,"tranAmt")),class:w({"p-invalid":(E=d.value)==null?void 0:E.tranAmt})},null,8,["modelValue","class"]),ye])])):c("",!0),u.value?(i(),r("div",fe,[a("span",he,[t(J,{id:"transactionType",onBlur:e[8]||(e[8]=l=>N(m.value,"tType")),class:w({"p-invalid":(I=d.value)==null?void 0:I.tType}),options:A.value,modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=l=>m.value=l),optionLabel:"tran_description"},null,8,["class","options","modelValue"]),Ve])])):c("",!0),u.value?(i(),r("div",Ce,[a("span",ke,[t(O,{id:"date",modelValue:x.value,"onUpdate:modelValue":e[10]||(e[10]=l=>x.value=l)},null,8,["modelValue"]),Ne])])):c("",!0),u.value?(i(),r("div",ge,[a("span",we,[t(Q,{id:"textarea",rows:"3",cols:"30",onBlur:e[11]||(e[11]=l=>N(k.value,"description")),class:w({"p-invalid":(R=d.value)==null?void 0:R.description}),modelValue:k.value,"onUpdate:modelValue":e[12]||(e[12]=l=>k.value=l)},null,8,["class","modelValue"]),Te])])):c("",!0),xe,u.value?(i(),r("div",De,[t(p,{onClick:z,label:"CANCEL",class:"p-button-outlined p-button-danger mr-2 mb-2"})])):c("",!0),u.value?(i(),r("div",Fe,[t(p,{onClick:H,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])):c("",!0)])])}}};export{Ae as default};
