import{m as Q,k as W,l as X,r as h,o as Y,b,p as Z,c as x,d as w,e as s,j as a,t as o,F as ss,s as es,h as n,i as r,q as $,C as ts}from"./index-066f2b3f.js";const ls={class:"grid"},os={class:"col-12 md:col-6"},as={class:"card p-fluid"},ns={class:"field"},is={for:"name1",class:"text-900"},ds={class:"field"},rs={for:"name1",class:"text-900"},us={class:"field"},cs={for:"name1",class:"text-900"},ms={class:"field"},_s={for:"name1",class:"text-900"},vs={class:"field"},fs={for:"name1",class:"text-900"},ps={class:"field"},bs={for:"name1",class:"text-900"},hs={class:"field"},gs={for:"name1",class:"text-900"},ys={class:"field"},xs={for:"name1",class:"text-900"},ws={class:"field"},Bs={for:"name1",class:"text-900"},Cs={class:"card p-fluid"},Ds={class:"field"},ks={class:"text-900",for:"name1"},Ss={class:"field"},Ns={class:"text-900",for:"name1"},Ts={class:"col-12 md:col-6"},As={class:"card p-fluid"},Rs={class:"text-900",for:"name1"},Us={class:"card"},Vs={class:"field"},Es={class:"text-900",for:"name1"},Ms={class:"field"},Is={class:"text-900",for:"name1"},Ps={class:"field"},qs={class:"text-900",for:"name1"},Ls={class:"col-12 md:col-12"},$s={class:"card"},Fs={style:{"padding-top":"20px"}},js={class:"grid p-fluid"},zs={class:"field col-12 md:col-12"},Hs={class:"p-float-label"},Gs={__name:"InstitutionProfile",setup(Ks){const F=Q(),v=W(),u=new ts,j=X(),l=h(null),c=h([]),f=h({}),p=h(!1),z=()=>{let i={institutionId:F.params.id,status:"Active"};u.genericRequest("get-institution-profile","post",!0,i).then(e=>{e.status?l.value=e==null?void 0:e.data[0]:u.showError(v,e.message)})},H=i=>{u.redirect(j,"/user-profile/"+(i==null?void 0:i.id))},K=i=>{G(i.id),f.value=i,p.value=!0,c.value=[]},O=()=>{if(!c.value||c.value.length===0){u.showError(v,"Please Select at least a branch");return}let i={user:f.value.id,branches:c.value};u.genericRequest("assign-user-branches","post",!0,i).then(e=>{e.status?(u.showSuccess(v,e.message),p.value=!1):u.showError(v,e.message)})},G=i=>{let e={status:"Active",user_id:i};u.genericRequest("get-assigned-user-branches","post",!0,e).then(d=>{var m;d.status?c.value=(m=l==null?void 0:l.value)==null?void 0:m.branches.filter(g=>d==null?void 0:d.data.some(y=>y.branch_id===g.id)):u.showError(v,d.message)})};return Y(()=>{z()}),(i,e)=>{var C,D,k,S,N,T,A,R,U,V,E,M,I,P,q,L;const d=b("Column"),m=b("Button"),g=b("DataTable"),y=b("MultiSelect"),J=b("Dialog"),B=Z("tooltip");return x(),w("div",ls,[s("div",os,[s("div",as,[e[12]||(e[12]=s("h5",{class:"text-500"},"Institution Details",-1)),s("div",ns,[s("label",is,[e[3]||(e[3]=a("Name: ")),s("span",null,o((C=l.value)==null?void 0:C.name),1)])]),s("div",ds,[s("label",rs,[e[4]||(e[4]=a("Ref No.: ")),s("span",null,o((D=l.value)==null?void 0:D.ref_no),1)])]),s("div",us,[s("label",cs,[e[5]||(e[5]=a("Type: ")),s("span",null,o((k=l.value)==null?void 0:k.type_name),1)])]),s("div",ms,[s("label",_s,[e[6]||(e[6]=a("Status: ")),s("span",null,o((S=l.value)==null?void 0:S.status),1)])]),s("div",vs,[s("label",fs,[e[7]||(e[7]=a("P.O Box: ")),s("span",null,o((N=l.value)==null?void 0:N.p_o_box),1)])]),s("div",ps,[s("label",bs,[e[8]||(e[8]=a("Start Date: ")),s("span",null,o((T=l.value)==null?void 0:T.created_at),1)])]),s("div",hs,[s("label",gs,[e[9]||(e[9]=a("Tin: ")),s("span",null,o((A=l.value)==null?void 0:A.tin),1)])]),s("div",ys,[s("label",xs,[e[10]||(e[10]=a("Ref. No: ")),s("span",null,o((R=l.value)==null?void 0:R.ref_no),1)])]),s("div",ws,[s("label",Bs,[e[11]||(e[11]=a("Description: ")),s("span",null,o((U=l.value)==null?void 0:U.description),1)])])]),s("div",Cs,[e[15]||(e[15]=s("h5",{class:"text-500"},"Address",-1)),s("div",Ds,[s("label",ks,[e[13]||(e[13]=a("City: ")),s("span",null,o((V=l.value)==null?void 0:V.city_name),1)])]),s("div",Ss,[s("label",Ns,[e[14]||(e[14]=a("Address: ")),s("span",null,o((E=l.value)==null?void 0:E.address),1)])])])]),s("div",Ts,[s("div",As,[e[16]||(e[16]=s("h5",{class:"text-500"},"Branches",-1)),(x(!0),w(ss,null,es((M=l.value)==null?void 0:M.branches,(t,_)=>(x(),w("div",{class:"field",key:_},[s("label",Rs,[s("span",null,o(_+1+". "+(t==null?void 0:t.name)+", "+(t==null?void 0:t.address)),1)])]))),128))]),s("div",Us,[e[20]||(e[20]=s("h5",{class:"text-500"},"Bank Info",-1)),s("div",Vs,[s("label",Es,[e[17]||(e[17]=a("Bank: ")),s("span",null,o((I=l.value)==null?void 0:I.bank_name),1)])]),s("div",Ms,[s("label",Is,[e[18]||(e[18]=a("Name: ")),s("span",null,o((P=l.value)==null?void 0:P.acct_name),1)])]),s("div",Ps,[s("label",qs,[e[19]||(e[19]=a("Number: ")),s("span",null,o((q=l.value)==null?void 0:q.acct_number),1)])])])]),s("div",Ls,[s("div",$s,[e[22]||(e[22]=s("h5",{class:"text-500"},"Users",-1)),n(g,{value:(L=l.value)==null?void 0:L.users,size:"small",paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{default:r(()=>[n(d,{field:"name",header:"Name",style:{"min-width":"10rem"}},{body:r(({data:t})=>[a(o(t.first_name+" "+t.last_name+" "+t.other_name),1)]),_:1}),n(d,{header:"Phone No.",style:{"min-width":"10rem"}},{body:r(({data:t})=>[a(o(t.phone_number),1)]),_:1}),n(d,{header:"Email",style:{"min-width":"12rem"}},{body:r(({data:t})=>[a(o(t.email),1)]),_:1}),n(d,{header:"Branch",style:{"min-width":"10rem"}},{body:r(({data:t})=>[a(o(t.branch),1)]),_:1}),n(d,{header:"Status",style:{"min-width":"10rem"}},{body:r(({data:t})=>[a(o(t.status),1)]),_:1}),n(d,{header:"Date",style:{"min-width":"10rem"}},{body:r(({data:t})=>[a(o(t.created_at),1)]),_:1}),n(d,{headerStyle:"min-width:10rem;"},{body:r(({data:t})=>[$(n(m,{icon:"pi pi-eye",onClick:_=>H(t),class:"p-button-primary mr-2"},null,8,["onClick"]),[[B,"View user details"]]),$(n(m,{icon:"pi pi-arrow-right-arrow-left",onClick:_=>K(t),class:"p-button-success mr-2"},null,8,["onClick"]),[[B,"Assign users branches"]])]),_:1})]),_:1},8,["value"]),n(J,{header:f.value.first_name+" "+f.value.last_name+" "+f.value.other_name,visible:p.value,"onUpdate:visible":e[2]||(e[2]=t=>p.value=t),style:{width:"30vw"},modal:!0,class:"p-fluid"},{footer:r(()=>[n(m,{label:"Cancel",onClick:e[1]||(e[1]=t=>p.value=!1),icon:"pi pi-times",class:"p-button-outlined p-button-danger mr-2 mb-2"}),n(m,{onClick:O,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})]),default:r(()=>{var t;return[s("p",Fs,[s("div",js,[s("div",zs,[s("span",Hs,[n(y,{id:"multiselect",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=_=>c.value=_),options:(t=l.value)==null?void 0:t.branches,optionLabel:"name"},null,8,["modelValue","options"]),e[21]||(e[21]=s("label",{for:"subCatCat"},"Select Branches",-1))])])])])]}),_:1},8,["header","visible"])])])])}}};export{Gs as default};
