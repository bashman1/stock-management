import{k as Vl,m as hl,l as wl,r as a,o as yl,b as B,c as C,d as F,e,h as i,n as I,g as L,C as gl}from"./index-10a83ad5.js";const Ul={class:"card"},xl=e("h5",null,"Create User",-1),Bl={class:"grid p-fluid mt-3"},Cl={class:"field col-12 md:col-4"},Fl={class:"p-float-label"},Il=e("label",{for:"firstName"},"First Name",-1),Al={class:"field col-12 md:col-4"},Nl={class:"p-float-label"},Dl=e("label",{for:"lastName"},"Last Name",-1),Pl={class:"field col-12 md:col-4"},Rl={class:"p-float-label"},Tl=e("label",{for:"otherName"},"Other Names",-1),kl={class:"field col-12 md:col-4"},Sl={class:"p-float-label"},ql=e("label",{for:"email"},"Email",-1),El={class:"field col-12 md:col-4"},Ll={class:"p-float-label"},Ol=e("label",{for:"phoneNumber"},"Phone Number",-1),$l={class:"field col-12 md:col-4"},Ml={class:"p-float-label"},zl=e("label",{for:"dob"},"Date Of Birth",-1),Gl={class:"field col-12 md:col-4"},jl={class:"p-float-label"},Hl=e("label",{for:"gender"},"Gender",-1),Jl={class:"field col-12 md:col-4"},Kl={class:"p-float-label"},Ql=e("label",{for:"type"},"Type",-1),Wl={key:0,class:"field col-12 md:col-4"},Xl={class:"p-float-label"},Yl=e("label",{for:"institution"},"Institution",-1),Zl={key:1,class:"field col-12 md:col-4"},le={class:"p-float-label"},ee=e("label",{for:"institution"},"Branch",-1),te={key:2,class:"field col-12 md:col-4"},ae={class:"p-float-label"},oe=e("label",{for:"institution"},"User Category",-1),se={class:"field col-12 md:col-4"},ne={class:"p-float-label"},ie=e("label",{for:"institution"},"Role",-1),ue={class:"field col-12 md:col-12"},de={class:"p-float-label"},ve=e("label",{for:"textarea"},"Address",-1),re={class:"field col-12 md:col-4"},ce={class:"p-float-label"},me=e("label",{for:"instCity"},"City",-1),pe={class:"field col-12 md:col-4"},_e={class:"p-float-label"},fe=e("label",{for:"instStreet"},"Street",-1),be={class:"field col-12 md:col-4"},Ve={class:"p-float-label"},he=e("label",{for:"instPOBox"},"P.O Box",-1),we={class:"field col-12 md:col-12"},ye={class:"p-float-label"},ge=e("label",{for:"instDescription"},"More Info",-1),Ue={class:"card"},xe={key:0},Be={class:"grid p-fluid mt-3"},Ce={key:0,class:"field col-12 md:col-6"},Fe={class:"p-float-label"},Ie=e("label",{for:"password"},"Password",-1),Ae={key:1,class:"field col-12 md:col-6"},Ne={class:"p-float-label"},De=e("label",{for:"confirmPassword"},"Confirm Password",-1),Pe=e("div",{class:"field col-12 md:col-8"},null,-1),Re={class:"field col-12 md:col-4"},Se={__name:"CreateUser",setup(Te){const z=Vl(),u=new gl,G=hl(),dl=wl(),f=a(null),b=a(null),A=a(null),V=a(null),N=a(null),D=a(null),P=a(null),R=a(null),M=a(null),T=a(null),k=a(null),S=a(null),w=a(null),y=a(null),j=a(null),p=a(null),g=a(null),O=a(null),$=a(null),H=a(null),U=a(null),q=a(null),E=a(null),v=a({}),s=a(null),h=a(!1),J=a([{label:"Male",value:"Male"},{label:"Female",value:"Female"}]),K=a([{label:"Super Admin",value:"Admin"},{label:"Institution Admin",value:"Institution"}]),Q=a([{label:"Branch Admin",value:"BranchAdmin"},{label:"Institution Admin",value:"InstitutionAdmin"}]),vl=()=>{var d,n,r,c;if(v.value.fName=u.validateFormField(f.value),v.value.lName=u.validateFormField(b.value),v.value.email=u.validateFormField(V.value),v.value.type=u.validateFormField(p.value),v.value.role=u.validateFormField(U.value),h.value||(v.value.password=u.validateFormField(w.value),v.value.confirmPassword=u.validateFormField(y.value)),u.validateRequiredFields(v.value)){u.showError(z,"Please fill in the missing field");return}let l={id:G.params.id,first_name:f==null?void 0:f.value,last_name:b==null?void 0:b.value,other_name:A==null?void 0:A.value,email:V==null?void 0:V.value,phone_number:N==null?void 0:N.value,date_of_birth:D==null?void 0:D.value,gender:(d=P==null?void 0:P.value)==null?void 0:d.value,address:R==null?void 0:R.value,city_id:(n=M.value)==null?void 0:n.id,street:T==null?void 0:T.value,p_o_box:k==null?void 0:k.value,description:S==null?void 0:S.value,password:w==null?void 0:w.value,confirm_password:y==null?void 0:y.value,status:"Active",user_type:(r=p==null?void 0:p.value)==null?void 0:r.value,user_category:E.value!=null?E.value.value:null,institution_id:g.value!=null?g==null?void 0:g.value.id:null,role_id:(c=U.value)==null?void 0:c.id,branch_id:O.value!=null?O.value.id:null};u.genericRequest("create-user","post",!0,l).then(_=>{_.status?(u.showSuccess(z,_.message),u.redirect(dl,"/view-users")):u.showError(z,_.message)})},rl=()=>{u.genericRequest("get-city-county-id/1","get",!0,{}).then(o=>{o.status&&(j.value=o.data)})},W=o=>{let l={institutionId:o,status:"Active"};u.genericRequest("get-institution-branches","post",!0,l).then(d=>{var n;d.status&&(H.value=d.data,h&&s.value.branch_id!=null&&(O.value=(n=H.value)==null?void 0:n.find(r=>r.id==s.value.branch_id)))})},X=o=>{let l={institutionId:o,status:"Active"};u.genericRequest("get-institution-roles","post",!0,l).then(d=>{var n;d.status&&(q.value=d.data,h&&s.value.role_id!=null&&(U.value=(n=q.value)==null?void 0:n.find(r=>r.id==s.value.role_id)))})},Y=o=>{let l={roleType:o,status:"Active"};u.genericRequest("get-role-type","post",!0,l).then(d=>{var n;d.status&&(q.value=d.data,h&&(U.value=(n=q.value)==null?void 0:n.find(r=>r.id==s.value.role_id)))})},cl=()=>{u.genericRequest("get-institutions","get",!0,{}).then(o=>{o.status&&($.value=o.data)})},ml=o=>{W(o.value.id),X(o.value.id)},x=(o,l)=>{v.value[l]=u.validateFormField(o)},pl=o=>{o.value.value=="Admin"?(Y(o.value.value),E.value="SuperAdmin"):q.value=[]},_l=async o=>{let l={userId:o};u.genericRequest("get-user-details","post",!0,l).then(d=>{d.status&&(s.value=d.data[0],fl())})},fl=async()=>{var o,l,d,n,r,c,_;((o=s.value)==null?void 0:o.institution_id)!=null&&(await W((l=s.value)==null?void 0:l.institution_id),await X((d=s.value)==null?void 0:d.institution_id)),s.value.user_type=="Admin"&&await Y("Admin"),f.value=await s.value.first_name,b.value=await s.value.last_name,A.value=await s.value.other_name,V.value=await s.value.email,N.value=await s.value.phone_number,D.value=await s.value.date_of_birth,P.value=await((n=J.value)==null?void 0:n.find(m=>m.value==s.value.gender)),p.value=await((r=K.value)==null?void 0:r.find(m=>m.value==s.value.user_type)),g.value=await($==null?void 0:$.value.find(m=>m.id==s.value.institution_id)),E.value=await((c=Q.value)==null?void 0:c.find(m=>m.value==s.value.user_category)),R.value=await s.value.address,M.value=await((_=j.value)==null?void 0:_.find(m=>m.id==s.value.city_id)),T.value=await s.value.street,k.value=await s.value.p_o_box,S.value=await s.value.description};return yl(()=>{cl(),rl(),G.params.id!=null&&(h.value=!0,_l(G.params.id))}),(o,l)=>{var Z,ll,el,tl,al,ol,sl,nl,il,ul;const d=B("Toast"),n=B("InputText"),r=B("Calendar"),c=B("Dropdown"),_=B("Textarea"),m=B("Password"),bl=B("Button");return C(),F("div",null,[e("div",Ul,[xl,e("div",Bl,[i(d),e("div",Cl,[e("span",Fl,[i(n,{type:"text",id:"firstName",modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=t=>f.value=t),onBlur:l[1]||(l[1]=t=>x(f.value,"fName")),class:I({"p-invalid":(Z=v.value)==null?void 0:Z.fName})},null,8,["modelValue","class"]),Il])]),e("div",Al,[e("span",Nl,[i(n,{type:"text",id:"lastName",modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=t=>b.value=t),onBlur:l[3]||(l[3]=t=>x(b.value,"lName")),class:I({"p-invalid":(ll=v.value)==null?void 0:ll.lName})},null,8,["modelValue","class"]),Dl])]),e("div",Pl,[e("span",Rl,[i(n,{type:"text",id:"otherName",modelValue:A.value,"onUpdate:modelValue":l[4]||(l[4]=t=>A.value=t)},null,8,["modelValue"]),Tl])]),e("div",kl,[e("span",Sl,[i(n,{type:"text",id:"email",modelValue:V.value,"onUpdate:modelValue":l[5]||(l[5]=t=>V.value=t),onBlur:l[6]||(l[6]=t=>x(V.value,"email")),class:I({"p-invalid":(el=v.value)==null?void 0:el.email})},null,8,["modelValue","class"]),ql])]),e("div",El,[e("span",Ll,[i(n,{type:"text",id:"phoneNumber",modelValue:N.value,"onUpdate:modelValue":l[7]||(l[7]=t=>N.value=t)},null,8,["modelValue"]),Ol])]),e("div",$l,[e("span",Ml,[i(r,{inputId:"dob",modelValue:D.value,"onUpdate:modelValue":l[8]||(l[8]=t=>D.value=t)},null,8,["modelValue"]),zl])]),e("div",Gl,[e("span",jl,[i(c,{id:"gender",options:J.value,modelValue:P.value,"onUpdate:modelValue":l[9]||(l[9]=t=>P.value=t),optionLabel:"label"},null,8,["options","modelValue"]),Hl])]),e("div",Jl,[e("span",Kl,[i(c,{id:"type",onChange:pl,options:K.value,modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=t=>p.value=t),optionLabel:"label",onBlur:l[11]||(l[11]=t=>x(p.value,"type")),class:I({"p-invalid":(tl=v.value)==null?void 0:tl.type})},null,8,["options","modelValue","class"]),Ql])]),((al=p.value)==null?void 0:al.value)=="Institution"?(C(),F("div",Wl,[e("span",Xl,[i(c,{id:"institution",onChange:ml,options:$.value,modelValue:g.value,"onUpdate:modelValue":l[12]||(l[12]=t=>g.value=t),optionLabel:"name"},null,8,["options","modelValue"]),Yl])])):L("",!0),((ol=p.value)==null?void 0:ol.value)=="Institution"?(C(),F("div",Zl,[e("span",le,[i(c,{id:"institution",options:H.value,modelValue:O.value,"onUpdate:modelValue":l[13]||(l[13]=t=>O.value=t),optionLabel:"name"},null,8,["options","modelValue"]),ee])])):L("",!0),((sl=p.value)==null?void 0:sl.value)=="Institution"?(C(),F("div",te,[e("span",ae,[i(c,{id:"institution",options:Q.value,modelValue:E.value,"onUpdate:modelValue":l[14]||(l[14]=t=>E.value=t),optionLabel:"label"},null,8,["options","modelValue"]),oe])])):L("",!0),e("div",se,[e("span",ne,[i(c,{id:"institution",options:q.value,modelValue:U.value,"onUpdate:modelValue":l[15]||(l[15]=t=>U.value=t),optionLabel:"name",onBlur:l[16]||(l[16]=t=>x(U.value,"role")),class:I({"p-invalid":(nl=v.value)==null?void 0:nl.role})},null,8,["options","modelValue","class"]),ie])]),e("div",ue,[e("span",de,[i(_,{inputId:"textarea",rows:"3",cols:"30",modelValue:R.value,"onUpdate:modelValue":l[17]||(l[17]=t=>R.value=t)},null,8,["modelValue"]),ve])]),e("div",re,[e("span",ce,[i(c,{id:"instCity",options:j.value,modelValue:M.value,"onUpdate:modelValue":l[18]||(l[18]=t=>M.value=t),optionLabel:"name"},null,8,["options","modelValue"]),me])]),e("div",pe,[e("span",_e,[i(n,{type:"text",id:"instStreet",modelValue:T.value,"onUpdate:modelValue":l[19]||(l[19]=t=>T.value=t)},null,8,["modelValue"]),fe])]),e("div",be,[e("span",Ve,[i(n,{type:"text",id:"instPOBox",modelValue:k.value,"onUpdate:modelValue":l[20]||(l[20]=t=>k.value=t)},null,8,["modelValue"]),he])]),e("div",we,[e("span",ye,[i(_,{inputId:"instDescription",rows:"3",cols:"30",modelValue:S.value,"onUpdate:modelValue":l[21]||(l[21]=t=>S.value=t)},null,8,["modelValue"]),ge])])])]),e("div",Ue,[h.value?L("",!0):(C(),F("h5",xe,"Create Password")),e("div",Be,[h.value?L("",!0):(C(),F("div",Ce,[e("span",Fe,[i(m,{type:"text",id:"password",modelValue:w.value,"onUpdate:modelValue":l[22]||(l[22]=t=>w.value=t),onBlur:l[23]||(l[23]=t=>x(w.value,"password")),class:I({"p-invalid":(il=v.value)==null?void 0:il.password})},null,8,["modelValue","class"]),Ie])])),h.value?L("",!0):(C(),F("div",Ae,[e("span",Ne,[i(m,{type:"text",id:"confirmPassword",modelValue:y.value,"onUpdate:modelValue":l[24]||(l[24]=t=>y.value=t),onBlur:l[25]||(l[25]=t=>x(y.value,"confirmPassword")),class:I({"p-invalid":(ul=v.value)==null?void 0:ul.confirmPassword})},null,8,["modelValue","class"]),De])])),Pe,e("div",Re,[i(bl,{onClick:vl,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{Se as default};
