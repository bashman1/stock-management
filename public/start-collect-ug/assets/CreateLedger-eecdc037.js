import{i as N,j as U,r as s,o as A,b as _,c as E,d as $,f as l,h as p,n as g,C as k}from"./index-1fde5484.js";const M={class:"card"},j=l("h5",null,"Create Ledger",-1),z={class:"grid p-fluid mt-3"},J={class:"field col-12 md:col-4"},O={class:"p-float-label"},P=l("label",{for:"firstName"},"Name",-1),G={class:"field col-12 md:col-4"},H={class:"p-float-label"},K=l("label",{for:"type"},"Category",-1),Q={class:"field col-12 md:col-4"},W={class:"p-float-label"},X=l("label",{for:"type"},"Sub Category",-1),Y={class:"field col-12 md:col-4"},Z={class:"p-float-label"},ee=l("label",{for:"type"},"Accounts",-1),le=l("div",{class:"field col-12 md:col-8"},null,-1),te={class:"field col-12 md:col-4"},se={__name:"CreateLedger",setup(oe){const f=N(),a=new k,w=U(),d=s(null),b=s(null),y=s(null),n=s(null),V=s(null),B=s(null),L=s(null),c=s(null),C=s(null),i=s({});s([{label:"Admin Role",value:"Admin"},{label:"Institution Role",value:"Institution"}]);const F=()=>{var u,m;if(i.value.name=a.validateFormField(d.value),i.value.type=a.validateFormField(n.value),a.validateRequiredFields(i.value)){a.showError(f,"Please fill in the missing field");return}let e={name:d==null?void 0:d.value,type:(u=n==null?void 0:n.value)==null?void 0:u.value,institution_id:c==null?void 0:c.value,description:C==null?void 0:C.value,institution_id:c.value!=null?c==null?void 0:c.value.id:null,role_type:(m=n==null?void 0:n.value)==null?void 0:m.value,status:"Active"};a.genericRequest("crate-role","post",!0,e).then(r=>{r.status?(a.showSuccess(f,r.message),a.redirect(w,"/view-roles")):a.showError(f,r.message)})},v=(t,e)=>{i.value[e]=a.validateFormField(t)},I=()=>{a.genericRequest("get-gl-categories","post",!0,{}).then(t=>{t.status&&(V.value=t.data)})},q=t=>{let e={acct_type:t.value.acct_type,gl_cat_no:t.value.gl_no,acct_type:t.value.acct_type,description:null};alert(JSON.stringify(e)),a.genericRequest("get-gl-sub-categories","post",!0,e).then(u=>{u.status&&(L.value=u.data)})},x=t=>{let e={acct_type:t.value.acct_type,gl_cat_no:t.value.gl_cat_no,gl_sub_cat_no:t.value.gl_no,acct_type:t.value.acct_type,description:null};a.genericRequest("get-gl-type","post",!0,e).then(u=>{u.status&&(B.value=u.data)})};return A(()=>{I()}),(t,e)=>{var h,S,R,T;const u=_("Toast"),m=_("InputText"),r=_("Dropdown"),D=_("Button");return E(),$("div",null,[l("div",M,[j,l("div",z,[p(u),l("div",J,[l("span",O,[p(m,{type:"text",id:"name",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),onBlur:e[1]||(e[1]=o=>v(d.value,"name")),class:g({"p-invalid":(h=i.value)==null?void 0:h.name})},null,8,["modelValue","class"]),P])]),l("div",G,[l("span",H,[p(r,{id:"type",options:V.value,onChange:e[2]||(e[2]=o=>q(o)),modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),optionLabel:"description",onBlur:e[4]||(e[4]=o=>v(b.value,"cat")),class:g({"p-invalid":(S=i.value)==null?void 0:S.cat})},null,8,["options","modelValue","class"]),K])]),l("div",Q,[l("span",W,[p(r,{id:"type",options:L.value,onChange:e[5]||(e[5]=o=>x(o)),modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),optionLabel:"description",onBlur:e[7]||(e[7]=o=>v(y.value,"subCat")),class:g({"p-invalid":(R=i.value)==null?void 0:R.subCat})},null,8,["options","modelValue","class"]),X])]),l("div",Y,[l("span",Z,[p(r,{id:"type",options:B.value,modelValue:n.value,"onUpdate:modelValue":e[8]||(e[8]=o=>n.value=o),optionLabel:"description",onBlur:e[9]||(e[9]=o=>v(n.value,"type")),class:g({"p-invalid":(T=i.value)==null?void 0:T.type})},null,8,["options","modelValue","class"]),ee])]),le,l("div",te,[p(D,{onClick:F,label:"SUBMIT",class:"p-button-outlined mr-2 mb-2"})])])])])}}};export{se as default};
